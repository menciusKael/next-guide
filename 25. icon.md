## Preface

In the previous article, we talked about two ways to add metadata:

1. Configuration-based metadata: export a static `metadata` object or a dynamic `generateMetadata` function in `layout.js` or `page.js`.
2. File-based metadata: add a static or dynamically generated special file

File-based metadata can be used to add website application icons, OG images, robots.txt, sitemap.xml, and manifest.json. In this article, we will explain the specific usage and configuration content in detail.

## 1. favicon、icon and apple-icon

### 1.1. Introduction

Next.js conventions `favicon`, `icon`, `apple-icon` files can all be used to set the icon of the application. They can set the icon in the browser tab, the icon in the favorites (bookmarks), the icon on the mobile screen, the icon in the search engine results, and so on.

There are two ways to set the icon:

1. Use static files
2. Use code generation

Let's start with each one.

### 1.2. Use static files

#### 1.2.1. File conventions

Put a file named `favicon`, `icon` or `apple-icon` in the `/app` directory to set the icon.

The difference between them is that the `favicon` image can only be located in the `app/` root directory (of course, this is not very rigorous, considering the existence of routing groups, it should be the top level to be precise). `icon` can be placed in a deeper directory to set the icon more finely. `apple-icon`, as the name suggests, sets the icon displayed on Apple devices. The image formats, effective directories, and `rel` attributes corresponding to these three files are as follows:

| File name                                                                                                                                                                                                                                            | Supported image formats                 | Valid directory | Corresponding ``tag`rel` attribute |
| ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------- | --------------- | ---------------------------------- |
| [favicon](https://link.juejin.cn/?target=https%3A%2F%2Fnextjs.org%2Fdocs%2Fapp%2Fapi-reference%2Ffile-conventions%2Fmetadata%2Fapp-icons%23favicon "https://nextjs.org/docs/app/api-reference/file-conventions/metadata/app-icons#favicon")          | `.ico`                                  | `app/`          | ``                                 |
| [icon](https://link.juejin.cn/?target=https%3A%2F%2Fnextjs.org%2Fdocs%2Fapp%2Fapi-reference%2Ffile-conventions%2Fmetadata%2Fapp-icons%23icon "https://nextjs.org/docs/app/api-reference/file-conventions/metadata/app-icons#icon")                   | `.ico`、`.jpg`、`.jpeg`、`.png`、`.svg` | `app/**/*`      | ``                                 |
| [apple-icon](https://link.juejin.cn/?target=https%3A%2F%2Fnextjs.org%2Fdocs%2Fapp%2Fapi-reference%2Ffile-conventions%2Fmetadata%2Fapp-icons%23apple-icon "https://nextjs.org/docs/app/api-reference/file-conventions/metadata/app-icons#apple-icon") | `.jpg`、`.jpeg`、`.png`                 | `app/**/*`      | ``                                 |

#### 1.2.2. favicon

Favicon is short for favorites icon, which is used to set icons related to websites or web pages. The earliest way to define favicon was to put a file named `favicon.ico` in the root directory of the server. When loading a web page, the browser would request the `/favicon.ico` file as the icon. Later, a more flexible method of using the `<link>` tag appeared:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-html code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">&lt;link rel=&#34;icon&#34; href=&#34;/favicon.ico&#34; /&gt;</span>
</code></pre>

Most browsers currently support these two methods, which correspond to using favicon and using icon files in Next.js.

Add an image file named `favicon.ico` under `/app`, and the corresponding HTML output is:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-html code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">&lt;link rel=&#34;icon&#34; href=&#34;/favicon.ico&#34; sizes=&#34;any&#34; /&gt;</span>
</code></pre>

Note that `sizes="any"` is used to avoid a[ bug](https://link.juejin.cn/?target=https%3A%2F%2Fevilmartians.com%2Fchronicles%2Fhow-to-favicon-in-2021-six-files-that-fit-most-needs "https://evilmartians.com/chronicles/how-to-favicon-in-2021-six-files-that-fit-most-needs") After adding the file, you can view the icon file by visiting `/favicon.ico` (corresponding to the address `http://localhost:3000/favicon.ico` when developing locally). The icon will be applied to all routes of the website by default. If you want more fine-grained control over the icon of a specific web page, use icon.

#### 1.2.3. icon

Add an `icon.(ico|jpg|jpeg|png|svg)` image file, and the corresponding HTML output is:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-html code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">&lt;link</span>
<span class="code-block-extension-codeLine" data-line-num="2">  rel=&#34;icon&#34;</span>
<span class="code-block-extension-codeLine" data-line-num="3">  href=&#34;/icon?&lt;generated&gt;&#34;</span>
<span class="code-block-extension-codeLine" data-line-num="4">  type=&#34;image/&lt;generated&gt;&#34;</span>
<span class="code-block-extension-codeLine" data-line-num="5">  sizes=&#34;&lt;generated&gt;&#34;</span>
<span class="code-block-extension-codeLine" data-line-num="6">/&gt;</span>
</code></pre>

#### 1.2.4. apple-icon

apple-icon, as the name implies, is an icon used for Apple devices. It is used when adding a web page to an iPhone or iPad screen shortcut. Add an `apple-icon.(jpg|jpeg|png)` image file, and the corresponding HTML output is:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-html code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">&lt;link</span>
<span class="code-block-extension-codeLine" data-line-num="2">  rel=&#34;apple-touch-icon&#34;</span>
<span class="code-block-extension-codeLine" data-line-num="3">  href=&#34;/apple-icon?&lt;generated&gt;&#34;</span>
<span class="code-block-extension-codeLine" data-line-num="4">  type=&#34;image/&lt;generated&gt;&#34;</span>
<span class="code-block-extension-codeLine" data-line-num="5">  sizes=&#34;&lt;generated&gt;&#34;</span>
<span class="code-block-extension-codeLine" data-line-num="6">/&gt;</span>
</code></pre>

#### 1.2.5. Behavior

You can set multiple icons by adding a numeric suffix to the file name, such as `icon1.png`, `icon2.png`, `apple-icon1.png`, `apple-icon2.png`.

Why do we need multiple icons? When we view the page source code, we often see code like this:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-html code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">&lt;link rel=&#34;icon&#34; type=&#34;image/png&#34; sizes=&#34;32x32&#34; href=&#34;/favicon-32x32.png&#34;&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="2">&lt;link rel=&#34;icon&#34; type=&#34;image/png&#34; sizes=&#34;16x16&#34; href=&#34;/favicon-16x16.png&#34;&gt;</span>
</code></pre>

Depending on the device, application, and scenario, different sizes of images will be used. For example, different browsers, different scenarios (tabs, Google search results, bookmarks, mobile icons), and different systems such as IOS and Windows may use different image sizes.

The attributes of the generated `<link>` tag, such as `rel`, `href`, `type`, and `sizes`, are generated based on the icon type and file content. For example, the attributes generated for a 32x32 size `.png` icon are `type="image/png"` and `sizes="32x32"`.

You can use these two websites to help generate icons:

1. [realfavicongenerator.net/](https://link.juejin.cn/?target=https%3A%2F%2Frealfavicongenerator.net%2F "https://realfavicongenerator.net/")
2. [www.favicon.cc/](https://link.juejin.cn/?target=https%3A%2F%2Fwww.favicon.cc%2F "https://www.favicon.cc/")

### 1.3. Generate using code

#### 1.3.1. Introduction

In addition to using image files directly, you can also generate icons using code. Still create a new file named `icon` or `apple-icon`, but this time the suffix is ​​`.js`, `.ts`, `.tsx`.

The simplest way to generate an icon is through the `ImageResponse` API of `next/og`, the usage example is as follows:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">// app/icon.js</span>
<span class="code-block-extension-codeLine" data-line-num="2">import { ImageResponse } from &#39;next/og&#39;</span>
<span class="code-block-extension-codeLine" data-line-num="3"></span>
<span class="code-block-extension-codeLine" data-line-num="4">// </span>
<span class="code-block-extension-codeLine" data-line-num="5">export const runtime = &#39;edge&#39;</span>
<span class="code-block-extension-codeLine" data-line-num="6"></span>
<span class="code-block-extension-codeLine" data-line-num="7">// img metadata</span>
<span class="code-block-extension-codeLine" data-line-num="8">export const size = {</span>
<span class="code-block-extension-codeLine" data-line-num="9">  width: 32,</span>
<span class="code-block-extension-codeLine" data-line-num="10">  height: 32,</span>
<span class="code-block-extension-codeLine" data-line-num="11">}</span>
<span class="code-block-extension-codeLine" data-line-num="12">export const contentType = &#39;image/png&#39;</span>
<span class="code-block-extension-codeLine" data-line-num="13"></span>
<span class="code-block-extension-codeLine" data-line-num="14">// Image generation</span>
<span class="code-block-extension-codeLine" data-line-num="15">export default function Icon() {</span>
<span class="code-block-extension-codeLine" data-line-num="16">  return new ImageResponse(</span>
<span class="code-block-extension-codeLine" data-line-num="17">    (</span>
<span class="code-block-extension-codeLine" data-line-num="18">      // ImageResponse JSX ele</span>
<span class="code-block-extension-codeLine" data-line-num="19">      <span class="xml">&lt;div</span></span>
<span class="code-block-extension-codeLine" data-line-num="20">        style={{</span>
<span class="code-block-extension-codeLine" data-line-num="21">          fontSize: 24,</span>
<span class="code-block-extension-codeLine" data-line-num="22">          background: &#39;black&#39;,</span>
<span class="code-block-extension-codeLine" data-line-num="23">          width: &#39;100%&#39;,</span>
<span class="code-block-extension-codeLine" data-line-num="24">          height: &#39;100%&#39;,</span>
<span class="code-block-extension-codeLine" data-line-num="25">          display: &#39;flex&#39;,</span>
<span class="code-block-extension-codeLine" data-line-num="26">          alignItems: &#39;center&#39;,</span>
<span class="code-block-extension-codeLine" data-line-num="27">          justifyContent: &#39;center&#39;,</span>
<span class="code-block-extension-codeLine" data-line-num="28">          color: &#39;white&#39;,</span>
<span class="code-block-extension-codeLine" data-line-num="29">        }}</span>
<span class="code-block-extension-codeLine" data-line-num="30">      &gt;</span>
<span class="code-block-extension-codeLine" data-line-num="31">        A</span>
<span class="code-block-extension-codeLine" data-line-num="32">      &lt;/div&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="33">    ),</span>
<span class="code-block-extension-codeLine" data-line-num="34">    // ImageResponse options</span>
<span class="code-block-extension-codeLine" data-line-num="35">    {</span>
<span class="code-block-extension-codeLine" data-line-num="36">      // Convenient reuse size</span>
<span class="code-block-extension-codeLine" data-line-num="37">      ...size,</span>
<span class="code-block-extension-codeLine" data-line-num="38">    }</span>
<span class="code-block-extension-codeLine" data-line-num="39">  )</span>
<span class="code-block-extension-codeLine" data-line-num="40">}</span>
</code></pre>

The corresponding output HTML is:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-html code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">&lt;link rel=&#34;icon&#34; href=&#34;/icon?&lt;generated&gt;&#34; type=&#34;image/png&#34; sizes=&#34;32x32&#34; /&gt;</span>
</code></pre>

The effect is:

![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3935cd7bad5744f6a7202ee3effec055~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=500&h=86&s=8014&e=png&b=3a3a3a)

When you first look at this example, you may have many questions, such as what is `ImageResponse`? How to use it? Why is the writing so strange? What are the configuration items, etc. Don't worry, we will explain them one by one.

First, a few notes:

1. Starting from v14.0.0, `ImageResponse` has been moved from `next/server` to `next/og`. If there is an import error, upgrade the version or use `next/server`
2. By default, the generated icons are statically optimized, which means that they will be generated and cached at build time unless dynamic functions (such as cookies(), headers()) are used or data is not cached.
3. You cannot generate `favicon` icons. Use icon or favicon.ico static files instead.
4. You can use the `generateImageMetadata` API to generate multiple icons in one file. (Oh my god, there is another API to introduce)

Next, we will introduce the APIs involved in detail.

#### 1.3.2. Default export function

The default export function receives an optional parameter `params`, which is an object containing dynamic routing parameters, the same as the `params` parameter in `generateMetadata` introduced in the previous article:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div><span class="code-block-extension-lang">jsx</span></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-jsx code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">// app/shop/[slug]/icon.js</span>
<span class="code-block-extension-codeLine" data-line-num="2">export default function Image({ params }) {</span>
<span class="code-block-extension-codeLine" data-line-num="3">  // ...</span>
<span class="code-block-extension-codeLine" data-line-num="4">}</span>
</code></pre>

| **Route**                       | **URL**     | **params**                |
| ------------------------------- | ----------- | ------------------------- |
| `app/shop/icon.js`              | `/shop`     | `{}`                      |
| `app/shop/[slug]/icon.js`       | `/shop/1`   | `{ slug: '1' }`           |
| `app/shop/[tag]/[item]/icon.js` | `/shop/1/2` | `{ tag: '1', item: '2' }` |
| `app/shop/[...slug]/icon.js`    | `/shop/1/2` | `{ slug: ['1', '2'] }`    |

The function should return a[Blob](https://link.juejin.cn/?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FAPI%2FBlob "https://developer.mozilla.org/zh-CN/docs/Web/API/Blob") | [ArrayBuffer](https://link.juejin.cn/?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FJavaScript%2FReference%2FGlobal_Objects%2FArrayBuffer "https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer") | [TypedArray](https://link.juejin.cn/?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FJavaScript%2FReference%2FGlobal_Objects%2FTypedArray "https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/TypedArray") | [DataView](https://link.juejin.cn/?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FJavaScript%2FReference%2FGlobal_Objects%2FDataView "https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/DataView") | [ReadableStream](https://link.juejin.cn/?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FAPI%2FReadableStream "https://developer.mozilla.org/zh-CN/docs/Web/API/ReadableStream") | [Response](https://link.juejin.cn/?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FAPI%2FResponse "https://developer.mozilla.org/zh-CN/docs/Web/API/Response") The value of type.

#### 1.3.3. Image metadata configuration

In addition to exporting the image file itself, you can also selectively export the `size` and `contentType` variables to set the image metadata:

| **Option**                                                                                                                                                                                                                                                          | **Type**                                                                                                                                                                                                                                                                     |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| [size](https://link.juejin.cn/?target=https%3A%2F%2Fnextjs.org%2Fdocs%2Fapp%2Fapi-reference%2Ffile-conventions%2Fmetadata%2Fopengraph-image%23size "https://nextjs.org/docs/app/api-reference/file-conventions/metadata/opengraph-image#size")                      | { width: number; height: number }                                                                                                                                                                                                                                            |
| [contentType](https://link.juejin.cn/?target=https%3A%2F%2Fnextjs.org%2Fdocs%2Fapp%2Fapi-reference%2Ffile-conventions%2Fmetadata%2Fopengraph-image%23contenttype "https://nextjs.org/docs/app/api-reference/file-conventions/metadata/opengraph-image#contenttype") | string (For specific values, see [image MIME type](https://link.juejin.cn/?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fdocs%2FWeb%2FHTTP%2FBasics_of_HTTP%2FMIME_types%23image_types "https://developer.mozilla.org/docs/Web/HTTP/Basics_of_HTTP/MIME_types#image_types")） |

Set size:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">// icon.js | apple-icon.js</span>
<span class="code-block-extension-codeLine" data-line-num="2">export const size = { width: 32, height: 32 }</span>
<span class="code-block-extension-codeLine" data-line-num="3"></span>
<span class="code-block-extension-codeLine" data-line-num="4">export default function Icon() {}</span>
</code></pre>

The corresponding HTML output is:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-html code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">&lt;link rel=&#34;icon&#34; sizes=&#34;32x32&#34; /&gt;</span>
</code></pre>

Set `contentType`:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">// icon.js | apple-icon.js</span>
<span class="code-block-extension-codeLine" data-line-num="2">export const contentType = &#39;image/png&#39;</span>
<span class="code-block-extension-codeLine" data-line-num="3"></span>
<span class="code-block-extension-codeLine" data-line-num="4">export default function Icon() {}</span>
</code></pre>

The corresponding HTML output is:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-html code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">&lt;link rel=&#34;icon&#34; type=&#34;image/png&#34; /&gt;</span>
</code></pre>

#### 1.3.4. Route segment configuration

`icon` and `apple-icon` are actually special route handlers, so they can also use route segment configuration like other pages and layouts:

| **Option**                                                                                                                                                                                                                                                            | **Type**  | default value   |
| --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------- | --------------- | ---------- | --------------- | --------- | -------- |
| [dynamic](https://link.juejin.cn/?target=https%3A%2F%2Fnextjs.org%2Fdocs%2Fapp%2Fapi-reference%2Ffile-conventions%2Froute-segment-config%23dynamic "https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#dynamic")                         | `'auto'   | 'force-dynamic' | 'error'    | 'force-static'` | `'auto'`  |
| [revalidate](https://link.juejin.cn/?target=https%3A%2F%2Fnextjs.org%2Fdocs%2Fapp%2Fapi-reference%2Ffile-conventions%2Froute-segment-config%23revalidate "https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#revalidate")                | `false    | 'force-cache'   | 0          | number`         | `false`   |
| [runtime](https://link.juejin.cn/?target=https%3A%2F%2Fnextjs.org%2Fdocs%2Fapp%2Fapi-reference%2Ffile-conventions%2Froute-segment-config%23runtime "https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#runtime")                         | `'nodejs' | 'edge'`         | `'nodejs'` |
| [preferredRegion](https://link.juejin.cn/?target=https%3A%2F%2Fnextjs.org%2Fdocs%2Fapp%2Fapi-reference%2Ffile-conventions%2Froute-segment-config%23preferredregion "https://nextjs.org/docs/app/api-reference/file-conventions/route-segment-config#preferredregion") | `'auto'   | 'global'        | 'home'     | string          | string[]` | `'auto'` |

The following are some usage examples:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">// app/icon.js</span>
<span class="code-block-extension-codeLine" data-line-num="2">export const runtime = &#39;edge&#39;</span>
<span class="code-block-extension-codeLine" data-line-num="3"></span>
<span class="code-block-extension-codeLine" data-line-num="4">export default function Icon() {}</span>
</code></pre>

### 1.4. ImageResponse

Regarding the `ImageResponse` constructor, it helps you generate dynamic images using JSX and CSS, which is very useful for generating social media images (Open Graph images, Twitter cards, etc.) because these images often rely on dynamic content.

The Type of `ImageResponse` is:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-typescript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">import { ImageResponse } from &#39;next/og&#39;</span>
<span class="code-block-extension-codeLine" data-line-num="2"></span>
<span class="code-block-extension-codeLine" data-line-num="3">new ImageResponse(</span>
<span class="code-block-extension-codeLine" data-line-num="4">  element: ReactElement,</span>
<span class="code-block-extension-codeLine" data-line-num="5">  options: {</span>
<span class="code-block-extension-codeLine" data-line-num="6">    width?: number = 1200</span>
<span class="code-block-extension-codeLine" data-line-num="7">    height?: number = 630</span>
<span class="code-block-extension-codeLine" data-line-num="8">    emoji?: &#39;twemoji&#39; | &#39;blobmoji&#39; | &#39;noto&#39; | &#39;openmoji&#39; = &#39;twemoji&#39;,</span>
<span class="code-block-extension-codeLine" data-line-num="9">    fonts?: {</span>
<span class="code-block-extension-codeLine" data-line-num="10">      name: string,</span>
<span class="code-block-extension-codeLine" data-line-num="11">      data: ArrayBuffer,</span>
<span class="code-block-extension-codeLine" data-line-num="12">      weight: number,</span>
<span class="code-block-extension-codeLine" data-line-num="13">      style: &#39;normal&#39; | &#39;italic&#39;</span>
<span class="code-block-extension-codeLine" data-line-num="14">    }[]</span>
<span class="code-block-extension-codeLine" data-line-num="15">    debug?: boolean = false</span>
<span class="code-block-extension-codeLine" data-line-num="16"></span>
<span class="code-block-extension-codeLine" data-line-num="17">    // Options that will be passed to the HTTP response</span>
<span class="code-block-extension-codeLine" data-line-num="18">    status?: number = 200</span>
<span class="code-block-extension-codeLine" data-line-num="19">    statusText?: string</span>
<span class="code-block-extension-codeLine" data-line-num="20">    headers?: Record&lt;string, string&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="21">  },</span>
<span class="code-block-extension-codeLine" data-line-num="22">)</span>
</code></pre>

In terms of specific implementation, Vercel’s own products are used. [satori](https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fvercel%2Fsatori "https://github.com/vercel/satori")，This is a library that supports JSX and converts HTML and CSS to SVG. For details on how to write ImageResponse and which HTML and CSS are supported, refer to [satori ](https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fvercel%2Fsatori%23html-elements "https://github.com/vercel/satori#html-elements")。

There is also a `generateImageMetadata` API, which can generate multiple images with the default export function, which will be discussed after the end of the next section.

## 2. opengraph-image 和 twitter-image

### 2.1. introduce

Simply put, according to the Open Graph Protocol, the page information is described, and social networking sites (such as Facebook) will present it to users according to the content of the og tag on the page. twitter-image has a similar function, but it is used for twitter.

There are two ways to use it, one is a static image file, and the other is generated using code.

### 2.2. Static files

Just like adding icon files, you can directly add the corresponding images in the routing folder, but the agreed file names and supported formats are different:

| File name                                                                                                                                                                                                                                                                                       | Supported image formats           |
| ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------- |
| [opengraph-image](https://link.juejin.cn/?target=https%3A%2F%2Fnextjs.org%2Fdocs%2Fapp%2Fapi-reference%2Ffile-conventions%2Fmetadata%2Fopengraph-image%23opengraph-image "https://nextjs.org/docs/app/api-reference/file-conventions/metadata/opengraph-image#opengraph-image")                 | `.jpg`、`.jpeg`、 `.png`、 `.gif` |
| [twitter-image](https://link.juejin.cn/?target=https%3A%2F%2Fnextjs.org%2Fdocs%2Fapp%2Fapi-reference%2Ffile-conventions%2Fmetadata%2Fopengraph-image%23twitter-image "https://nextjs.org/docs/app/api-reference/file-conventions/metadata/opengraph-image#twitter-image")                       | `.jpg`、`.jpeg`、`.png`、`.gif`   |
| [opengraph-image.alt](https://link.juejin.cn/?target=https%3A%2F%2Fnextjs.org%2Fdocs%2Fapp%2Fapi-reference%2Ffile-conventions%2Fmetadata%2Fopengraph-image%23opengraph-imagealttxt "https://nextjs.org/docs/app/api-reference/file-conventions/metadata/opengraph-image#opengraph-imagealttxt") | `.txt`                            |
| [twitter-image.alt](https://link.juejin.cn/?target=https%3A%2F%2Fnextjs.org%2Fdocs%2Fapp%2Fapi-reference%2Ffile-conventions%2Fmetadata%2Fopengraph-image%23twitter-imagealttxt "https://nextjs.org/docs/app/api-reference/file-conventions/metadata/opengraph-image#twitter-imagealttxt")       | `.txt`                            |

#### 2.2.1. opengraph-image

Add an `opengraph-image.(jpg|jpeg|png|gif)` image file, and the corresponding HTML output is:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-html code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">&lt;meta property=&#34;og:image&#34; content=&#34;&lt;generated&gt;&#34; /&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="2">&lt;meta property=&#34;og:image:type&#34; content=&#34;&lt;generated&gt;&#34; /&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="3">&lt;meta property=&#34;og:image:width&#34; content=&#34;&lt;generated&gt;&#34; /&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="4">&lt;meta property=&#34;og:image:height&#34; content=&#34;&lt;generated&gt;&#34; /&gt;</span>
</code></pre>

#### 2.2.2 twitter-image

Add a `twitter-image.(jpg|jpeg|png|gif)` image file, and the corresponding HTML output is:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-html code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">&lt;meta name=&#34;twitter:image&#34; content=&#34;&lt;generated&gt;&#34; /&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="2">&lt;meta name=&#34;twitter:image:type&#34; content=&#34;&lt;generated&gt;&#34; /&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="3">&lt;meta name=&#34;twitter:image:width&#34; content=&#34;&lt;generated&gt;&#34; /&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="4">&lt;meta name=&#34;twitter:image:height&#34; content=&#34;&lt;generated&gt;&#34; /&gt;</span>
</code></pre>

#### 2.2.3. opengraph-image.alt.txt

When using the `opengraph-image.(jpg|jpeg|png|gif)` image, add an `opengraph-image.alt.txt` as the alt text of the image:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-html code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">About Acme</span>
</code></pre>

The corresponding output HTML is:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-html code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">&lt;meta property=&#34;og:image:alt&#34; content=&#34;About Acme&#34; /&gt;</span>
</code></pre>

#### 2.2.4. twitter-image.alt.txt

When using a `twitter-image.(jpg|jpeg|png|gif)` image, add a `twitter-image.alt.txt` as the alt text of the image:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-html code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">About Acme</span>
</code></pre>

The corresponding output HTML is:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-html code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">&lt;meta property=&#34;twitter:image:alt&#34; content=&#34;About Acme&#34; /&gt;</span>
</code></pre>

### 2.3. Code generation

#### 2.3.1 Introduction

You probably already know what to do:

| File name       | Supported file formats |
| --------------- | ---------------------- |
| opengraph-image | `.js`, `.ts`, `.tsx`   |
| twitter-image   | `.js`, `.ts`, `.tsx`   |

The code is similar to the icon image generation in the previous section. The default export function and route segment configuration are the same, and the image metadata configuration is slightly different. The sample code is as follows:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">// app/about/opengraph-image.js</span>
<span class="code-block-extension-codeLine" data-line-num="2">import { ImageResponse } from &#39;next/og&#39;</span>
<span class="code-block-extension-codeLine" data-line-num="3"></span>
<span class="code-block-extension-codeLine" data-line-num="4">export const runtime = &#39;edge&#39;</span>
<span class="code-block-extension-codeLine" data-line-num="5"></span>
<span class="code-block-extension-codeLine" data-line-num="6">export const alt = &#39;About Acme&#39;</span>
<span class="code-block-extension-codeLine" data-line-num="7">export const size = {</span>
<span class="code-block-extension-codeLine" data-line-num="8">  width: 1200,</span>
<span class="code-block-extension-codeLine" data-line-num="9">  height: 630,</span>
<span class="code-block-extension-codeLine" data-line-num="10">}</span>
<span class="code-block-extension-codeLine" data-line-num="11"></span>
<span class="code-block-extension-codeLine" data-line-num="12">export const contentType = &#39;image/png&#39;</span>
<span class="code-block-extension-codeLine" data-line-num="13"></span>
<span class="code-block-extension-codeLine" data-line-num="14">export default async function Image() {</span>
<span class="code-block-extension-codeLine" data-line-num="15">  // Font</span>
<span class="code-block-extension-codeLine" data-line-num="16">  const interSemiBold = fetch(</span>
<span class="code-block-extension-codeLine" data-line-num="17">    new URL(&#39;./Inter-SemiBold.ttf&#39;, import.meta.url)</span>
<span class="code-block-extension-codeLine" data-line-num="18">  ).then((res) =&gt; res.arrayBuffer())</span>
<span class="code-block-extension-codeLine" data-line-num="19"></span>
<span class="code-block-extension-codeLine" data-line-num="20">  return new ImageResponse(</span>
<span class="code-block-extension-codeLine" data-line-num="21">    (</span>
<span class="code-block-extension-codeLine" data-line-num="22">      <span class="xml">&lt;div</span></span>
<span class="code-block-extension-codeLine" data-line-num="23">        style={{</span>
<span class="code-block-extension-codeLine" data-line-num="24">          fontSize: 128,</span>
<span class="code-block-extension-codeLine" data-line-num="25">          background: &#39;white&#39;,</span>
<span class="code-block-extension-codeLine" data-line-num="26">          width: &#39;100%&#39;,</span>
<span class="code-block-extension-codeLine" data-line-num="27">          height: &#39;100%&#39;,</span>
<span class="code-block-extension-codeLine" data-line-num="28">          display: &#39;flex&#39;,</span>
<span class="code-block-extension-codeLine" data-line-num="29">          alignItems: &#39;center&#39;,</span>
<span class="code-block-extension-codeLine" data-line-num="30">          justifyContent: &#39;center&#39;,</span>
<span class="code-block-extension-codeLine" data-line-num="31">        }}</span>
<span class="code-block-extension-codeLine" data-line-num="32">      &gt;</span>
<span class="code-block-extension-codeLine" data-line-num="33">        About Acme</span>
<span class="code-block-extension-codeLine" data-line-num="34">      &lt;/div&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="35">    ),</span>
<span class="code-block-extension-codeLine" data-line-num="36">    {</span>
<span class="code-block-extension-codeLine" data-line-num="37">      ...size,</span>
<span class="code-block-extension-codeLine" data-line-num="38">      fonts: [</span>
<span class="code-block-extension-codeLine" data-line-num="39">        {</span>
<span class="code-block-extension-codeLine" data-line-num="40">          name: &#39;Inter&#39;,</span>
<span class="code-block-extension-codeLine" data-line-num="41">          data: await interSemiBold,</span>
<span class="code-block-extension-codeLine" data-line-num="42">          style: &#39;normal&#39;,</span>
<span class="code-block-extension-codeLine" data-line-num="43">          weight: 400,</span>
<span class="code-block-extension-codeLine" data-line-num="44">        },</span>
<span class="code-block-extension-codeLine" data-line-num="45">      ],</span>
<span class="code-block-extension-codeLine" data-line-num="46">    }</span>
<span class="code-block-extension-codeLine" data-line-num="47">  )</span>
<span class="code-block-extension-codeLine" data-line-num="48">}</span>
</code></pre>

This example also demonstrates how to use font files to generate images. The corresponding output HTML is:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-html code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">&lt;meta property=&#34;og:image&#34; content=&#34;&lt;generated&gt;&#34; /&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="2">&lt;meta property=&#34;og:image:alt&#34; content=&#34;About Acme&#34; /&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="3">&lt;meta property=&#34;og:image:type&#34; content=&#34;image/png&#34; /&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="4">&lt;meta property=&#34;og:image:width&#34; content=&#34;1200&#34; /&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="5">&lt;meta property=&#34;og:image:height&#34; content=&#34;630&#34; /&gt;</span>
</code></pre>

#### 2.3.2. Image metadata configuration

In addition to exporting the image file itself, you can also selectively export `alt`, `size`, and `contentType` variables to set the image's metadata:

| **Option**                                                                                                                                                                                                                                                          | **Type**                                                                                                                                                                                                                                             |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| [alt](https://link.juejin.cn/?target=https%3A%2F%2Fnextjs.org%2Fdocs%2Fapp%2Fapi-reference%2Ffile-conventions%2Fmetadata%2Fopengraph-image%23alt "https://nextjs.org/docs/app/api-reference/file-conventions/metadata/opengraph-image#alt")                         | string                                                                                                                                                                                                                                               |
| [size](https://link.juejin.cn/?target=https%3A%2F%2Fnextjs.org%2Fdocs%2Fapp%2Fapi-reference%2Ffile-conventions%2Fmetadata%2Fopengraph-image%23size "https://nextjs.org/docs/app/api-reference/file-conventions/metadata/opengraph-image#size")                      | { width: number; height: number }                                                                                                                                                                                                                    |
| [contentType](https://link.juejin.cn/?target=https%3A%2F%2Fnextjs.org%2Fdocs%2Fapp%2Fapi-reference%2Ffile-conventions%2Fmetadata%2Fopengraph-image%23contenttype "https://nextjs.org/docs/app/api-reference/file-conventions/metadata/opengraph-image#contenttype") | string ( [image MIME type](https://link.juejin.cn/?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fdocs%2FWeb%2FHTTP%2FBasics_of_HTTP%2FMIME_types%23image_types "https://developer.mozilla.org/docs/Web/HTTP/Basics_of_HTTP/MIME_types#image_types")） |

Compared to the icon, there is an additional `alt` variable. To set `alt`:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">// opengraph-image.js | twitter-image.js</span>
<span class="code-block-extension-codeLine" data-line-num="2">export const alt = &#39;My images alt text&#39;</span>
<span class="code-block-extension-codeLine" data-line-num="3"></span>
<span class="code-block-extension-codeLine" data-line-num="4">export default function Image() {}</span>
</code></pre>

The corresponding HTML output is:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-html code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">&lt;meta property=&#34;og:image:alt&#34; content=&#34;My images alt text&#34; /&gt;</span>
</code></pre>

set `size`：

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">// opengraph-image.js | twitter-image.js</span>
<span class="code-block-extension-codeLine" data-line-num="2">export const size = { width: 1200, height: 630 }</span>
<span class="code-block-extension-codeLine" data-line-num="3"></span>
<span class="code-block-extension-codeLine" data-line-num="4">export default function Image() {}</span>
</code></pre>

The corresponding HTML output is:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-html code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">&lt;meta property=&#34;og:image:width&#34; content=&#34;1200&#34; /&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="2">&lt;meta property=&#34;og:image:height&#34; content=&#34;630&#34; /&gt;</span>
</code></pre>

set `contentType`：

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">export const contentType = &#39;image/png&#39;</span>
<span class="code-block-extension-codeLine" data-line-num="2"></span>
<span class="code-block-extension-codeLine" data-line-num="3">export default function Image() {}</span>
</code></pre>

The corresponding HTML output is:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-html code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">&lt;meta property=&#34;og:image:type&#34; content=&#34;image/png&#34; /&gt;</span>
</code></pre>

#### 2.3.3. Using external data

External data is often not needed for icon generation, but opengraph-image and twitter-image may need it. For example, when we visit `/posts/1`, we can get the information of the article and then generate an image using the title of the article:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">// app/posts/[slug]/opengraph-image.js</span>
<span class="code-block-extension-codeLine" data-line-num="2">import { ImageResponse } from &#39;next/og&#39;</span>
<span class="code-block-extension-codeLine" data-line-num="3"></span>
<span class="code-block-extension-codeLine" data-line-num="4">export const runtime = &#39;edge&#39;</span>
<span class="code-block-extension-codeLine" data-line-num="5"></span>
<span class="code-block-extension-codeLine" data-line-num="6">export const alt = &#39;About Acme&#39;</span>
<span class="code-block-extension-codeLine" data-line-num="7">export const size = {</span>
<span class="code-block-extension-codeLine" data-line-num="8">  width: 1200,</span>
<span class="code-block-extension-codeLine" data-line-num="9">  height: 630,</span>
<span class="code-block-extension-codeLine" data-line-num="10">}</span>
<span class="code-block-extension-codeLine" data-line-num="11">export const contentType = &#39;image/png&#39;</span>
<span class="code-block-extension-codeLine" data-line-num="12"></span>
<span class="code-block-extension-codeLine" data-line-num="13">export default async function Image({ params }) {</span>
<span class="code-block-extension-codeLine" data-line-num="14">  const post = await fetch(`https://.../posts/${params.slug}`).then((res) =&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="15">    res.json()</span>
<span class="code-block-extension-codeLine" data-line-num="16">  )</span>
<span class="code-block-extension-codeLine" data-line-num="17"></span>
<span class="code-block-extension-codeLine" data-line-num="18">  return new ImageResponse(</span>
<span class="code-block-extension-codeLine" data-line-num="19">    (</span>
<span class="code-block-extension-codeLine" data-line-num="20">      <span class="xml">&lt;div</span></span>
<span class="code-block-extension-codeLine" data-line-num="21">        style={{</span>
<span class="code-block-extension-codeLine" data-line-num="22">          fontSize: 48,</span>
<span class="code-block-extension-codeLine" data-line-num="23">          background: &#39;white&#39;,</span>
<span class="code-block-extension-codeLine" data-line-num="24">          width: &#39;100%&#39;,</span>
<span class="code-block-extension-codeLine" data-line-num="25">          height: &#39;100%&#39;,</span>
<span class="code-block-extension-codeLine" data-line-num="26">          display: &#39;flex&#39;,</span>
<span class="code-block-extension-codeLine" data-line-num="27">          alignItems: &#39;center&#39;,</span>
<span class="code-block-extension-codeLine" data-line-num="28">          justifyContent: &#39;center&#39;,</span>
<span class="code-block-extension-codeLine" data-line-num="29">        }}</span>
<span class="code-block-extension-codeLine" data-line-num="30">      &gt;</span>
<span class="code-block-extension-codeLine" data-line-num="31">        {post.title}</span>
<span class="code-block-extension-codeLine" data-line-num="32">      &lt;/div&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="33">    ),</span>
<span class="code-block-extension-codeLine" data-line-num="34">    {</span>
<span class="code-block-extension-codeLine" data-line-num="35">      ...size,</span>
<span class="code-block-extension-codeLine" data-line-num="36">    }</span>
<span class="code-block-extension-codeLine" data-line-num="37">  )</span>
<span class="code-block-extension-codeLine" data-line-num="38">}</span>
</code></pre>

## 3. generateImageMetadata Generate multiple images

Use `generateImageMetadata` to generate different versions of an image or return multiple images. The syntax is as follows:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">// icon.js</span>
<span class="code-block-extension-codeLine" data-line-num="2">export function generateImageMetadata({ params }) {</span>
<span class="code-block-extension-codeLine" data-line-num="3">  // ...</span>
<span class="code-block-extension-codeLine" data-line-num="4">}</span>
</code></pre>

`params` is used in the same way as `params` in the "Default Export Function" section of this article. It is used to obtain dynamic route parameters, so I won't go into details.

The `generateImageMetadata` function should return an array of objects containing image metadata. Each object must contain an `id` value:

| **Image Metadata Object** | **Type**                            |
| ------------------------- | ----------------------------------- |
| `id`                      | `string`                            |
| `alt`                     | `string`                            |
| `size`                    | `{ width: number; height: number }` |
| `contentType`             | `string`                            |

The following are some usage examples:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">// icon.js</span>
<span class="code-block-extension-codeLine" data-line-num="2">import { ImageResponse } from &#39;next/og&#39;</span>
<span class="code-block-extension-codeLine" data-line-num="3"></span>
<span class="code-block-extension-codeLine" data-line-num="4">export function generateImageMetadata() {</span>
<span class="code-block-extension-codeLine" data-line-num="5">  return [</span>
<span class="code-block-extension-codeLine" data-line-num="6">    {</span>
<span class="code-block-extension-codeLine" data-line-num="7">      contentType: &#39;image/png&#39;,</span>
<span class="code-block-extension-codeLine" data-line-num="8">      size: { width: 48, height: 48 },</span>
<span class="code-block-extension-codeLine" data-line-num="9">      id: &#39;small&#39;,</span>
<span class="code-block-extension-codeLine" data-line-num="10">    },</span>
<span class="code-block-extension-codeLine" data-line-num="11">    {</span>
<span class="code-block-extension-codeLine" data-line-num="12">      contentType: &#39;image/png&#39;,</span>
<span class="code-block-extension-codeLine" data-line-num="13">      size: { width: 72, height: 72 },</span>
<span class="code-block-extension-codeLine" data-line-num="14">      id: &#39;medium&#39;,</span>
<span class="code-block-extension-codeLine" data-line-num="15">    },</span>
<span class="code-block-extension-codeLine" data-line-num="16">  ]</span>
<span class="code-block-extension-codeLine" data-line-num="17">}</span>
<span class="code-block-extension-codeLine" data-line-num="18"></span>
<span class="code-block-extension-codeLine" data-line-num="19">export default function Icon({ id }) {</span>
<span class="code-block-extension-codeLine" data-line-num="20">  return new ImageResponse(</span>
<span class="code-block-extension-codeLine" data-line-num="21">    (</span>
<span class="code-block-extension-codeLine" data-line-num="22">      <span class="xml">&lt;div</span></span>
<span class="code-block-extension-codeLine" data-line-num="23">        style={{</span>
<span class="code-block-extension-codeLine" data-line-num="24">          width: &#39;100%&#39;,</span>
<span class="code-block-extension-codeLine" data-line-num="25">          height: &#39;100%&#39;,</span>
<span class="code-block-extension-codeLine" data-line-num="26">          display: &#39;flex&#39;,</span>
<span class="code-block-extension-codeLine" data-line-num="27">          alignItems: &#39;center&#39;,</span>
<span class="code-block-extension-codeLine" data-line-num="28">          justifyContent: &#39;center&#39;,</span>
<span class="code-block-extension-codeLine" data-line-num="29">          fontSize: 88,</span>
<span class="code-block-extension-codeLine" data-line-num="30">          background: &#39;#000&#39;,</span>
<span class="code-block-extension-codeLine" data-line-num="31">          color: &#39;#fafafa&#39;,</span>
<span class="code-block-extension-codeLine" data-line-num="32">        }}</span>
<span class="code-block-extension-codeLine" data-line-num="33">      &gt;</span>
<span class="code-block-extension-codeLine" data-line-num="34">        Icon {id}</span>
<span class="code-block-extension-codeLine" data-line-num="35">      &lt;/div&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="36">    )</span>
<span class="code-block-extension-codeLine" data-line-num="37">  )</span>
<span class="code-block-extension-codeLine" data-line-num="38">}</span>
</code></pre>

In this example, we generate icon images of different sizes. When using `generateImageMetadata`, the props of the default export function will have an additional id parameter, and different icon content can be generated based on the id. `generateImageMetadata` defines the number of generated images and metadata in array form, then traverses the array, passes the id parameter to the default export function, and generates multiple images.

Let's take another example that is close to actual development. Suppose a product has multiple description images. Get the product description image data based on the URL parameter and generate multiple Open Graph images:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">// app/products/[id]/opengraph-image.js</span>
<span class="code-block-extension-codeLine" data-line-num="2">import { ImageResponse } from &#39;next/og&#39;</span>
<span class="code-block-extension-codeLine" data-line-num="3">import { getCaptionForImage, getOGImages } from &#39;@/app/utils/images&#39;</span>
<span class="code-block-extension-codeLine" data-line-num="4"></span>
<span class="code-block-extension-codeLine" data-line-num="5">export async function generateImageMetadata({ params }) {</span>
<span class="code-block-extension-codeLine" data-line-num="6">  const images = await getOGImages(params.id)</span>
<span class="code-block-extension-codeLine" data-line-num="7"></span>
<span class="code-block-extension-codeLine" data-line-num="8">  return images.map((image, idx) =&gt; ({</span>
<span class="code-block-extension-codeLine" data-line-num="9">    id: idx,</span>
<span class="code-block-extension-codeLine" data-line-num="10">    size: { width: 1200, height: 600 },</span>
<span class="code-block-extension-codeLine" data-line-num="11">    alt: image.text,</span>
<span class="code-block-extension-codeLine" data-line-num="12">    contentType: &#39;image/png&#39;,</span>
<span class="code-block-extension-codeLine" data-line-num="13">  }))</span>
<span class="code-block-extension-codeLine" data-line-num="14">}</span>
<span class="code-block-extension-codeLine" data-line-num="15"></span>
<span class="code-block-extension-codeLine" data-line-num="16">export default async function Image({ params, id }) {</span>
<span class="code-block-extension-codeLine" data-line-num="17">  const productId = params.id</span>
<span class="code-block-extension-codeLine" data-line-num="18">  const imageId = id</span>
<span class="code-block-extension-codeLine" data-line-num="19">  // </span>
<span class="code-block-extension-codeLine" data-line-num="20">  const text = await getCaptionForImage(productId, imageId)</span>
<span class="code-block-extension-codeLine" data-line-num="21"></span>
<span class="code-block-extension-codeLine" data-line-num="22">  return new ImageResponse(</span>
<span class="code-block-extension-codeLine" data-line-num="23">    (</span>
<span class="code-block-extension-codeLine" data-line-num="24">      <span class="xml">&lt;div</span></span>
<span class="code-block-extension-codeLine" data-line-num="25">        style={</span>
<span class="code-block-extension-codeLine" data-line-num="26">          {</span>
<span class="code-block-extension-codeLine" data-line-num="27">            // ...</span>
<span class="code-block-extension-codeLine" data-line-num="28">          }</span>
<span class="code-block-extension-codeLine" data-line-num="29">        }</span>
<span class="code-block-extension-codeLine" data-line-num="30">      &gt;</span>
<span class="code-block-extension-codeLine" data-line-num="31">        {text}</span>
<span class="code-block-extension-codeLine" data-line-num="32">      &lt;/div&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="33">    )</span>
<span class="code-block-extension-codeLine" data-line-num="34">  )</span>
<span class="code-block-extension-codeLine" data-line-num="35">}</span>
</code></pre>

## 4. robots.txt

### 4.1. Introduction

robots.txt is used to tell search engines which URLs in a website can be crawled. There are two ways to use robots.txt, one is to use a static file, and the other is to generate it using code.

### 4.2. Static files

Just add a `robots.txt` to the `app/` directory:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">User-Agent: *</span>
<span class="code-block-extension-codeLine" data-line-num="2">Allow: /</span>
<span class="code-block-extension-codeLine" data-line-num="3">Disallow: /private/</span>
<span class="code-block-extension-codeLine" data-line-num="4">Sitemap: https://acme.com/sitemap.xml</span>
</code></pre>

### 4.3. Code Generation

Add a `robots.js` or `robots.ts` file that exports a Robots object. The usage example is as follows:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">// app/robots.js</span>
<span class="code-block-extension-codeLine" data-line-num="2">export default function robots() {</span>
<span class="code-block-extension-codeLine" data-line-num="3">  return {</span>
<span class="code-block-extension-codeLine" data-line-num="4">    rules: {</span>
<span class="code-block-extension-codeLine" data-line-num="5">      userAgent: &#39;*&#39;,</span>
<span class="code-block-extension-codeLine" data-line-num="6">      allow: &#39;/&#39;,</span>
<span class="code-block-extension-codeLine" data-line-num="7">      disallow: &#39;/private/&#39;,</span>
<span class="code-block-extension-codeLine" data-line-num="8">    },</span>
<span class="code-block-extension-codeLine" data-line-num="9">    sitemap: &#39;https://acme.com/sitemap.xml&#39;,</span>
<span class="code-block-extension-codeLine" data-line-num="10">  }</span>
<span class="code-block-extension-codeLine" data-line-num="11">}</span>
</code></pre>

The output is:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">User-Agent: *</span>
<span class="code-block-extension-codeLine" data-line-num="2">Allow: /</span>
<span class="code-block-extension-codeLine" data-line-num="3">Disallow: /private/</span>
<span class="code-block-extension-codeLine" data-line-num="4">Sitemap: https://acme.com/sitemap.xml</span>
</code></pre>

If using TypeScript, the type of the Robots object is:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-typescript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">type Robots = {</span>
<span class="code-block-extension-codeLine" data-line-num="2">  rules:</span>
<span class="code-block-extension-codeLine" data-line-num="3">    | {</span>
<span class="code-block-extension-codeLine" data-line-num="4">        userAgent?: string | string[]</span>
<span class="code-block-extension-codeLine" data-line-num="5">        allow?: string | string[]</span>
<span class="code-block-extension-codeLine" data-line-num="6">        disallow?: string | string[]</span>
<span class="code-block-extension-codeLine" data-line-num="7">        crawlDelay?: number</span>
<span class="code-block-extension-codeLine" data-line-num="8">      }</span>
<span class="code-block-extension-codeLine" data-line-num="9">    | Array&lt;{</span>
<span class="code-block-extension-codeLine" data-line-num="10">        userAgent: string | string[]</span>
<span class="code-block-extension-codeLine" data-line-num="11">        allow?: string | string[]</span>
<span class="code-block-extension-codeLine" data-line-num="12">        disallow?: string | string[]</span>
<span class="code-block-extension-codeLine" data-line-num="13">        crawlDelay?: number</span>
<span class="code-block-extension-codeLine" data-line-num="14">      }&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="15">  sitemap?: string | string[]</span>
<span class="code-block-extension-codeLine" data-line-num="16">  host?: string</span>
<span class="code-block-extension-codeLine" data-line-num="17">}</span>
</code></pre>

## 5. sitemap.xml

### 5.1. Introduction

`sitemap.xml`, as the name implies, is a sitemap, which is used to help search engines crawl websites more efficiently. There are still two ways to use it, one is to use static files, and the other is to use code generation.

### 5.2. Static files

`app/sitemap.xml`：

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-xml code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">&lt;urlset xmlns=&#34;http://www.sitemaps.org/schemas/sitemap/0.9&#34;&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="2">  &lt;url&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="3">    &lt;loc&gt;https://acme.com&lt;/loc&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="4">    &lt;lastmod&gt;2023-04-06T15:02:24.021Z&lt;/lastmod&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="5">    &lt;changefreq&gt;yearly&lt;/changefreq&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="6">    &lt;priority&gt;1&lt;/priority&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="7">  &lt;/url&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="8">  &lt;url&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="9">    &lt;loc&gt;https://acme.com/about&lt;/loc&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="10">    &lt;lastmod&gt;2023-04-06T15:02:24.021Z&lt;/lastmod&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="11">    &lt;changefreq&gt;monthly&lt;/changefreq&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="12">    &lt;priority&gt;0.8&lt;/priority&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="13">  &lt;/url&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="14">  &lt;url&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="15">    &lt;loc&gt;https://acme.com/blog&lt;/loc&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="16">    &lt;lastmod&gt;2023-04-06T15:02:24.021Z&lt;/lastmod&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="17">    &lt;changefreq&gt;weekly&lt;/changefreq&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="18">    &lt;priority&gt;0.5&lt;/priority&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="19">  &lt;/url&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="20">&lt;/urlset&gt;</span>
</code></pre>

### 5.3. Code Generation

Add a `sitemap.js` or `sitemap.ts` file, which exports a Sitemap object. The usage example is as follows:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">// app/sitemap.js</span>
<span class="code-block-extension-codeLine" data-line-num="2">export default function sitemap() {</span>
<span class="code-block-extension-codeLine" data-line-num="3">  return [</span>
<span class="code-block-extension-codeLine" data-line-num="4">    {</span>
<span class="code-block-extension-codeLine" data-line-num="5">      url: &#39;https://acme.com&#39;,</span>
<span class="code-block-extension-codeLine" data-line-num="6">      lastModified: new Date(),</span>
<span class="code-block-extension-codeLine" data-line-num="7">      changeFrequency: &#39;yearly&#39;,</span>
<span class="code-block-extension-codeLine" data-line-num="8">      priority: 1,</span>
<span class="code-block-extension-codeLine" data-line-num="9">    },</span>
<span class="code-block-extension-codeLine" data-line-num="10">    {</span>
<span class="code-block-extension-codeLine" data-line-num="11">      url: &#39;https://acme.com/about&#39;,</span>
<span class="code-block-extension-codeLine" data-line-num="12">      lastModified: new Date(),</span>
<span class="code-block-extension-codeLine" data-line-num="13">      changeFrequency: &#39;monthly&#39;,</span>
<span class="code-block-extension-codeLine" data-line-num="14">      priority: 0.8,</span>
<span class="code-block-extension-codeLine" data-line-num="15">    },</span>
<span class="code-block-extension-codeLine" data-line-num="16">    {</span>
<span class="code-block-extension-codeLine" data-line-num="17">      url: &#39;https://acme.com/blog&#39;,</span>
<span class="code-block-extension-codeLine" data-line-num="18">      lastModified: new Date(),</span>
<span class="code-block-extension-codeLine" data-line-num="19">      changeFrequency: &#39;weekly&#39;,</span>
<span class="code-block-extension-codeLine" data-line-num="20">      priority: 0.5,</span>
<span class="code-block-extension-codeLine" data-line-num="21">    },</span>
<span class="code-block-extension-codeLine" data-line-num="22">  ]</span>
<span class="code-block-extension-codeLine" data-line-num="23">}</span>
</code></pre>

The corresponding output is:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-xml code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">&lt;urlset xmlns=&#34;http://www.sitemaps.org/schemas/sitemap/0.9&#34;&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="2">  &lt;url&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="3">    &lt;loc&gt;https://acme.com&lt;/loc&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="4">    &lt;lastmod&gt;2023-04-06T15:02:24.021Z&lt;/lastmod&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="5">    &lt;changefreq&gt;yearly&lt;/changefreq&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="6">    &lt;priority&gt;1&lt;/priority&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="7">  &lt;/url&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="8">  &lt;url&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="9">    &lt;loc&gt;https://acme.com/about&lt;/loc&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="10">    &lt;lastmod&gt;2023-04-06T15:02:24.021Z&lt;/lastmod&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="11">    &lt;changefreq&gt;monthly&lt;/changefreq&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="12">    &lt;priority&gt;0.8&lt;/priority&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="13">  &lt;/url&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="14">  &lt;url&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="15">    &lt;loc&gt;https://acme.com/blog&lt;/loc&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="16">    &lt;lastmod&gt;2023-04-06T15:02:24.021Z&lt;/lastmod&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="17">    &lt;changefreq&gt;weekly&lt;/changefreq&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="18">    &lt;priority&gt;0.5&lt;/priority&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="19">  &lt;/url&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="20">&lt;/urlset&gt;</span>
</code></pre>

If using TypeScript, the type of the Sitemap object is:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-typescript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">type Sitemap = Array&lt;{</span>
<span class="code-block-extension-codeLine" data-line-num="2">  url: string</span>
<span class="code-block-extension-codeLine" data-line-num="3">  lastModified?: string | Date</span>
<span class="code-block-extension-codeLine" data-line-num="4">  changeFrequency?:</span>
<span class="code-block-extension-codeLine" data-line-num="5">    | &#39;always&#39;</span>
<span class="code-block-extension-codeLine" data-line-num="6">    | &#39;hourly&#39;</span>
<span class="code-block-extension-codeLine" data-line-num="7">    | &#39;daily&#39;</span>
<span class="code-block-extension-codeLine" data-line-num="8">    | &#39;weekly&#39;</span>
<span class="code-block-extension-codeLine" data-line-num="9">    | &#39;monthly&#39;</span>
<span class="code-block-extension-codeLine" data-line-num="10">    | &#39;yearly&#39;</span>
<span class="code-block-extension-codeLine" data-line-num="11">    | &#39;never&#39;</span>
<span class="code-block-extension-codeLine" data-line-num="12">  priority?: number</span>
<span class="code-block-extension-codeLine" data-line-num="13">}&gt;</span>
</code></pre>

## 6. manifest.json

### 6.1. Introduction

When developing PWA, the website will be required to provide a `manifest.json` file to set the relevant information of the website. There are still two ways to use it, one static file and one code generation. Let's take a look at the examples directly!

### 6.2. Static files

`app/manifest.json` | `app/manifest.webmanifest`：

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-json code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">{</span>
<span class="code-block-extension-codeLine" data-line-num="2">  &#34;name&#34;: &#34;My Next.js Application&#34;,</span>
<span class="code-block-extension-codeLine" data-line-num="3">  &#34;short_name&#34;: &#34;Next.js App&#34;,</span>
<span class="code-block-extension-codeLine" data-line-num="4">  &#34;description&#34;: &#34;An application built with Next.js&#34;,</span>
<span class="code-block-extension-codeLine" data-line-num="5">  &#34;start_url&#34;: &#34;/&#34;</span>
<span class="code-block-extension-codeLine" data-line-num="6">  // ...</span>
<span class="code-block-extension-codeLine" data-line-num="7">}</span>
</code></pre>

### 6.3. Code Generation

Add a `manifest.js` or `manifest.ts` file, which returns a Manifest object. The usage example is as follows:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">// app/manifest.js</span>
<span class="code-block-extension-codeLine" data-line-num="2">export default function manifest() {</span>
<span class="code-block-extension-codeLine" data-line-num="3">  return {</span>
<span class="code-block-extension-codeLine" data-line-num="4">    name: &#39;Next.js App&#39;,</span>
<span class="code-block-extension-codeLine" data-line-num="5">    short_name: &#39;Next.js App&#39;,</span>
<span class="code-block-extension-codeLine" data-line-num="6">    description: &#39;Next.js App&#39;,</span>
<span class="code-block-extension-codeLine" data-line-num="7">    start_url: &#39;/&#39;,</span>
<span class="code-block-extension-codeLine" data-line-num="8">    display: &#39;standalone&#39;,</span>
<span class="code-block-extension-codeLine" data-line-num="9">    background_color: &#39;#fff&#39;,</span>
<span class="code-block-extension-codeLine" data-line-num="10">    theme_color: &#39;#fff&#39;,</span>
<span class="code-block-extension-codeLine" data-line-num="11">    icons: [</span>
<span class="code-block-extension-codeLine" data-line-num="12">      {</span>
<span class="code-block-extension-codeLine" data-line-num="13">        src: &#39;/favicon.ico&#39;,</span>
<span class="code-block-extension-codeLine" data-line-num="14">        sizes: &#39;any&#39;,</span>
<span class="code-block-extension-codeLine" data-line-num="15">        type: &#39;image/x-icon&#39;,</span>
<span class="code-block-extension-codeLine" data-line-num="16">      },</span>
<span class="code-block-extension-codeLine" data-line-num="17">    ],</span>
<span class="code-block-extension-codeLine" data-line-num="18">  }</span>
<span class="code-block-extension-codeLine" data-line-num="19">}</span></code></pre>
