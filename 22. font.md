## Preface

Next.js has a built-in `next/font` component. Compared with the traditional way of using fonts, using the font component is more flexible and convenient. The use of the font component is mainly divided into two parts, one is Google fonts, and the other is local fonts. Both are implemented through the font component, but the specific configuration is slightly different.

In this article, we will start with the traditional way of using fonts, then explain the convenience and optimization brought by the font component, and finally go into details and explain the specific parameters of the font function. These details only need to be roughly understood when learning, and can be understood in detail when developing actual projects.

## 1. Traditional use of fonts

Let's talk about the traditional way of using fonts first.

The most basic method is to specify a custom font through `@font-face`. The font file can come from a remote file or a local file. Then use the font in `font-family`.

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-css code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">// global.css</span>
<span class="code-block-extension-codeLine" data-line-num="2">@font-face {</span>
<span class="code-block-extension-codeLine" data-line-num="3">  font-family: &#34;Bitstream Vera Serif Bold&#34;;</span>
<span class="code-block-extension-codeLine" data-line-num="4">  src: url(&#34;https://mdn.github.io/css-examples/web-fonts/VeraSeBd.ttf&#34;);</span>
<span class="code-block-extension-codeLine" data-line-num="5">}</span>
<span class="code-block-extension-codeLine" data-line-num="6"></span>
<span class="code-block-extension-codeLine" data-line-num="7">body {</span>
<span class="code-block-extension-codeLine" data-line-num="8">  font-family: &#34;Bitstream Vera Serif Bold&#34;, serif;</span>
<span class="code-block-extension-codeLine" data-line-num="9">}</span>
</code></pre>

With the help of [Google Fonts](https://link.juejin.cn/?target=https%3A%2F%2Ffonts.google.com%2F "https://fonts.google.com/") For such a font website, we can quickly generate style files and then use them directly through the `link` tag or `@import` method.

Use the `link` tag:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">// layout.js</span>
<span class="code-block-extension-codeLine" data-line-num="2">export default function Layout({ children }) {</span>
<span class="code-block-extension-codeLine" data-line-num="3">  return (</span>
<span class="code-block-extension-codeLine" data-line-num="4">    <span class="xml">&lt;html&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="5">      &lt;head&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="6">        &lt;link href=&#34;https://fonts.googleapis.com/css2?family=Ma+Shan+Zheng&amp;display=swap&#34; rel=&#34;stylesheet&#34; /&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="7">      &lt;/head&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="8">      &lt;body&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="9">        {children}</span>
<span class="code-block-extension-codeLine" data-line-num="10">      &lt;/body&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="11">    &lt;/html&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="12">  )</span>
<span class="code-block-extension-codeLine" data-line-num="13">}</span>
</code></pre>

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-css code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">// globals.css</span>
<span class="code-block-extension-codeLine" data-line-num="2">body {</span>
<span class="code-block-extension-codeLine" data-line-num="3">  font-family: &#34;Ma Shan Zheng&#34;, serif;</span>
<span class="code-block-extension-codeLine" data-line-num="4">}</span>
</code></pre>

use `@import`ï¼š

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-css code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">// globals.css</span>
<span class="code-block-extension-codeLine" data-line-num="2">@import url(&#39;https://fonts.googleapis.com/css2?family=Ma+Shan+Zheng&amp;display=swap&#39;);</span>
<span class="code-block-extension-codeLine" data-line-num="3"></span>
<span class="code-block-extension-codeLine" data-line-num="4">body {</span>
<span class="code-block-extension-codeLine" data-line-num="5">  font-family: &#34;Ma Shan Zheng&#34;, serif;</span>
<span class="code-block-extension-codeLine" data-line-num="6">}</span>
</code></pre>

The font effects are as follows:

![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6c75a6d322de417c80e027ce0b10b7ea~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=474&h=128&s=13330&e=png&b=000000)

## 2. next/font and layout offsets

Next.js has a built-in `next/font` component to help you better manage and use fonts. `next/font` will automatically optimize fonts (including custom fonts), for example, using the CSS `size-adjust` attribute to achieve zero layout offset.

We have discussed layout offset in the Image component. In addition to the layout offset caused by not setting the width and height of the image, layout offset is also prone to occur when loading web fonts, for example:

![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/72115f0d28574811bd7a2ecbc4f9f0b8~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1818&h=626&s=867578&e=png&b=d7dffb)

The `font-size` of the three lines of text is 64px. The only difference is the font. However, if you observe the height of the three lines of text on the left side of the picture, you will find that although the font-size is set to 64px, the actual height is not necessarily 64px. [size-adjust](https://link.juejin.cn/?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FCSS%2F%40font-face%2Fsize-adjust "https://developer.mozilla.org/en-US/docs/Web/CSS/@font-face/size-adjust") Adjust the size to ensure that the final size is 64px. Next.js automatically makes this optimization.

In addition to preventing layout shift, `next/font` can also help you quickly use Google fonts, and the CSS and font files will be downloaded at build time and saved like other static resources. The browser will not send any requests to Google, ensuring performance and privacy. We will explain more features in detail in this article.

`next/font` is specifically divided into `next/font/google` and `next/font/local`, corresponding to using Google fonts and using local fonts respectively. Let's explain them one by one.
