### 1 Introduction

In Next.js, components are server-side components by default.

For example, create a new `app/todo/page.js` with the following code:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">export default async function Page() {</span>
<span class="code-block-extension-codeLine" data-line-num="2">  const res = await fetch(&#39;https://jsonplaceholder.typicode.com/todos&#39;)</span>
<span class="code-block-extension-codeLine" data-line-num="3">  const data = (await res.json()).slice(0, 10)</span>
<span class="code-block-extension-codeLine" data-line-num="4">  console.log(data)</span>
<span class="code-block-extension-codeLine" data-line-num="5">  return <span class="xml">&lt;ul&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="6">    {data.map(({ title, id }) =&gt; {</span>
<span class="code-block-extension-codeLine" data-line-num="7">      return &lt;li key={id}&gt;{title}&lt;/li&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="8">    })}</span>
<span class="code-block-extension-codeLine" data-line-num="9">  &lt;/ul&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="10">}</span>
</code></pre>

The request will be executed on the server side and the rendered HTML will be sent to the client:

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/45f949a6245142c686aceed30a4ca9d0~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=3708&h=1778&s=775078&e=png&b=fefefe)

Because it is executed on the server, the results printed by `console` may only appear in the command line, not in the client browser.

### 2. Advantages

There are many benefits to using server-side rendering:

1. Data acquisition: Usually the server environment (network, performance, etc.) is better and closer to the data source, so it will be faster to obtain data on the server. Improve performance by reducing data load time and the number of requests made by clients
2. Security: Keep sensitive data and logic on the server without worrying about being exposed to the client.
3. Caching: Server-side rendering results can be reused in subsequent requests to improve performance.
4. Bundle size: The code of the server-side component will not be packaged into the bundle, reducing the bundle size.
5. Initial page loading and FCP: server-side rendering generates HTML and quickly displays the UI
6. Streaming: Server-side components can split the rendering work into chunks and stream them to the client when ready. Users can see parts of the page earlier without having to wait for the entire page to render.

Because of the many benefits of server-side components, **In actual project development, if you can use server-side components, use server-side components as much as possible**.

### 3. Restrictions

Although there are many benefits to using server-side components, there are also some limitations to using server-side components. For example, you cannot use useState to manage state, you cannot use browser APIs, etc. If we use Next.js, an error will be reported. For example, if we modify the code to:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">import { useState } from &#39;react&#39;;</span>
<span class="code-block-extension-codeLine" data-line-num="2"></span>
<span class="code-block-extension-codeLine" data-line-num="3">export default async function Page() {</span>
<span class="code-block-extension-codeLine" data-line-num="4"></span>
<span class="code-block-extension-codeLine" data-line-num="5">  const [title, setTitle] = useState(&#39;&#39;);</span>
<span class="code-block-extension-codeLine" data-line-num="6"></span>
<span class="code-block-extension-codeLine" data-line-num="7">  const res = await fetch(&#39;https://jsonplaceholder.typicode.com/todos&#39;)</span>
<span class="code-block-extension-codeLine" data-line-num="8">  const data = (await res.json()).slice(0, 10)</span>
<span class="code-block-extension-codeLine" data-line-num="9">  console.log(data)</span>
<span class="code-block-extension-codeLine" data-line-num="10">  return <span class="xml">&lt;ul&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="11">    {data.map(({ title, id }) =&gt; {</span>
<span class="code-block-extension-codeLine" data-line-num="12">      return &lt;li key={id}&gt;{title}&lt;/li&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="13">    })}</span>
<span class="code-block-extension-codeLine" data-line-num="14">  &lt;/ul&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="15">}</span>
</code></pre>

At this point the browser will report an error:

![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ba27110eabb549e4a4f23d7c57da386d~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1648&h=676&s=128433&e=png&b=1a1a1a)

The error message reminds us that we need to use client components at this time. So how to use client components?

##Client components

###1 introduce

To use the client component, you need to add a 'use client' declaration at the top of the file and modify the 'app/todo/page. js'. The code is as follows:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"><</div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">&#39;use client&#39;</span>
<span class="code-block-extension-codeLine" data-line-num="2"></span>
<span class="code-block-extension-codeLine" data-line-num="3">import { useEffect, useState } from &#39;react&#39;;</span>
<span class="code-block-extension-codeLine" data-line-num="4"></span>
<span class="code-block-extension-codeLine" data-line-num="5">function getRandomInt(min, max) {</span>
<span class="code-block-extension-codeLine" data-line-num="6">  const minCeiled = Math.ceil(min);</span>
<span class="code-block-extension-codeLine" data-line-num="7">  const maxFloored = Math.floor(max);</span>
<span class="code-block-extension-codeLine" data-line-num="8">  return Math.floor(Math.random() * (maxFloored - minCeiled) + minCeiled);</span>
<span class="code-block-extension-codeLine" data-line-num="9">}</span>
<span class="code-block-extension-codeLine" data-line-num="10"></span>
<span class="code-block-extension-codeLine" data-line-num="11">export default function Page() {</span>
<span class="code-block-extension-codeLine" data-line-num="12"></span>
<span class="code-block-extension-codeLine" data-line-num="13">  const [list, setList] = useState([]);</span>
<span class="code-block-extension-codeLine" data-line-num="14"></span>
<span class="code-block-extension-codeLine" data-line-num="15">  const fetchData = async () =&gt; {</span>
<span class="code-block-extension-codeLine" data-line-num="16">    const res = await fetch(&#39;https://jsonplaceholder.typicode.com/todos&#39;)</span>
<span class="code-block-extension-codeLine" data-line-num="17">    const data = (await res.json()).slice(0, getRandomInt(1, 10))</span>
<span class="code-block-extension-codeLine" data-line-num="18">    setList(data)</span>
<span class="code-block-extension-codeLine" data-line-num="19">  }</span>
<span class="code-block-extension-codeLine" data-line-num="20"></span>
<span class="code-block-extension-codeLine" data-line-num="21">  useEffect(() =&gt; {</span>
<span class="code-block-extension-codeLine" data-line-num="22">    fetchData()</span>
<span class="code-block-extension-codeLine" data-line-num="23">  }, [])</span>
<span class="code-block-extension-codeLine" data-line-num="24"></span>
<span class="code-block-extension-codeLine" data-line-num="25">  return (</span>
<span class="code-block-extension-codeLine" data-line-num="26">    <span class="xml">&lt;&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="27">      &lt;ul&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="28">        {list.map(({ title, id }) =&gt; {</span>
<span class="code-block-extension-codeLine" data-line-num="29">          return &lt;li key={id}&gt;{title}&lt;/li&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="30">        })}</span>
<span class="code-block-extension-codeLine" data-line-num="31">      &lt;/ul&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="32">      &lt;button onClick={() =&gt; {</span>
<span class="code-block-extension-codeLine" data-line-num="33">        location.reload()</span>
<span class="code-block-extension-codeLine" data-line-num="34">      }}&gt;&lt;/button&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="35">    &lt;/&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="36">  )</span>
<span class="code-block-extension-codeLine" data-line-num="37">}</span>
</code></pre>

In this example, we used React APIs such as useEffect and useState, as well as added click events to the buttons and used browser APIs. Regardless of which one to use, it needs to be declared as a client component first.

**Note: 'use client' is used to declare the boundary between the server and client component modules. When you define a 'use client' in the file, other imported modules, including subcomponents, will be considered as part of the client bundle**

###2 advantage

1. Interactivity: Client components can use state, effects, and event listeners, meaning users can interact with them
2. Browser API: Client components can use browser APIs such as geographic location, localStorage, etc
