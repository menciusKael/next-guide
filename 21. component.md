##Preface

At the beginning of this article, we will enter the components section and provide a detailed introduction to the four built-in components of NextJS, namely: '<Image>', 'Font', '<Link>', and '<Script>'. They are all specially abstracted components optimized by NextJS based on native HTML tags, and should be used as much as possible during development.

The<Image>component implements lazy loading and automatically adjusts image size based on device size, the<Link><span></span>component implements background pre fetch of resources, making page transitions faster and smoother, and the<Script>component allows you to control loading and executing third-party scripts, etc. We will provide detailed information on the specific functions and APIs in the components section.

This article will introduce the<Image>component, as images often occupy a large part of the webpage size, and image optimization is of utmost importance` The Image component also provides a lot of props and configuration items. Understanding these props and their underlying principles helps us to use the Image component more deeply and bring a better user experience.

## Images and LCP

### 1. Image proportion

according to [Web Almanac](https://link.juejin.cn/?target=https%3A%2F%2Falmanac.httparchive.org%2Fen%2F2022%2Fmedia "https://almanac.httparchive.org/en/2022/media") In the introduction, image size accounts for a large part of the typical website page size. According to statistics, the median total size of websites in June 2021 was 2019 KB (mobile), of which 881 KB were images. This is more than the sum of HTML (30 KB), CSS (72 KB), JavaScript (461 KB), and fonts (97 KB).

On the vast majority of pages (70% mobile devices, 80% desktop), the most influential are images. Largest Contentful Paint（Maximum content drawing, abbreviated as：[LCP](https://link.juejin.cn/?target=https%3A%2F%2Fweb.dev%2Farticles%2Flcp%3Fhl%3Dzh-cn "https://web.dev/articles/lcp?hl=zh-cn")） It is a web performance metric that identifies the largest content element in the first screen. Most of the time, this element has an image.

### 2. LCP background

Considering that LCP is not a commonly known concept, we will introduce LCP separately.

For web developers, measuring the loading speed of the main content on a webpage has always been a challenge.

Traditionally, we use methods such as load and DOMContentLoaded, but they do not represent the time the user sees content on the screen.

And for first content rendering (FCP), if the page has a loading effect, the time obtained is also inaccurate.

Of course, there are also indicators such as First Effective Mapping (FMP), but these indicators are very complex and often incorrect. So it cannot be used to determine the loading time of the main content.

According to discussions in the W3C Web Performance Working Group and research by Google, a more accurate way to measure the loading time of the main content of a webpage is to look at the rendering time of the largest element. This is LCP.

### 3. LCP Concepts and Standards

The Large Contentful Paint (LCP) metric reports the rendering time of the largest image or text block visible in the viewport (relative to the time the webpage first starts loading).

In order to provide a good user experience, the website should strive to set the Large Contentful Paint to \* _ 2.5 seconds _ \* or shorter.

Let's take a look at some examples of LCP:

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/cdad5f872000436386d02af3b2b22ab6~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1600&h=621&s=344333&e=png&b=faf4f4)

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d45d5ac94a014e66a4b791e61e2a41dc~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1600&h=621&s=397379&e=png&b=fbfbfb)

So the question is, pages are often loaded in stages, and the largest element in a webpage may be constantly changing. How is LCP calculated?

Firstly, the browser will limit the elements of LCP to specific element types, such as<img>elements, block level elements that contain text nodes or other embedded text elements, the first frame drawn for autoplay of<video>elements, the first frame of animated image formats (such as GIF animations), and so on (this is to simplify the issue, as calculating the size of all elements would be too complex and unnecessary).

Then, after drawing the first frame, the browser will immediately assign a Performance Entry of the large content point type to identify the largest content element. After rendering subsequent frames, as long as the maximum content element changes, the API will assign another Performance Entry. Simply put, when drawing each frame, the browser will indicate the maximum content element.

When the user interacts with the page (by clicking, scrolling, or pressing a button), the browser stops reporting new entries. (Because user interaction often changes the content displayed to the user, such as scrolling operations). Generally speaking, the startTime value of the last entry issued is the LCP value.

## `<Image>`

### 1. Functional characteristics

Explaining LCP is just to help everyone realize the importance of image optimization (after all, the biggest content element is often the image). Returning to the `<Image>` component, NextJS implements these optimization features based on native HTML `<img>` elements:

1. Size optimization: Automatically provide images of the correct size for each device, and also use modern image formats such as WebP and AVIF.
2. Visual stability: prevent layout shift during image loading (Layout Shift)
3. Faster page loading: Images only load when entering the viewport, using lazy loading function and optional use of blurry placeholders
4. Flexible configuration: Adjust images as needed, and images on remote servers can also be adjusted accordingly

We will cover these functions one by one when explaining the component API.

### 2. Basic usage

This is an example of using the<Image>component, which looks like using a normal img element:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">// app/page.js</span>
<span class="code-block-extension-codeLine" data-line-num="2">import Image from &#39;next/image&#39;</span>
<span class="code-block-extension-codeLine" data-line-num="3"></span>
<span class="code-block-extension-codeLine" data-line-num="4">export default function Page() {</span>
<span class="code-block-extension-codeLine" data-line-num="5">  return (</span>
<span class="code-block-extension-codeLine" data-line-num="6">    <span class="xml">&lt;Image</span></span>
<span class="code-block-extension-codeLine" data-line-num="7">      src=&#34;/profile.png&#34;</span>
<span class="code-block-extension-codeLine" data-line-num="8">      width={500}</span>
<span class="code-block-extension-codeLine" data-line-num="9">      height={500}</span>
<span class="code-block-extension-codeLine" data-line-num="10">      alt=&#34;Picture of the author&#34;</span>
<span class="code-block-extension-codeLine" data-line-num="11">    /&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="12">  )</span>
<span class="code-block-extension-codeLine" data-line-num="13">}</span>
</code></pre>

### 3. Supported props

`<Image>` The component supports passing in these props:

| **Prop**                                                                                                                                                                                                                          | **Example**                          | **type**        | **Is it necessary** |
| --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------ | --------------- | ------------------- |
| [src](https://link.juejin.cn/?target=https%3A%2F%2Fnextjs.org%2Fdocs%2Fapp%2Fapi-reference%2Fcomponents%2Fimage%23src "https://nextjs.org/docs/app/api-reference/components/image#src")                                           | `src="/profile.png"`                 | String          | yes                 |
| [width](https://link.juejin.cn/?target=https%3A%2F%2Fnextjs.org%2Fdocs%2Fapp%2Fapi-reference%2Fcomponents%2Fimage%23width "https://nextjs.org/docs/app/api-reference/components/image#width")                                     | `width={500}`                        | Integer (px)    | yes                 |
| [height](https://link.juejin.cn/?target=https%3A%2F%2Fnextjs.org%2Fdocs%2Fapp%2Fapi-reference%2Fcomponents%2Fimage%23height "https://nextjs.org/docs/app/api-reference/components/image#height")                                  | `height={500}`                       | Integer (px)    | yes                 |
| [alt](https://link.juejin.cn/?target=https%3A%2F%2Fnextjs.org%2Fdocs%2Fapp%2Fapi-reference%2Fcomponents%2Fimage%23alt "https://nextjs.org/docs/app/api-reference/components/image#alt")                                           | `alt="Picture of the author"`        | String          | yes                 |
| [loader](https://link.juejin.cn/?target=https%3A%2F%2Fnextjs.org%2Fdocs%2Fapp%2Fapi-reference%2Fcomponents%2Fimage%23loader "https://nextjs.org/docs/app/api-reference/components/image#loader")                                  | `loader={imageLoader}`               | Function        | -                   |
| [fill](https://link.juejin.cn/?target=https%3A%2F%2Fnextjs.org%2Fdocs%2Fapp%2Fapi-reference%2Fcomponents%2Fimage%23fill "https://nextjs.org/docs/app/api-reference/components/image#fill")                                        | `fill={true}`                        | Boolean         | -                   |
| [sizes](https://link.juejin.cn/?target=https%3A%2F%2Fnextjs.org%2Fdocs%2Fapp%2Fapi-reference%2Fcomponents%2Fimage%23sizes "https://nextjs.org/docs/app/api-reference/components/image#sizes")                                     | `sizes="(max-width: 768px) 100vw"`   | String          | -                   |
| [quality](https://link.juejin.cn/?target=https%3A%2F%2Fnextjs.org%2Fdocs%2Fapp%2Fapi-reference%2Fcomponents%2Fimage%23quality "https://nextjs.org/docs/app/api-reference/components/image#quality")                               | `quality={80}`                       | Integer (1-100) | -                   |
| [priority](https://link.juejin.cn/?target=https%3A%2F%2Fnextjs.org%2Fdocs%2Fapp%2Fapi-reference%2Fcomponents%2Fimage%23priority "https://nextjs.org/docs/app/api-reference/components/image#priority")                            | `priority={true}`                    | Boolean         | -                   |
| [placeholder](https://link.juejin.cn/?target=https%3A%2F%2Fnextjs.org%2Fdocs%2Fapp%2Fapi-reference%2Fcomponents%2Fimage%23placeholder "https://nextjs.org/docs/app/api-reference/components/image#placeholder")                   | `placeholder="blur"`                 | String          | -                   |
| [style](https://link.juejin.cn/?target=https%3A%2F%2Fnextjs.org%2Fdocs%2Fapp%2Fapi-reference%2Fcomponents%2Fimage%23style "https://nextjs.org/docs/app/api-reference/components/image#style")                                     | `style={{objectFit: "contain"}}`     | Object          | -                   |
| [onLoadingComplete](https://link.juejin.cn/?target=https%3A%2F%2Fnextjs.org%2Fdocs%2Fapp%2Fapi-reference%2Fcomponents%2Fimage%23onloadingcomplete "https://nextjs.org/docs/app/api-reference/components/image#onloadingcomplete") | `onLoadingComplete={img => done())}` | Function        | -                   |
| [onLoad](https://link.juejin.cn/?target=https%3A%2F%2Fnextjs.org%2Fdocs%2Fapp%2Fapi-reference%2Fcomponents%2Fimage%23onload "https://nextjs.org/docs/app/api-reference/components/image#onload")                                  | `onLoad={event => done())}`          | Function        | -                   |
| [onError](https://link.juejin.cn/?target=https%3A%2F%2Fnextjs.org%2Fdocs%2Fapp%2Fapi-reference%2Fcomponents%2Fimage%23onerror "https://nextjs.org/docs/app/api-reference/components/image#onerror")                               | `onError(event => fail()}`           | Function        | -                   |
| [loading](https://link.juejin.cn/?target=https%3A%2F%2Fnextjs.org%2Fdocs%2Fapp%2Fapi-reference%2Fcomponents%2Fimage%23loading "https://nextjs.org/docs/app/api-reference/components/image#loading")                               | `loading="lazy"`                     | String          | -                   |
| [blurDataURL](https://link.juejin.cn/?target=https%3A%2F%2Fnextjs.org%2Fdocs%2Fapp%2Fapi-reference%2Fcomponents%2Fimage%23blurdataurl "https://nextjs.org/docs/app/api-reference/components/image#blurdataurl")                   | `blurDataURL="data:image/jpeg..."`   | String          | -                   |

Among them, 'src', 'width', 'height', and 'alt' are mandatory, while others are optional. Let's explain them one by one.

### 4. Src - Required

Src supports passing in a static imported image file and also supports passing in a path string.

When using local images, static import of image files can be used. Import files in. jpg,. png, or. webp formats through 'import'. The usage example is as follows:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">// app/page.js</span>
<span class="code-block-extension-codeLine" data-line-num="2">import Image from &#39;next/image&#39;</span>
<span class="code-block-extension-codeLine" data-line-num="3">import profilePic from &#39;./me.png&#39;</span>
<span class="code-block-extension-codeLine" data-line-num="4"></span>
<span class="code-block-extension-codeLine" data-line-num="5">export default function Page() {</span>
<span class="code-block-extension-codeLine" data-line-num="6">  return (</span>
<span class="code-block-extension-codeLine" data-line-num="7">    <span class="xml">&lt;Image</span></span>
<span class="code-block-extension-codeLine" data-line-num="8">      src={profilePic}</span>
<span class="code-block-extension-codeLine" data-line-num="9">      alt=&#34;Picture of the author&#34;</span>
<span class="code-block-extension-codeLine" data-line-num="10">      // width={500} automatically provided</span>
<span class="code-block-extension-codeLine" data-line-num="11">      // height={500} automatically provided</span>
<span class="code-block-extension-codeLine" data-line-num="12">      // blurDataURL=&#34;data:...&#34; automatically provided</span>
<span class="code-block-extension-codeLine" data-line-num="13">      // placeholder=&#34;blur&#34; // Optional blur-up while loading</span>
<span class="code-block-extension-codeLine" data-line-num="14">    /&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="15">  )</span>
<span class="code-block-extension-codeLine" data-line-num="16">}</span>
</code></pre>

Using a static file import method, 'width' and 'height' do not need to be passed in, Next.exe will automatically provide them.

Note: Dynamic 'await import()' or 'require ()<span></span>' are not supported` Import must be static in order to be analyzed during construction.

When using remote images, src can pass in a URL string.

Due to the inability to retrieve remote files during the construction of NextJS, you need to manually provide 'width', 'height', and optional 'blurDataURL' props.

`The width and height attributes are used to infer the correct aspect ratio (also known as aspect ratio) of an image and to avoid layout offset during image loading. But 'width' and 'height' do not determine the final rendering size of the image, which is also easy to understand because you may also set stretching mode, etc.

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">// app/page.js</span>
<span class="code-block-extension-codeLine" data-line-num="2">import Image from &#39;next/image&#39;</span>
<span class="code-block-extension-codeLine" data-line-num="3"></span>
<span class="code-block-extension-codeLine" data-line-num="4">export default function Page() {</span>
<span class="code-block-extension-codeLine" data-line-num="5">  return (</span>
<span class="code-block-extension-codeLine" data-line-num="6">    <span class="xml">&lt;Image</span></span>
<span class="code-block-extension-codeLine" data-line-num="7">      src=&#34;https://s3.amazonaws.com/my-bucket/profile.png&#34;</span>
<span class="code-block-extension-codeLine" data-line-num="8">      alt=&#34;Picture of the author&#34;</span>
<span class="code-block-extension-codeLine" data-line-num="9">      width={500}</span>
<span class="code-block-extension-codeLine" data-line-num="10">      height={500}</span>
<span class="code-block-extension-codeLine" data-line-num="11">    /&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="12">  )</span>
<span class="code-block-extension-codeLine" data-line-num="13">}</span>
</code></pre>

Note that when using remote addresses, Next.exe requires defining supported remote image addresses in the 'next. config. js' file to prevent malicious use. The configuration method is as follows:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">// next.config.js</span>
<span class="code-block-extension-codeLine" data-line-num="2">module.exports = {</span>
<span class="code-block-extension-codeLine" data-line-num="3">  images: {</span>
<span class="code-block-extension-codeLine" data-line-num="4">    remotePatterns: [</span>
<span class="code-block-extension-codeLine" data-line-num="5">      {</span>
<span class="code-block-extension-codeLine" data-line-num="6">        protocol: &#39;https&#39;,</span>
<span class="code-block-extension-codeLine" data-line-num="7">        hostname: &#39;s3.amazonaws.com&#39;,</span>
<span class="code-block-extension-codeLine" data-line-num="8">        port: &#39;&#39;,</span>
<span class="code-block-extension-codeLine" data-line-num="9">        pathname: &#39;/my-bucket/**&#39;,</span>
<span class="code-block-extension-codeLine" data-line-num="10">      },</span>
<span class="code-block-extension-codeLine" data-line-num="11">    ],</span>
<span class="code-block-extension-codeLine" data-line-num="12">  },</span>
<span class="code-block-extension-codeLine" data-line-num="13">}</span>
</code></pre>

We will provide a detailed explanation of the 'remotePatterns' in the configuration file later in this article.

### 5. Width - Required

`The width property represents the width of the rendered image, measured in pixels, and affects the display size of the image.

This attribute is required, unless it is a static imported image or the image has a 'fill' attribute.

### 6. Height - Required

`The height attribute represents the height of the rendered image, measured in pixels, and affects the display size of the image.

The attribute must be, unless it is a static imported image or the image has a 'fill' attribute.

### 7. alt

`The alt attribute is used to describe images and is provided for use by screen readers and search engines. If the image is disabled or there is an error loading the image, it will serve as a text prompt for downgrading.

`The alt attribute should be used to replace the text description of the image without changing the meaning of the page, and should not repeat the information provided in the title above or below the image.

If the image is purely for decoration or not intended for user use, the 'alt' attribute should be represented by an empty string ('alt='').

### 8. loader

`loader` A custom function for parsing image addresses. Let's take a look at an example code:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">&#39;use client&#39;</span>
<span class="code-block-extension-codeLine" data-line-num="2"></span>
<span class="code-block-extension-codeLine" data-line-num="3">import Image from &#39;next/image&#39;</span>
<span class="code-block-extension-codeLine" data-line-num="4"></span>
<span class="code-block-extension-codeLine" data-line-num="5">const imageLoader = ({ src, width, quality }) =&gt; {</span>
<span class="code-block-extension-codeLine" data-line-num="6">  return `https://example.com/${src}?w=${width}&amp;q=${quality || 75}`</span>
<span class="code-block-extension-codeLine" data-line-num="7">}</span>
<span class="code-block-extension-codeLine" data-line-num="8"></span>
<span class="code-block-extension-codeLine" data-line-num="9">export default function Page() {</span>
<span class="code-block-extension-codeLine" data-line-num="10">  return (</span>
<span class="code-block-extension-codeLine" data-line-num="11">    <span class="xml">&lt;Image</span></span>
<span class="code-block-extension-codeLine" data-line-num="12">      loader={imageLoader}</span>
<span class="code-block-extension-codeLine" data-line-num="13">      src=&#34;me.png&#34;</span>
<span class="code-block-extension-codeLine" data-line-num="14">      alt=&#34;Picture of the author&#34;</span>
<span class="code-block-extension-codeLine" data-line-num="15">      width={500}</span>
<span class="code-block-extension-codeLine" data-line-num="16">      height={500}</span>
<span class="code-block-extension-codeLine" data-line-num="17">    /&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="18">  )</span>
<span class="code-block-extension-codeLine" data-line-num="19">}</span>
</code></pre>

The function takes' src ',' width ', and' quality 'as parameters and returns the URL string of the image.

Note: Since the 'loader' prop passes a function, a client component is required, and in this example, 'use client' is also used at the top.

Adding a loader to each image is very cumbersome, but you can also use the 'loaderFile' configuration option in 'next. config. js' to configure each' next/image 'instance in the application without passing the' loader 'prop. This configuration item will be explained later in this article.

### 9. fill

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">fill={true} // {true} | {false}</span>
</code></pre>

`Fill 'indicates whether to fill the image with the parent element. The default value is' false '. It is useful when the width and height of the image are unknown.

However, it should be noted that when using 'fill', the parent element must be specified as' position: 'relative', 'position:' fixed ', or' position: 'absolute'. And the img element will be automatically designated as' position: 'absolute' by default.

If no other styles are applied to the image, it will be stretched to fill the container.

Of course, there are many ways to fill containers, and the CSS properties' object fit: 'container' and 'object fit:' cover 'can also be used to fill images.

Let's take a brief look at the differences:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">// app/page.js</span>
<span class="code-block-extension-codeLine" data-line-num="2">import Image from &#39;next/image&#39;</span>
<span class="code-block-extension-codeLine" data-line-num="3">import profilePic from &#39;./image.png&#39;</span>
<span class="code-block-extension-codeLine" data-line-num="4"></span>
<span class="code-block-extension-codeLine" data-line-num="5">export default function Page() {</span>
<span class="code-block-extension-codeLine" data-line-num="6">  return (</span>
<span class="code-block-extension-codeLine" data-line-num="7">    <span class="xml">&lt;div style={{</span></span>
<span class="code-block-extension-codeLine" data-line-num="8">      width: &#39;200px&#39;,</span>
<span class="code-block-extension-codeLine" data-line-num="9">      height: &#39;200px&#39;,</span>
<span class="code-block-extension-codeLine" data-line-num="10">      backgroundColor: &#34;#ccc&#34;,</span>
<span class="code-block-extension-codeLine" data-line-num="11">      position: &#39;relative&#39;</span>
<span class="code-block-extension-codeLine" data-line-num="12">    }}&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="13">     &lt;Image</span>
<span class="code-block-extension-codeLine" data-line-num="14">        src={profilePic}</span>
<span class="code-block-extension-codeLine" data-line-num="15">        alt=&#34;Picture of the author&#34;</span>
<span class="code-block-extension-codeLine" data-line-num="16">      /&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="17">    &lt;/div&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="18">  )</span>
<span class="code-block-extension-codeLine" data-line-num="19">}</span>
</code></pre>

The normal display is as follows:

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ea029d04ff6748d297390b2d5a4fbcc9~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=856&h=642&s=500317&e=png&b=2d2a27)

If the fill attribute is added:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">&lt;Image</span>
<span class="code-block-extension-codeLine" data-line-num="2">  src={profilePic}</span>
<span class="code-block-extension-codeLine" data-line-num="3">  alt=&#34;Picture of the author&#34;</span>
<span class="code-block-extension-codeLine" data-line-num="4">  fill={true}</span>
<span class="code-block-extension-codeLine" data-line-num="5">/&gt;</span>
</code></pre>

The effect is as follows, the image will be stretched to fit the container:

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/23133468308c414d8b153bd6689a8495~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=578&h=538&s=265329&e=png&b=302d2b)

If used `object-fit: "contain"`：

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">&lt;Image</span>
<span class="code-block-extension-codeLine" data-line-num="2">  src={profilePic}</span>
<span class="code-block-extension-codeLine" data-line-num="3">  alt=&#34;Picture of the author&#34;</span>
<span class="code-block-extension-codeLine" data-line-num="4">  fill={true}</span>
<span class="code-block-extension-codeLine" data-line-num="5">  style={{objectFit: &#34;contain&#34;}}</span>
<span class="code-block-extension-codeLine" data-line-num="6">/&gt;</span>
</code></pre>

The effect is as follows: the image fills the entire content box of the element while maintaining its aspect ratio:

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3b375639f2e14d59923b2cd89440bd6f~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=562&h=518&s=174623&e=png&b=ebebeb) If used `object-fit: "cover"`：

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">&lt;Image</span>
<span class="code-block-extension-codeLine" data-line-num="2">  src={profilePic}</span>
<span class="code-block-extension-codeLine" data-line-num="3">  alt=&#34;Picture of the author&#34;</span>
<span class="code-block-extension-codeLine" data-line-num="4">  fill={true}</span>
<span class="code-block-extension-codeLine" data-line-num="5">  style={{objectFit: &#34;cover&#34;}}</span>
<span class="code-block-extension-codeLine" data-line-num="6">/&gt;</span>
</code></pre>

The effect is as follows: the image fills the entire content box of the element while maintaining its aspect ratio. If the aspect ratio of an object does not match the content box, the object will be cropped to fit the content box:

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2e02b46bc02941b6b9cf78e584e0578e~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=624&h=532&s=232733&e=png&b=282523)

### 10. sizes

HTML 5.1 has added the 'srcset' and 'sizes' attributes of the img element for setting responsive images.

When we need different devices to display different images, we need to use 'srcset'. There are two specific situations here, one is that the images are of the same size, but different resolutions correspond to different images, that is, high-resolution corresponds to high magnification images. One type is the same image content, but displayed larger or smaller depending on the device. This corresponds to the two syntax of srcset.

First, let's talk about the first method, which displays different images based on different resolutions. Here is an example of how to use it:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">&lt;img</span>
<span class="code-block-extension-codeLine" data-line-num="2">  srcset=&#34;elva-fairy-320w.jpg, elva-fairy-480w.jpg 1.5x, elva-fairy-640w.jpg 2x&#34;</span>
<span class="code-block-extension-codeLine" data-line-num="3">  src=&#34;elva-fairy-640w.jpg&#34;</span>
<span class="code-block-extension-codeLine" data-line-num="4">  alt=&#34;Elva dressed as a fairy&#34; /&gt;</span>
</code></pre>

The effect is as follows:

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a316177c7f664b9ab520736e62d054d2~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=480&h=425&s=130728&e=png&a=1&b=f4f1f0)

Srcset is composed of one or more strings separated by commas, with each string consisting of the following:

1. URL pointing to the image
2. One space (optional)
3. A pixel density descriptor (a positive floating-point number followed by an x symbol)

If we apply a CSS style to an image:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-css code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">img {</span>
<span class="code-block-extension-codeLine" data-line-num="2">  width: 320px;</span>
<span class="code-block-extension-codeLine" data-line-num="3">}</span>
</code></pre>

Its width on the screen is 320 pixels (CSS pixels). The browser calculates the resolution of the display being shown and then displays the most suitable image referenced by the srcset. If it is a normal resolution and one device pixel represents one CSS pixel, then 'elva-fairy-320w. jpg' will be loaded, with a size of 39KB. If the device is a high pixel and two or more device pixels represent one CSS pixel, then 'elva-fairy-640w. jpg' will be loaded, with a size of 93KB.

Speaking of the second scenario, the same image content but displayed larger or smaller depending on the device. The example code is as follows:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">&lt;img</span>
<span class="code-block-extension-codeLine" data-line-num="2">  srcset=&#34;elva-fairy-small.jpg 480w, elva-fairy-large.jpg 800w&#34;</span>
<span class="code-block-extension-codeLine" data-line-num="3">  src=&#34;elva-fairy-large.jpg&#34;</span>
<span class="code-block-extension-codeLine" data-line-num="4">  alt=&#34;Elva dressed as a fairy&#34; /&gt;</span>
</code></pre>

The syntax of srcset is slightly different from before, as it defines the image settings that can be selected by the browser and the size of each image. Analyzing its syntax, it is still composed of one or more strings separated by commas, with each string consisting of the following parts:

1. URL pointing to the image
2. One space
3. The inherent width of the image (in pixels). Note that the width descriptor w is used here, not px. But one w corresponds to one pixel. The inherent width of an image refers to its true size.

At this point, we informed the browser that there are two alternative images to display for this image. One is' elva fairy small. jpg 'with a width of 480px, and the other is' elva fairy large. jpg' with a width of 800px.

How does the browser know which image to use? For example, if the current device viewport width is 640px, should we choose a 480px image or an 800px image?

To help the browser determine, you need to write the sizes attribute. The sizes attribute is a set of media query conditions that tell the browser what kind of conditions to use and what kind of images to use. An example of usage is as follows:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">&lt;img</span>
<span class="code-block-extension-codeLine" data-line-num="2">  srcset=&#34;elva-fairy-small.jpg 480w, elva-fairy-large.jpg 800w&#34;</span>
<span class="code-block-extension-codeLine" data-line-num="3">  sizes=&#34;(max-width: 600px) 480px,</span>
<span class="code-block-extension-codeLine" data-line-num="4">         800px&#34;</span>
<span class="code-block-extension-codeLine" data-line-num="5">  src=&#34;elva-fairy-large.jpg&#34;</span>
<span class="code-block-extension-codeLine" data-line-num="6">  alt=&#34;Elva dressed as a fairy&#34; /&gt;</span>
</code></pre>

Sizes are also composed of one or more strings separated by commas, with each string consisting of the following:

1. A media condition, in the example of '(max width: 600px)', which represents when the width of the viewport is less than or equal to 600px
2. One space
   When the media conditions are true, the width of the image to be filled can be a fixed value, such as 480px in this example, or a width relative to the viewport (such as 50vw), but not a percentage. If there are no media conditions, it means it takes effect by default. When the browser successfully matches the first media condition, all remaining conditions will be ignored. So the order is very important.

With these attributes, the browser will:

1. Check the width of the equipment
2. Check which media condition in the sizes list is the first to be true
3. Check the slot size given for the media query
4. Load the image closest to the selected slot size referenced in the srcset list

For example, in this example, if the browser viewport is 480px, then the first condition in sizes (max width: 600px) is true, so 480px size is chosen because it is closest to the intrinsic width of 480w, so elva-fairy-small.jpg is loaded. By using this method, it is possible to load small images on mobile devices, thereby accelerating the loading speed of mobile devices.

After discussing the 'srcset' and 'sizes' properties of the img element, return to the'<Image>'component and use NextJS. You don't need to set the' srcset ', NextJS will automatically generate it for you. Setting the sizes attribute will affect the value of the generated 'srcset'.

If you do not set the size attribute of the component, Next.js will use pixel density descriptors such as 1x and 2x, while if you set the size attribute, Next.js will use intrinsic width descriptors such as 640w and 750w.

Before setting:

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9ca8290c0b4849e6a4c936c1398140c9~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1182&h=124&s=69379&e=png&b=282828)

After setting:

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/031333cd47564ad399e819642ae912f7~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1178&h=436&s=253485&e=png&b=282828)

### 11. quality

Indicates optimizing the quality of the image, with a value ranging from 1 to 100, where 100 represents the best quality and also the maximum file size. The default is 75.

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">quality={75} // {number 1-100}</span></code></pre>
