Now let's create a new 'app/server/page. js' with the following code:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">export default async function Page() {</span>
<span class="code-block-extension-codeLine" data-line-num="2">  const url = (await (await fetch(&#39;https://api.thecatapi.com/v1/images/search&#39;)).json())[0].url</span>
<span class="code-block-extension-codeLine" data-line-num="3"></span>
<span class="code-block-extension-codeLine" data-line-num="4">  return (</span>
<span class="code-block-extension-codeLine" data-line-num="5">    <span class="xml">&lt;img src={url} width=&#34;300&#34; alt=&#34;cat&#34; /&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="6">  )</span>
<span class="code-block-extension-codeLine" data-line-num="7">}</span>
</code></pre>

among，[api.thecatapi.com/v1/images/s…](https://link.juejin.cn/?target=https%3A%2F%2Fapi.thecatapi.com%2Fv1%2Fimages%2Fsearch "https://api.thecatapi.com/v1/images/search") It is an interface that returns a cat image, and each call will return a random cat image data.

Now let's run 'npm run dev', in development mode, every refresh will return a new image:

![strage.gif](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7fba1c5eb0f7454ab5b312ec673efa81~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=595&h=336&s=257512&e=gif&f=44&b=f8f4f3)

Now let's run 'npm run build&&npm run start', but every time we refresh, it's still this emo cat:

![strage-1.gif](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c5c24ed8d2c34d3792833ca6d874162c~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=595&h=336&s=99356&e=gif&f=42&b=fefefe)

Why is this?

Let's take a look at the output results during construction:

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/37a2df3490d44761857bf0c83999db0c~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=922&h=424&s=280422&e=png&b=070212)

`/Server 'is marked as' Static', indicating that it is pre rendered as static content. That is to say, the return content of '/server' is actually determined during the construction process. The image returned by the page is exactly the image returned by calling the cat interface during construction.

So the question is, how to make '/server' return a new image every time?

This comes to Next.js's server-side rendering strategy.

##Server rendering strategy

Next.js has three different server-side rendering strategies:

*Static rendering
*Dynamic rendering
\*Streaming

Let's introduce them one by one.

###1 Static Rendering

\*_This is the default rendering strategy _ _, where _ _ routes are rendered at build time or in the background after revalidation _ \*, and the results are cached and can be pushed to the CDN. Applicable to situations that are not personalized for users and have known data, such as static blog articles, product introduction pages, etc.

The example at the beginning is rendering during construction. So how to render in the background after revalidation?

Modify 'app/server/page. js' with the following code:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">export const revalidate = 10</span>
<span class="code-block-extension-codeLine" data-line-num="2"></span>
<span class="code-block-extension-codeLine" data-line-num="3">export default async function Page() {</span>
<span class="code-block-extension-codeLine" data-line-num="4"></span>
<span class="code-block-extension-codeLine" data-line-num="5">  const url = (await (await fetch(&#39;https://api.thecatapi.com/v1/images/search&#39;)).json())[0].url</span>
<span class="code-block-extension-codeLine" data-line-num="6"></span>
<span class="code-block-extension-codeLine" data-line-num="7">  return (</span>
<span class="code-block-extension-codeLine" data-line-num="8">    <span class="xml">&lt;img src={url} width=&#34;300&#34; alt=&#34;cat&#34; /&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="9">  )</span>
<span class="code-block-extension-codeLine" data-line-num="10">}</span>
</code></pre>

At this point, although in the output of the 'npm run build', the '/server' is still marked as static rendering, the image can now be updated, although it is only updated periodically:

![strage-3.gif](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8beca518ecaf43649191f3b0b438a3ee~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=595&h=336&s=229929&e=gif&f=77&b=ebe3df)

Among them, 'revalidate=10' indicates setting the revalidation frequency to 10 seconds, but it should be noted that:

The effect of this code is not to set the server to automatically update every 10 seconds. But it will be revalidated at least 10 seconds later.

For example, suppose you have accessed '/server' now, and the time is set to 0 seconds. If you continue to access it within 10 seconds, the '/server' will return the previously cached results. After 10 seconds, if you visit the '/server' again in the 12th second, although it exceeds 10 seconds, the previously cached results will still be returned, but it will also trigger the server to update the cache. When you visit again in the 13th second, it will be the updated result.

Simply put, the first visit that exceeds the revalidate setting time will trigger a cache update. If the update is successful, subsequent returns will be new content until the next cache update is triggered.
