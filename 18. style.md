##Preface

Next.js supports multiple ways to add styles:

1. Inline CSS
2. CSS module: Create local CSS to avoid naming conflicts and improve maintainability
3. Global CSS
4. External Style Sheet
5. Tailwind CSS: A CSS framework that declares styles through composition
6. CSS in JS: Embed CSS directly into JavaScript components to achieve dynamic and local styles
7. Sass: The Most Popular CSS Preprocessor

Let's explain one by one.

## 1. Inline CSS

The most basic way to add styles is to use inline CSS, for example:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">// app/about/page.js</span>
<span class="code-block-extension-codeLine" data-line-num="2">export default function About() {</span>
<span class="code-block-extension-codeLine" data-line-num="3">  return (</span>
<span class="code-block-extension-codeLine" data-line-num="4">    <span class="xml">&lt;h1 style={{</span></span>
<span class="code-block-extension-codeLine" data-line-num="5">      color: red;</span>
<span class="code-block-extension-codeLine" data-line-num="6">    }}&gt;Hello About!&lt;/h1&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="7">  )</span>
<span class="code-block-extension-codeLine" data-line-num="8">}</span></code></pre>

## 2. CSS module

Next.js has built-in support for CSS modules. Using the CSS module, you only need to use '. module. css' as the file extension, and Next.js will automatically process it.

The role of the CSS module is to implement local CSS, essentially creating a non repeating class name. This way, you can use the same class name in different files without worrying about style conflicts. This is the most ideal way to implement component level CSS.

Let's give an example:

Firstly, create a 'styles. module. css' file with the style written like a normal CSS file:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">// app/dashboard/styles.module.css</span>
<span class="code-block-extension-codeLine" data-line-num="2">.dashboard {</span>
<span class="code-block-extension-codeLine" data-line-num="3">  padding: 24px;</span>
<span class="code-block-extension-codeLine" data-line-num="4">}</span>
</code></pre>

Then, the CSS module can be imported into any file in the 'app' directory, allowing us to import and use the style:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">// app/dashboard/layout.js</span>
<span class="code-block-extension-codeLine" data-line-num="2">import styles from &#39;./styles.module.css&#39;</span>
<span class="code-block-extension-codeLine" data-line-num="3"></span>
<span class="code-block-extension-codeLine" data-line-num="4">export default function DashboardLayout({ children }) {</span>
<span class="code-block-extension-codeLine" data-line-num="5">  return <span class="xml">&lt;section className={styles.dashboard}&gt;{children}&lt;/section&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="6">}</span>
</code></pre>

## 3. Global Style

Global style, as the name suggests, applies to all routing styles. For example, when we traditionally write page CSS, we introduce styles such as' normalize. css' or 'reset. css', which are suitable for using global style.

Global styles can be imported into any layout, page, or component in the 'app' directory. (Why does it always emphasize arbitrariness? Because in the 'pages' directory, which was the previous Pages Router mode, global styles can only be imported into the' app. js' file, which is a new change.)

How to use it specifically? Let's give an example:

Firstly, create a 'app/global. css' style file:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">body {</span>
<span class="code-block-extension-codeLine" data-line-num="2">  padding: 20px 20px 60px;</span>
<span class="code-block-extension-codeLine" data-line-num="3">  max-width: 680px;</span>
<span class="code-block-extension-codeLine" data-line-num="4">  margin: 0 auto;</span>
<span class="code-block-extension-codeLine" data-line-num="5">}</span>
</code></pre>

Then, in the root layout (`app/layout. js`), import `global. css`, which will be applied to each route in the application:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">// app/layout.js</span>
<span class="code-block-extension-codeLine" data-line-num="2">import &#39;./global.css&#39;</span>
<span class="code-block-extension-codeLine" data-line-num="3"></span>
<span class="code-block-extension-codeLine" data-line-num="4">export default function RootLayout({ children }) {</span>
<span class="code-block-extension-codeLine" data-line-num="5">  return (</span>
<span class="code-block-extension-codeLine" data-line-num="6">    <span class="xml">&lt;html lang=&#34;en&#34;&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="7">      &lt;body&gt;{children}&lt;/body&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="8">    &lt;/html&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="9">  )</span>
<span class="code-block-extension-codeLine" data-line-num="10">}</span></code></pre>

## 4. External Style Sheet

You can also add styles by importing external packages, for example:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">// app/layout.js</span>
<span class="code-block-extension-codeLine" data-line-num="2">import &#39;bootstrap/dist/css/bootstrap.css&#39;</span>
<span class="code-block-extension-codeLine" data-line-num="3"></span>
<span class="code-block-extension-codeLine" data-line-num="4">export default function RootLayout({ children }) {</span>
<span class="code-block-extension-codeLine" data-line-num="5">  return (</span>
<span class="code-block-extension-codeLine" data-line-num="6">    <span class="xml">&lt;html lang=&#34;en&#34;&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="7">      &lt;body className=&#34;container&#34;&gt;{children}&lt;/body&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="8">    &lt;/html&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="9">  )</span>
<span class="code-block-extension-codeLine" data-line-num="10">}</span>
</code></pre>

However, please note that the external package must be imported directly from the NPM package or downloaded and placed together with your code.

What if I want to reference an external CDN CSS file? For example [cdn.jsdelivr.net/npm/bootstr…](https://link.juejin.cn/?target=https%3A%2F%2Fcdn.jsdelivr.net%2Fnpm%2Fbootstrap%405.3.0%2Fdist%2Fcss%2Fbootstrap.min.css "https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css") This type of file？

Then you can use the '<link>' tag to add to the Root Layout, like this:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-jsx code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">// app/layout.js</span>
<span class="code-block-extension-codeLine" data-line-num="2">import &#34;./globals.css&#34;;</span>
<span class="code-block-extension-codeLine" data-line-num="3"></span>
<span class="code-block-extension-codeLine" data-line-num="4">export default function RootLayout({ children }) {</span>
<span class="code-block-extension-codeLine" data-line-num="5">  return (</span>
<span class="code-block-extension-codeLine" data-line-num="6">    <span class="xml">&lt;html lang=&#34;en&#34;&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="7">      &lt;head&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="8">        &lt;link href=&#34;https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css&#34; rel=&#34;stylesheet&#34; /&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="9">      &lt;/head&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="10">      &lt;body&gt;{ children }&lt;/body&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="11">    &lt;/html&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="12">  );</span>
<span class="code-block-extension-codeLine" data-line-num="13">}</span>
</code></pre>

When using styles, pay attention to:

\*\*Instant refresh: When running a project using 'next dev' locally, the local style (whether it is a global style or CSS module) will be refreshed immediately after you save the changes, allowing you to see the style changes in real-time.

\*_Package Build _ \*: When using 'next build', CSS files are packaged into fewer compressed '. css' files to reduce network requests and improve loading speed, so there is no need to worry about creating multiple CSS files that may affect performance.

\*_Disable JS: _ \* When you disable JavaScript, styles will still be loaded in the production version (next start). That is to say, the CSS in the packaged and built code is not injected through JS. However, during development (next dev), JavaScript is still necessary to enable fast refresh.

## 5. Tailwind CSS

[Tailwind CSS](https://link.juejin.cn/?target=https%3A%2F%2Ftailwindcss.com%2F "https://tailwindcss.com/") It is a very well-known CSS framework, essentially a toolset that includes a large number of tool classes such as' flex ',' pt-4 ',' text center ',' rotate-90 ', etc. It can be combined and used directly to implement any UI design in HTML code. It is very convenient to use with Next.js. Next.js officially uses Tailwind CSS.

When using 'create next app' to create a project, if you choose to use Tailwind CSS on the command line, the relevant configurations will be automatically generated and can be used directly. If there is no choice and you want to introduce Tailwind CSS, you can refer to this step. In fact, Tailwind CSS official also provides support for various frameworks[Usage Guide：](https://link.juejin.cn/?target=https%3A%2F%2Ftailwindcss.com%2Fdocs%2Finstallation%2Fframework-guides "https://tailwindcss.com/docs/installation/framework-guides")

### 5.1. install

Execute the following command in the project root directory:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">npm install -D tailwindcss postcss autoprefixer</span>
<span class="code-block-extension-codeLine" data-line-num="2">npx tailwindcss init -p</span>
</code></pre>

Both 'tailwind. config. js' and' postcss. config. js' files will be generated simultaneously.

### 5.2. Configure Tailwind

`Postcss. config. js ` does not need to be modified. Add a file path using Tailwind CSS class name in 'tailwind. config. js':

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">// tailwind.config.js</span>
<span class="code-block-extension-codeLine" data-line-num="2">/** @type {import(&#39;tailwindcss&#39;).Config} */</span>
<span class="code-block-extension-codeLine" data-line-num="3">module.exports = {</span>
<span class="code-block-extension-codeLine" data-line-num="4">  content: [</span>
<span class="code-block-extension-codeLine" data-line-num="5">    &#39;./app/**/*.{js,ts,jsx,tsx,mdx}&#39;,</span>
<span class="code-block-extension-codeLine" data-line-num="6">    &#39;./pages/**/*.{js,ts,jsx,tsx,mdx}&#39;,</span>
<span class="code-block-extension-codeLine" data-line-num="7">    &#39;./components/**/*.{js,ts,jsx,tsx,mdx}&#39;,</span>
<span class="code-block-extension-codeLine" data-line-num="8"></span>
<span class="code-block-extension-codeLine" data-line-num="9">    // </span>
<span class="code-block-extension-codeLine" data-line-num="10">    &#39;./src/**/*.{js,ts,jsx,tsx,mdx}&#39;,</span>
<span class="code-block-extension-codeLine" data-line-num="11">  ],</span>
<span class="code-block-extension-codeLine" data-line-num="12">  theme: {</span>
<span class="code-block-extension-codeLine" data-line-num="13">    extend: {},</span>
<span class="code-block-extension-codeLine" data-line-num="14">  },</span>
<span class="code-block-extension-codeLine" data-line-num="15">  plugins: [],</span>
<span class="code-block-extension-codeLine" data-line-num="16">}</span>
</code></pre>

### 5.3. Import Styles

Add the Tailwind CSS directive to inject the Tailwind style into the global style. The usage method is as follows:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">// app/globals.css</span>
<span class="code-block-extension-codeLine" data-line-num="2">@tailwind base;</span>
<span class="code-block-extension-codeLine" data-line-num="3">@tailwind components;</span>
<span class="code-block-extension-codeLine" data-line-num="4">@tailwind utilities;</span>
</code></pre>

In the root layout (`app/layout. tsx`), import `global. css`:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">// app/layout.js </span>
<span class="code-block-extension-codeLine" data-line-num="2">import &#39;./globals.css&#39;</span>
<span class="code-block-extension-codeLine" data-line-num="3"></span>
<span class="code-block-extension-codeLine" data-line-num="4">export const metadata = {</span>
<span class="code-block-extension-codeLine" data-line-num="5">  title: &#39;Create Next App&#39;,</span>
<span class="code-block-extension-codeLine" data-line-num="6">  description: &#39;Generated by create next app&#39;,</span>
<span class="code-block-extension-codeLine" data-line-num="7">}</span>
<span class="code-block-extension-codeLine" data-line-num="8"></span>
<span class="code-block-extension-codeLine" data-line-num="9">export default function RootLayout({ children }) {</span>
<span class="code-block-extension-codeLine" data-line-num="10">  return (</span>
<span class="code-block-extension-codeLine" data-line-num="11">    <span class="xml">&lt;html lang=&#34;en&#34;&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="12">      &lt;body&gt;{children}&lt;/body&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="13">    &lt;/html&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="14">  )</span>
<span class="code-block-extension-codeLine" data-line-num="15">}</span>
</code></pre>

### 5.4. Using class names

Then you can use Tailwind's tool class name in the application:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">// app/page.js</span>
<span class="code-block-extension-codeLine" data-line-num="2">export default function Page() {</span>
<span class="code-block-extension-codeLine" data-line-num="3">  return <span class="xml">&lt;h1 className=&#34;text-3xl font-bold underline&#34;&gt;Hello, Next.js!&lt;/h1&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="4">}</span>
</code></pre>

### 5.5. Auxiliary use

When used in VSCode, it can be installed [Tailwind CSS IntelliSense ](https://link.juejin.cn/?target=https%3A%2F%2Fmarketplace.visualstudio.com%2Fitems%3FitemName%3Dbradlc.vscode-tailwindcss "https://marketplace.visualstudio.com/items?itemName=bradlc.vscode-tailwindcss")This plugin provides automatic functions, syntax verification, hover preview, and more.

![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ad65001bb64441018aa46bc84fe6c6bf~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=2080&h=1170&s=249225&e=png&b=1a1b26)

There are many tool classes in Tailwind CSS, and when you can't remember clearly, you can also query them[Quick Reference Table](https://link.juejin.cn/?target=https%3A%2F%2Ftailwindcomponents.com%2Fcheatsheet%2F "https://tailwindcomponents.com/cheatsheet/")。

## 6. CSS-in-JS

### 6.1. introduce

CSS-in-JS， As the name suggests, write CSS in a JS file instead of creating separate files such as'. css' and '. scss'. In this way, JS's functions such as variable definition, function calls, and conditional judgment can be used in CSS.

The reason why it has become popular is also related to the popularity of frameworks such as React and Vue, and the concept of "components" has begun to take root in people's hearts. Because Vue has its own CSS solution and React does not, CSS in JS is often discussed in the React community.

![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0a97658e259b4859859e32caa0c15c70~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1762&h=1560&s=483187&e=png&b=252325)

There are many libraries that implement CSS in JS, and the implementation, usage, and syntax of each library are also different. The libraries currently supported in Next.js client components include:

- [kuma-ui](https://link.juejin.cn/?target=https%3A%2F%2Fkuma-ui.com%2F "https://kuma-ui.com/")
- [@mui/material](https://link.juejin.cn/?target=https%3A%2F%2Fmui.com%2Fmaterial-ui%2Fguides%2Fnext-js-app-router%2F "https://mui.com/material-ui/guides/next-js-app-router/")
- [pandacss](https://link.juejin.cn/?target=https%3A%2F%2Fpanda-css.com%2F "https://panda-css.com/")
- [styled-jsx](https://link.juejin.cn/?target=https%3A%2F%2Fnextjs.org%2Fdocs%2Fapp%2Fbuilding-your-application%2Fstyling%2Fcss-in-js%23styled-jsx "https://nextjs.org/docs/app/building-your-application/styling/css-in-js#styled-jsx")
- [styled-components](https://link.juejin.cn/?target=https%3A%2F%2Fnextjs.org%2Fdocs%2Fapp%2Fbuilding-your-application%2Fstyling%2Fcss-in-js%23styled-components "https://nextjs.org/docs/app/building-your-application/styling/css-in-js#styled-components")
- [style9](https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fjohanholmerin%2Fstyle9 "https://github.com/johanholmerin/style9")
- [tamagui](https://link.juejin.cn/?target=https%3A%2F%2Ftamagui.dev%2Fdocs%2Fguides%2Fnext-js%23server-components "https://tamagui.dev/docs/guides/next-js#server-components")
- [tss-react](https://link.juejin.cn/?target=https%3A%2F%2Ftss-react.dev%2F "https://tss-react.dev/")
- [vanilla-extract](https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fvercel%2Fnext.js%2Ftree%2Fcanary%2Fexamples%2Fwith-vanilla-extract "https://github.com/vercel/next.js/tree/canary/examples/with-vanilla-extract")

[emotion](https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Femotion-js%2Femotion%2Fissues%2F2928 "https://github.com/emotion-js/emotion/issues/2928") 正在支持中……

If you want to set the style of server-side components, it is recommended to use CSS modules or other solutions that output CSS files, such as PostCSS or Tailwind CSS.

### 6.2. collocation method

The basic principle of configuring CSS in JS in Next.js can be divided into three steps:

1. During rendering, there is a style registry that includes all CSS rules
2. Use 'useServerInsertedHTML' hook to inject style rules before content is used
3. Use the client component containing the style registry to package the application

### 6.3. styled-jsx

These three steps sound a bit complicated, let's take 'styled jsx' as an example to explain. Note that using 'styled jsx' in client components requires at least version v5.1.0.

First, create a new registry:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">&#39;use client&#39;</span>
<span class="code-block-extension-codeLine" data-line-num="2">// app/registry.js</span>
<span class="code-block-extension-codeLine" data-line-num="3">import React, { useState } from &#39;react&#39;</span>
<span class="code-block-extension-codeLine" data-line-num="4">import { useServerInsertedHTML } from &#39;next/navigation&#39;</span>
<span class="code-block-extension-codeLine" data-line-num="5">import { StyleRegistry, createStyleRegistry } from &#39;styled-jsx&#39;</span>
<span class="code-block-extension-codeLine" data-line-num="6"></span>
<span class="code-block-extension-codeLine" data-line-num="7">export default function StyledJsxRegistry({ children }) {</span>
<span class="code-block-extension-codeLine" data-line-num="8">  const [jsxStyleRegistry] = useState(() =&gt; createStyleRegistry())</span>
<span class="code-block-extension-codeLine" data-line-num="9"></span>
<span class="code-block-extension-codeLine" data-line-num="10">  useServerInsertedHTML(() =&gt; {</span>
<span class="code-block-extension-codeLine" data-line-num="11">    const styles = jsxStyleRegistry.styles()</span>
<span class="code-block-extension-codeLine" data-line-num="12">    jsxStyleRegistry.flush()</span>
<span class="code-block-extension-codeLine" data-line-num="13">    return <span class="xml">&lt;&gt;{styles}&lt;/&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="14">  })</span>
<span class="code-block-extension-codeLine" data-line-num="15"></span>
<span class="code-block-extension-codeLine" data-line-num="16">  return <span class="xml">&lt;StyleRegistry registry={jsxStyleRegistry}&gt;{children}&lt;/StyleRegistry&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="17">}</span>
</code></pre>

Then wrap the 'children' of the root component with this component containing the registry:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">// app/layout.js</span>
<span class="code-block-extension-codeLine" data-line-num="2">import StyledJsxRegistry from &#39;./registry&#39;</span>
<span class="code-block-extension-codeLine" data-line-num="3"></span>
<span class="code-block-extension-codeLine" data-line-num="4">export default function RootLayout({ children }) {</span>
<span class="code-block-extension-codeLine" data-line-num="5">  return (</span>
<span class="code-block-extension-codeLine" data-line-num="6">    <span class="xml">&lt;html&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="7">      &lt;body&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="8">        &lt;StyledJsxRegistry&gt;{children}&lt;/StyledJsxRegistry&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="9">      &lt;/body&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="10">    &lt;/html&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="11">  )</span>
<span class="code-block-extension-codeLine" data-line-num="12">}</span>
</code></pre>

Then you can use it in 'page. js':

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-jsx code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">export default function Page() {</span>
<span class="code-block-extension-codeLine" data-line-num="2">  return (</span>
<span class="code-block-extension-codeLine" data-line-num="3">    <span class="xml">&lt;div&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="4">      &lt;div className=&#34;container&#34;&gt;text</span>
<span class="code-block-extension-codeLine" data-line-num="5">      &lt;/div&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="6"></span>
<span class="code-block-extension-codeLine" data-line-num="7">      &lt;style jsx&gt;<span class="css">{`</span></span>
<span class="code-block-extension-codeLine" data-line-num="8">        .container {</span>
<span class="code-block-extension-codeLine" data-line-num="9">          display: grid;</span>
<span class="code-block-extension-codeLine" data-line-num="10">          grid-template-columns: repeat(1, minmax(0, 1fr));</span>
<span class="code-block-extension-codeLine" data-line-num="11">          gap: 1.5rem /* 24px */;</span>
<span class="code-block-extension-codeLine" data-line-num="12">        }</span>
<span class="code-block-extension-codeLine" data-line-num="13"></span>
<span class="code-block-extension-codeLine" data-line-num="14">        @media (min-width: 1024px) {</span>
<span class="code-block-extension-codeLine" data-line-num="15">          .container {</span>
<span class="code-block-extension-codeLine" data-line-num="16">            grid-template-columns: repeat(3, minmax(0, 1fr));</span>
<span class="code-block-extension-codeLine" data-line-num="17">          }</span>
<span class="code-block-extension-codeLine" data-line-num="18">        }</span>
<span class="code-block-extension-codeLine" data-line-num="19">      `}&lt;/style&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="20">    &lt;/div&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="21">  );</span>
<span class="code-block-extension-codeLine" data-line-num="22">}</span>
</code></pre>

Example code address：[github.com/vercel/app-…](https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fvercel%2Fapp-playground%2Ftree%2Fmain%2Fapp%2Fstyling%2Fstyled-jsx "https://github.com/vercel/app-playground/tree/main/app/styling/styled-jsx")

### 6.4. Styled Components

The configuration of Styled Components is also similar, please pay attention to using it`styled-components@6`Or a higher version.

Firstly, create a global registry:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">&#39;use client&#39;</span>
<span class="code-block-extension-codeLine" data-line-num="2">// lib/registry.js</span>
<span class="code-block-extension-codeLine" data-line-num="3">import React, { useState } from &#39;react&#39;</span>
<span class="code-block-extension-codeLine" data-line-num="4">import { useServerInsertedHTML } from &#39;next/navigation&#39;</span>
<span class="code-block-extension-codeLine" data-line-num="5">import { ServerStyleSheet, StyleSheetManager } from &#39;styled-components&#39;</span>
<span class="code-block-extension-codeLine" data-line-num="6"></span>
<span class="code-block-extension-codeLine" data-line-num="7">export default function StyledComponentsRegistry({ children }) {</span>
<span class="code-block-extension-codeLine" data-line-num="8">  const [styledComponentsStyleSheet] = useState(() =&gt; new ServerStyleSheet())</span>
<span class="code-block-extension-codeLine" data-line-num="9"></span>
<span class="code-block-extension-codeLine" data-line-num="10">  useServerInsertedHTML(() =&gt; {</span>
<span class="code-block-extension-codeLine" data-line-num="11">    const styles = styledComponentsStyleSheet.getStyleElement()</span>
<span class="code-block-extension-codeLine" data-line-num="12">    styledComponentsStyleSheet.instance.clearTag()</span>
<span class="code-block-extension-codeLine" data-line-num="13">    return <span class="xml">&lt;&gt;{styles}&lt;/&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="14">  })</span>
<span class="code-block-extension-codeLine" data-line-num="15"></span>
<span class="code-block-extension-codeLine" data-line-num="16">  if (typeof window !== &#39;undefined&#39;) return <span class="xml">&lt;&gt;{children}&lt;/&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="17"></span>
<span class="code-block-extension-codeLine" data-line-num="18">  return (</span>
<span class="code-block-extension-codeLine" data-line-num="19">    <span class="xml">&lt;StyleSheetManager sheet={styledComponentsStyleSheet.instance}&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="20">      {children}</span>
<span class="code-block-extension-codeLine" data-line-num="21">    &lt;/StyleSheetManager&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="22">  )</span>
<span class="code-block-extension-codeLine" data-line-num="23">}</span>
</code></pre>

Then wrap the 'children' of the root component with this component containing the registry:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">// app/layout.js</span>
<span class="code-block-extension-codeLine" data-line-num="2">import StyledComponentsRegistry from &#39;./lib/registry&#39;</span>
<span class="code-block-extension-codeLine" data-line-num="3"></span>
<span class="code-block-extension-codeLine" data-line-num="4">export default function RootLayout({ children }) {</span>
<span class="code-block-extension-codeLine" data-line-num="5">  return (</span>
<span class="code-block-extension-codeLine" data-line-num="6">    <span class="xml">&lt;html&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="7">      &lt;body&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="8">        &lt;StyledComponentsRegistry&gt;{children}&lt;/StyledComponentsRegistry&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="9">      &lt;/body&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="10">    &lt;/html&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="11">  )</span>
<span class="code-block-extension-codeLine" data-line-num="12">}</span>
</code></pre>

Then you can use:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">&#39;use client&#39;;</span>
<span class="code-block-extension-codeLine" data-line-num="2"></span>
<span class="code-block-extension-codeLine" data-line-num="3">import styled from &#39;styled-components&#39;;</span>
<span class="code-block-extension-codeLine" data-line-num="4"></span>
<span class="code-block-extension-codeLine" data-line-num="5">const Container = styled.div`</span>
<span class="code-block-extension-codeLine" data-line-num="6">  display: grid;</span>
<span class="code-block-extension-codeLine" data-line-num="7">  grid-template-columns: repeat(3, minmax(0, 1fr));</span>
<span class="code-block-extension-codeLine" data-line-num="8">  gap: 1.5rem /* 24px */;</span>
<span class="code-block-extension-codeLine" data-line-num="9">`;</span>
<span class="code-block-extension-codeLine" data-line-num="10"></span>
<span class="code-block-extension-codeLine" data-line-num="11">const SkeletonInner = styled.div`</span>
<span class="code-block-extension-codeLine" data-line-num="12">  padding: 1rem /* 16px */;</span>
<span class="code-block-extension-codeLine" data-line-num="13">  background-color: rgb(24 24 27 / 0.8);</span>
<span class="code-block-extension-codeLine" data-line-num="14">  border-radius: 1rem /* 16px */;</span>
<span class="code-block-extension-codeLine" data-line-num="15">`;</span>
<span class="code-block-extension-codeLine" data-line-num="16"></span>
<span class="code-block-extension-codeLine" data-line-num="17">const SkeletonImg = styled.div`</span>
<span class="code-block-extension-codeLine" data-line-num="18">  height: 3.5rem /* 56px */;</span>
<span class="code-block-extension-codeLine" data-line-num="19">  border-radius: 0.5rem /* 8px */;</span>
<span class="code-block-extension-codeLine" data-line-num="20">  background-color: rgb(63 63 70 / 1);</span>
<span class="code-block-extension-codeLine" data-line-num="21">`;</span>
<span class="code-block-extension-codeLine" data-line-num="22"></span>
<span class="code-block-extension-codeLine" data-line-num="23">const SkeletonBtn = styled.div`</span>
<span class="code-block-extension-codeLine" data-line-num="24">  margin-top: 0.75rem /* 12px */;</span>
<span class="code-block-extension-codeLine" data-line-num="25">  width: 25%;</span>
<span class="code-block-extension-codeLine" data-line-num="26">  height: 0.75rem /* 12px */;</span>
<span class="code-block-extension-codeLine" data-line-num="27">  border-radius: 0.5rem /* 8px */;</span>
<span class="code-block-extension-codeLine" data-line-num="28">  background-color: rgb(255 0 128 / 1);</span>
<span class="code-block-extension-codeLine" data-line-num="29">`;</span>
<span class="code-block-extension-codeLine" data-line-num="30"></span>
<span class="code-block-extension-codeLine" data-line-num="31">const Skeleton = () =&gt; (</span>
<span class="code-block-extension-codeLine" data-line-num="32">  <span class="xml">&lt;SkeletonInner&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="33">    &lt;SkeletonImg /&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="34">    &lt;SkeletonBtn /&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="35">  &lt;/SkeletonInner&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="36">);</span>
<span class="code-block-extension-codeLine" data-line-num="37"></span>
<span class="code-block-extension-codeLine" data-line-num="38">export default function Page() {</span>
<span class="code-block-extension-codeLine" data-line-num="39">  return (</span>
<span class="code-block-extension-codeLine" data-line-num="40">    <span class="xml">&lt;div className=&#34;space-y-4&#34;&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="41">      &lt;h1 className=&#34;text-xl font-medium text-gray-400/80&#34;&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="42">        Styled with Styled Components</span>
<span class="code-block-extension-codeLine" data-line-num="43">      &lt;/h1&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="44">      &lt;Container&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="45">        &lt;Skeleton /&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="46">        &lt;Skeleton /&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="47">        &lt;Skeleton /&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="48">      &lt;/Container&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="49">    &lt;/div&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="50">  );</span>
<span class="code-block-extension-codeLine" data-line-num="51">}</span></code></pre>

## 7. Sass

### 7.1. Use of Sass

Sass is a well-known CSS preprocessor and needs no introduction. Next.js has built-in support for Sass files. You need to use `.scss` and `.sass` as the file suffix.

You can also use component-level Sass with CSS modules. You need to use `.module.scss` or `.module.sass` as the file suffix.

To use Sass, you need to install [sass](https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fsass%2Fsass "https://github.com/sass/sass")：

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">npm install --save-dev sass</span>
</code></pre>

### 7.2. Custom configuration

If you want to configure the Sass compiler, use the `sassOptions` option in `next.config.js`:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">// next.config.js</span>
<span class="code-block-extension-codeLine" data-line-num="2">const path = require(&#39;path&#39;)</span>
<span class="code-block-extension-codeLine" data-line-num="3"></span>
<span class="code-block-extension-codeLine" data-line-num="4">module.exports = {</span>
<span class="code-block-extension-codeLine" data-line-num="5">  sassOptions: {</span>
<span class="code-block-extension-codeLine" data-line-num="6">    includePaths: [path.join(__dirname, &#39;styles&#39;)],</span>
<span class="code-block-extension-codeLine" data-line-num="7">  },</span>
<span class="code-block-extension-codeLine" data-line-num="8">}</span>
</code></pre>

### 7.3 Sass variables

Next.js supports exporting Sass variables from CSS module files. Here is an example code:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">// app/variables.module.scss</span>
<span class="code-block-extension-codeLine" data-line-num="2">$primary-color: #64ff00;</span>
<span class="code-block-extension-codeLine" data-line-num="3"></span>
<span class="code-block-extension-codeLine" data-line-num="4">:export {</span>
<span class="code-block-extension-codeLine" data-line-num="5">  primaryColor: $primary-color;</span>
<span class="code-block-extension-codeLine" data-line-num="6">}</span>
</code></pre>

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">// app/page.js</span>
<span class="code-block-extension-codeLine" data-line-num="2">// maps to root `/` URL</span>
<span class="code-block-extension-codeLine" data-line-num="3"></span>
<span class="code-block-extension-codeLine" data-line-num="4">import variables from &#39;./variables.module.scss&#39;</span>
<span class="code-block-extension-codeLine" data-line-num="5"></span>
<span class="code-block-extension-codeLine" data-line-num="6">export default function Page() {</span>
<span class="code-block-extension-codeLine" data-line-num="7">  return <span class="xml">&lt;h1 style={{ color: variables.primaryColor }}&gt;Hello, Next.js!&lt;/h1&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="8">}</span></code></pre>
