## Preface

Markdown is a lightweight markup language that allows people to write documents in a plain text format that is easy to read and write, and then converted into a valid HTML document. It is commonly used to write content on websites and blogs. For example, when you write:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div><span class="code-block-extension-lang">markdown</span></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-markdown code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">**love** using [Next.js](https://nextjs.org/)</span>
</code></pre>

The corresponding output is:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div><span class="code-block-extension-lang">html</span></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-html code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">&lt;p&gt;I &lt;strong&gt;love&lt;/strong&gt; using &lt;a href=&#34;https://nextjs.org/&#34;&gt;Next.js&lt;/a&gt;&lt;/p&gt;</span>
</code></pre>

[MDX](https://link.juejin.cn/?target=https%3A%2F%2Fmdxjs.com%2F "https://mdxjs.com/") is a superset of Markdown. It not only supports Markdown itself, but also supports inserting JSX code into Markdown documents, and can also import components and add interactive content.

In fact, MDX can be regarded as a format that combines markdown and JSX, as shown in the following example:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div><span class="code-block-extension-lang">markdown</span></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-markdown code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1"># Hello, world!</span>
<span class="code-block-extension-codeLine" data-line-num="2"></span>
<span class="code-block-extension-codeLine" data-line-num="3"><span class="xml">&lt;div className=&#34;note&#34;&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="4">  &gt; Some notable things in a block quote!</span>
<span class="code-block-extension-codeLine" data-line-num="5"><span class="xml">&lt;/div&gt;</span></span>
</code></pre>

In this example, the title is in markdown format, and those HTML-like tags are in JSX format. Markdown focuses on writing content, and JSX focuses on adding interactivity to components. Doesn't it look great?

Next.js can support both local MDX content and dynamic server-side MDX files. The Next.js plugin converts markdown and React components to HTML.

Let's take a look at how to use MDX!

## 1. Local MDX

Local use of MDX requires the `@next/mdx` package, which gets data from local files and can process markdown and MDX. You need to create a page file with the extension `.mdx` in the `/pages` or `/app` directory. The specific configuration and usage are as follows:

### 1.1. Start configuration

Install packages related to rendering MDX:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div><span class="code-block-extension-lang">bash</span></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-bash code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">npm install @next/mdx @mdx-js/loader @mdx-js/react @types/mdx</span>
</code></pre>

Create a file named `mdx-components.js` in the root directory of the application (the parent of `app/` and `src/`). This file is required to use MDX in App Router. Without this file, it will not work properly. The code of the file is:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div><span class="code-block-extension-lang">javascript</span></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">// mdx-components.js</span>
<span class="code-block-extension-codeLine" data-line-num="2">export function useMDXComponents(components) {</span>
<span class="code-block-extension-codeLine" data-line-num="3">  return {</span>
<span class="code-block-extension-codeLine" data-line-num="4">    ...components,</span>
<span class="code-block-extension-codeLine" data-line-num="5">  }</span>
<span class="code-block-extension-codeLine" data-line-num="6">}</span>
</code></pre>

Then update the `next.config.js` file:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div><span class="code-block-extension-lang">javascript</span></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">// next.config.js</span>
<span class="code-block-extension-codeLine" data-line-num="2">const withMDX = require(&#39;@next/mdx&#39;)()</span>
<span class="code-block-extension-codeLine" data-line-num="3"></span>
<span class="code-block-extension-codeLine" data-line-num="4">/** @type {import(&#39;next&#39;).NextConfig} */</span>
<span class="code-block-extension-codeLine" data-line-num="5">const nextConfig = {</span>
<span class="code-block-extension-codeLine" data-line-num="6">  pageExtensions: [&#39;js&#39;, &#39;jsx&#39;, &#39;mdx&#39;, &#39;ts&#39;, &#39;tsx&#39;]</span>
<span class="code-block-extension-codeLine" data-line-num="7">}</span>
<span class="code-block-extension-codeLine" data-line-num="8"></span>
<span class="code-block-extension-codeLine" data-line-num="9">module.exports = withMDX(nextConfig)</span>
</code></pre>

The basic configuration is complete.

### 1.2. Basic usage

Now create an MDX page in the `/app` directory:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div><span class="code-block-extension-lang">javascript</span></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">  your-project</span>
<span class="code-block-extension-codeLine" data-line-num="2">  ├── app</span>
<span class="code-block-extension-codeLine" data-line-num="3">  │   └── my-mdx-page</span>
<span class="code-block-extension-codeLine" data-line-num="4">  │       └── page.mdx</span>
<span class="code-block-extension-codeLine" data-line-num="5">  └── package.json</span>
</code></pre>

Now you can use markdown and import React components in your MDX pages:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div><span class="code-block-extension-lang">javascript</span></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">import ComponentA from &#39;../components/a&#39;</span>
<span class="code-block-extension-codeLine" data-line-num="2"></span>
<span class="code-block-extension-codeLine" data-line-num="3"># Welcome to my MDX page!</span>
<span class="code-block-extension-codeLine" data-line-num="4"></span>
<span class="code-block-extension-codeLine" data-line-num="5">This is some **bold** and _italics_ text.</span>
<span class="code-block-extension-codeLine" data-line-num="6"></span>
<span class="code-block-extension-codeLine" data-line-num="7">This is a list in markdown:</span>
<span class="code-block-extension-codeLine" data-line-num="8"></span>
<span class="code-block-extension-codeLine" data-line-num="9">- One</span>
<span class="code-block-extension-codeLine" data-line-num="10">- Two</span>
<span class="code-block-extension-codeLine" data-line-num="11">- Three</span>
<span class="code-block-extension-codeLine" data-line-num="12"></span>
<span class="code-block-extension-codeLine" data-line-num="13">Checkout my React component:</span>
<span class="code-block-extension-codeLine" data-line-num="14"></span>
<span class="code-block-extension-codeLine" data-line-num="15"><span class="xml">&lt;ComponentA /&gt;</span></span>
</code></pre>

Open `/my-mdx-page` to view the rendered result:

![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/dca9e4b9a2cc4250ac9fbe1a06e0c4ac~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1368&h=962&s=106754&e=png&b=ffffff)

## 2. Remote MDX

If your markdown or MDX file is located elsewhere, you can dynamically obtain it on the server. There are two commonly used community packages for obtaining MDX content:

- [next-mdx-remote](https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fhashicorp%2Fnext-mdx-remote%23react-server-components-rsc--nextjs-app-directory-support "https://github.com/hashicorp/next-mdx-remote#react-server-components-rsc--nextjs-app-directory-support")
- [contentlayer](https://link.juejin.cn/?target=https%3A%2F%2Fwww.contentlayer.dev%2F "https://www.contentlayer.dev/")

Be careful when using external content, because MDX will be compiled into JavaScript and executed on the server. So you should get MDX content from a trusted source, otherwise it may lead to "remote code execution" (RCE, allowing attackers to remotely inject operating system commands or code directly into the backend server to control the backend system)

The following example uses `next-mdx-remote`:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div><span class="code-block-extension-lang">javascript</span></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">// app/my-mdx-page-remote/page.js</span>
<span class="code-block-extension-codeLine" data-line-num="2">import { MDXRemote } from &#39;next-mdx-remote/rsc&#39;</span>
<span class="code-block-extension-codeLine" data-line-num="3"></span>
<span class="code-block-extension-codeLine" data-line-num="4">// app/page.js</span>
<span class="code-block-extension-codeLine" data-line-num="5">export default function Home() {</span>
<span class="code-block-extension-codeLine" data-line-num="6">  return (</span>
<span class="code-block-extension-codeLine" data-line-num="7">    <span class="xml">&lt;MDXRemote</span></span>
<span class="code-block-extension-codeLine" data-line-num="8">      source={`# Hello World</span>
<span class="code-block-extension-codeLine" data-line-num="9"></span>
<span class="code-block-extension-codeLine" data-line-num="10">      This is from Server Components!</span>
<span class="code-block-extension-codeLine" data-line-num="11">      `}</span>
<span class="code-block-extension-codeLine" data-line-num="12">    /&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="13">  )</span>
<span class="code-block-extension-codeLine" data-line-num="14">}</span>
</code></pre>

Of course, in this example, there is no remote acquisition, but the mdx text is used directly. Open `/my-mdx-page-remote` to view the rendered MDX:

![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c53ce4d2e5c34328a318ac011ad449c3~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1106&h=418&s=44123&e=png&b=fefefe) The sample code combined with remote acquisition is:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div><span class="code-block-extension-lang">javascript</span></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">// app/my-mdx-page-remote/page.js</span>
<span class="code-block-extension-codeLine" data-line-num="2">import { MDXRemote } from &#39;next-mdx-remote/rsc&#39;</span>
<span class="code-block-extension-codeLine" data-line-num="3"></span>
<span class="code-block-extension-codeLine" data-line-num="4">export default async function RemoteMdxPage() {</span>
<span class="code-block-extension-codeLine" data-line-num="5">  // MDX 文本</span>
<span class="code-block-extension-codeLine" data-line-num="6">  const res = await fetch(&#39;https://...&#39;)</span>
<span class="code-block-extension-codeLine" data-line-num="7">  const markdown = await res.text()</span>
<span class="code-block-extension-codeLine" data-line-num="8">  return <span class="xml">&lt;MDXRemote source={markdown} /&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="9">}</span>
</code></pre>

Then you may ask, what about components? How to pass components in? Here is a sample code:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div><span class="code-block-extension-lang">javascript</span></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">// app/my-mdx-page-remote/page.js</span>
<span class="code-block-extension-codeLine" data-line-num="2">import { MDXRemote } from &#39;next-mdx-remote/rsc&#39;</span>
<span class="code-block-extension-codeLine" data-line-num="3"></span>
<span class="code-block-extension-codeLine" data-line-num="4">import ComponentA from &#39;../components/a&#39;</span>
<span class="code-block-extension-codeLine" data-line-num="5"></span>
<span class="code-block-extension-codeLine" data-line-num="6">const components = { ComponentA }</span>
<span class="code-block-extension-codeLine" data-line-num="7"></span>
<span class="code-block-extension-codeLine" data-line-num="8">export default function Home(props) {</span>
<span class="code-block-extension-codeLine" data-line-num="9">  return (</span>
<span class="code-block-extension-codeLine" data-line-num="10">    <span class="xml">&lt;MDXRemote</span></span>
<span class="code-block-extension-codeLine" data-line-num="11">      source={`Some **mdx** text, with a component &lt;ComponentA /&gt;`}</span>
<span class="code-block-extension-codeLine" data-line-num="12">      components={components}</span>
<span class="code-block-extension-codeLine" data-line-num="13">    /&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="14">  )</span>
<span class="code-block-extension-codeLine" data-line-num="15">}</span>
<span class="code-block-extension-codeLine" data-line-num="16"></span>
</code></pre>

The component code of ComponentA is very simple:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div><span class="code-block-extension-lang">javascript</span></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">// app/components/a.js</span>
<span class="code-block-extension-codeLine" data-line-num="2">export default function Page() {</span>
<span class="code-block-extension-codeLine" data-line-num="3">  return <span class="xml">&lt;span&gt;Hello World!&lt;/span&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="4">}</span>
</code></pre>

Open `/my-mdx-page-remote` to view the rendered MDX:

![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1bafac3ec8dd4b618fd6ee05242decad~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1128&h=244&s=33669&e=png&b=fefefe)

## 3. Shared layout

To share layouts between MDX pages, you can use App Router's built-in layout feature:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div><span class="code-block-extension-lang">javascript</span></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">// app/my-mdx-page/layout.js</span>
<span class="code-block-extension-codeLine" data-line-num="2">export default function MdxLayout({ children }) {</span>
<span class="code-block-extension-codeLine" data-line-num="3">  return <span class="xml">&lt;div style={{ color: &#39;blue&#39; }}&gt;{children}&lt;/div&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="4">}</span>
</code></pre>

## 4. Use plugins to expand functions

If the MDX style and functions do not meet your requirements, you may need to customize and develop plugins. In order to help you understand how to use and develop plugins, you need to first understand the principles of MDX.

Simply put, the compilation of MDX is divided into two steps, one for processing Markdown and one for processing HTML. The pseudo code for the processing is as follows:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div><span class="code-block-extension-lang">javascript</span></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">import { unified } from &#39;unified&#39;</span>
<span class="code-block-extension-codeLine" data-line-num="2">import remarkParse from &#39;remark-parse&#39;</span>
<span class="code-block-extension-codeLine" data-line-num="3">import remarkRehype from &#39;remark-rehype&#39;</span>
<span class="code-block-extension-codeLine" data-line-num="4">import rehypeSanitize from &#39;rehype-sanitize&#39;</span>
<span class="code-block-extension-codeLine" data-line-num="5">import rehypeStringify from &#39;rehype-stringify&#39;</span>
<span class="code-block-extension-codeLine" data-line-num="6"></span>
<span class="code-block-extension-codeLine" data-line-num="7">main()</span>
<span class="code-block-extension-codeLine" data-line-num="8"></span>
<span class="code-block-extension-codeLine" data-line-num="9">async function main() {</span>
<span class="code-block-extension-codeLine" data-line-num="10">  const file = await unified()</span>
<span class="code-block-extension-codeLine" data-line-num="11">    .use(remarkParse) // Convert markdown to markdown AST</span>
<span class="code-block-extension-codeLine" data-line-num="12">    .use(remarkRehype) // ConvertHTML AST</span>
<span class="code-block-extension-codeLine" data-line-num="13">    .use(rehypeSanitize) // HTML sanitization, handling of unsafe content, and prevention of XSS attacks</span>
<span class="code-block-extension-codeLine" data-line-num="14">    .use(rehypeStringify) //Convert the AST toHTML</span>
<span class="code-block-extension-codeLine" data-line-num="15">    .process(&#39;Hello, Next.js!&#39;)</span>
<span class="code-block-extension-codeLine" data-line-num="16"></span>
<span class="code-block-extension-codeLine" data-line-num="17">  console.log(String(file)) // &lt;p&gt;Hello, Next.js!&lt;/p&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="18">}</span>
</code></pre>

The tool system that processes Markdown is called [Remark](https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fremarkjs%2Fremark "https://github.com/remarkjs/remark"), and the tool system that processes HTML is called [Rehype](https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Frehypejs%2Frehype "https://github.com/rehypejs/rehype"). Remark and Rehype currently have quite a few ecological plug-ins, such as [syntax highlighting (rehype-pretty-code)](https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fatomiks%2Frehype-pretty-code "https://github.com/atomiks/rehype-pretty-code"), [title automatic linking (rehype-autolink-headings)](https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Frehypejs%2Frehype-autolink-headings "https://github.com/rehypejs/rehype-autolink-headings"), [generate directory (remark-toc)](https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fremarkjs%2Fremark-toc "https://github.com/remarkjs/remark-toc"), etc.

If you want to use these plug-ins directly, such as supporting [GFM](https://link.juejin.cn/?target=https%3A%2F%2Fgithub.github.com%2Fgfm%2F "https://github.github.com/gfm/") (GitHub Flavored Markdown, the most popular Markdown extension syntax, which provides markup syntax including tables, task lists, strikethroughs, fence codes, Emoji, etc.), the corresponding plug-in is [remark-gfm](https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fremarkjs%2Fremark-gfm "https://github.com/remarkjs/remark-gfm"), you can load the plug-in by modifying `next.config.js`.

However, because remark and rehype are both ESM (ECMAScript modules), you need to use `next.config.mjs` as the configuration file:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div><span class="code-block-extension-lang">javascript</span></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">// next.config.mjs</span>
<span class="code-block-extension-codeLine" data-line-num="2">import remarkGfm from &#39;remark-gfm&#39;</span>
<span class="code-block-extension-codeLine" data-line-num="3">import createMDX from &#39;@next/mdx&#39;</span>
<span class="code-block-extension-codeLine" data-line-num="4"></span>
<span class="code-block-extension-codeLine" data-line-num="5">/** @type {import(&#39;next&#39;).NextConfig} */</span>
<span class="code-block-extension-codeLine" data-line-num="6">const nextConfig = {</span>
<span class="code-block-extension-codeLine" data-line-num="7">  pageExtensions: [&#39;js&#39;, &#39;jsx&#39;, &#39;mdx&#39;, &#39;ts&#39;, &#39;tsx&#39;],</span>
<span class="code-block-extension-codeLine" data-line-num="8">}</span>
<span class="code-block-extension-codeLine" data-line-num="9"></span>
<span class="code-block-extension-codeLine" data-line-num="10">const withMDX = createMDX({</span>
<span class="code-block-extension-codeLine" data-line-num="11">  // 添加 markdown 插件</span>
<span class="code-block-extension-codeLine" data-line-num="12">  options: {</span>
<span class="code-block-extension-codeLine" data-line-num="13">    remarkPlugins: [remarkGfm],</span>
<span class="code-block-extension-codeLine" data-line-num="14">    rehypePlugins: [],</span>
<span class="code-block-extension-codeLine" data-line-num="15">  },</span>
<span class="code-block-extension-codeLine" data-line-num="16">})</span>
<span class="code-block-extension-codeLine" data-line-num="17"></span>
<span class="code-block-extension-codeLine" data-line-num="18">export default withMDX(nextConfig)</span>
</code></pre>

GFM adds a new strikethrough syntax:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div><span class="code-block-extension-lang">markdown</span></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-markdown code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">~~这是一段删除文字~~</span>
</code></pre>

Without the GFM plugin, it cannot be rendered as a strikethrough:

![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/fd5ee310b81346ee808066823faa9c6b~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=832&h=218&s=26014&e=png&b=fdfdfd)

After use, it will render normally:

![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/11103ae1c03e463ba3468982988402c0~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=826&h=230&s=25346&e=png&b=fefefe)

## 5. Custom elements

Normally we write markdown, for example, to write a title:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div><span class="code-block-extension-lang">markdown</span></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-markdown code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1"># header</span>
</code></pre>

The corresponding HTML output is:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div><span class="code-block-extension-lang">html</span></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-html code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">&lt;h1&gt;header&lt;/h1&gt;</span>
</code></pre>

If we want to customize the output and style, how can we achieve it?

To achieve this function, open the `mdx-components.js` file defined in the root directory of the application, and then add a custom element:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div><span class="code-block-extension-lang">javascript</span></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">// mdx-components.js</span>
<span class="code-block-extension-codeLine" data-line-num="2">import Image from &#39;next/image&#39;</span>
<span class="code-block-extension-codeLine" data-line-num="3"></span>
<span class="code-block-extension-codeLine" data-line-num="4">export function useMDXComponents(components) {</span>
<span class="code-block-extension-codeLine" data-line-num="5">  return {</span>
<span class="code-block-extension-codeLine" data-line-num="6">    h1: ({ children }) =&gt; <span class="xml">&lt;h1 style={{ fontSize: &#39;30px&#39; }}&gt;{children}&lt;/h1&gt;</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="7">    ...components,</span>
<span class="code-block-extension-codeLine" data-line-num="8">  }</span>
<span class="code-block-extension-codeLine" data-line-num="9">}</span>
</code></pre>

The effect at this time is:

![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/73f22f6b3e0d4399af5bb55cc3419b6f~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1796&h=404&s=115661&e=png&b=fefefe)

Then the question is, how do I know what tags the markdown syntax corresponds to? And which tags can be modified? You can view the MDX documentation: [mdxjs.com/table-of-co…](https://link.juejin.cn/?target=https%3A%2F%2Fmdxjs.com%2Ftable-of-components%2F "https://mdxjs.com/table-of-components/")

It should be noted that when using img, if you use it directly `![]()` syntax, loading local images, will not succeed:

![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ea5b9ea4d77c43a89f2515a5be151f00~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1802&h=344&s=83338&e=png&b=fefefe)

In order to load successfully, you need to use [remark-mdx-images](https://link.juejin.cn/?target=https%3A%2F%2Fwww.npmjs.com%2Fpackage%2Fremark-mdx-images "https://www.npmjs.com/package/remark-mdx-images") This plugin, after installing the plugin, modify `next.config.mjs`:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div><span class="code-block-extension-lang">javascript</span></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">// next.config.mjs</span>
<span class="code-block-extension-codeLine" data-line-num="2">import remarkGfm from &#39;remark-gfm&#39;</span>
<span class="code-block-extension-codeLine" data-line-num="3">import createMDX from &#39;@next/mdx&#39;</span>
<span class="code-block-extension-codeLine" data-line-num="4">import remarkMdxImages from &#34;remark-mdx-images&#34;;</span>
<span class="code-block-extension-codeLine" data-line-num="5"></span>
<span class="code-block-extension-codeLine" data-line-num="6">/** @type {import(&#39;next&#39;).NextConfig} */</span>
<span class="code-block-extension-codeLine" data-line-num="7">const nextConfig = {</span>
<span class="code-block-extension-codeLine" data-line-num="8">  pageExtensions: [&#39;js&#39;, &#39;jsx&#39;, &#39;mdx&#39;, &#39;ts&#39;, &#39;tsx&#39;],</span>
<span class="code-block-extension-codeLine" data-line-num="9">}</span>
<span class="code-block-extension-codeLine" data-line-num="10"></span>
<span class="code-block-extension-codeLine" data-line-num="11">const withMDX = createMDX({</span>
<span class="code-block-extension-codeLine" data-line-num="12">  // 添加 markdown 插件</span>
<span class="code-block-extension-codeLine" data-line-num="13">  options: {</span>
<span class="code-block-extension-codeLine" data-line-num="14">    remarkPlugins: [remarkGfm, remarkMdxImages],</span>
<span class="code-block-extension-codeLine" data-line-num="15">    rehypePlugins: [],</span>
<span class="code-block-extension-codeLine" data-line-num="16">  },</span>
<span class="code-block-extension-codeLine" data-line-num="17">})</span>
<span class="code-block-extension-codeLine" data-line-num="18"></span>
<span class="code-block-extension-codeLine" data-line-num="19">export default withMDX(nextConfig)</span>
</code></pre>

Modify again `mdx-components.js`：

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div><span class="code-block-extension-lang">javascript</span></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">// mdx-components.js</span>
<span class="code-block-extension-codeLine" data-line-num="2">import Image from &#39;next/image&#39;</span>
<span class="code-block-extension-codeLine" data-line-num="3"></span>
<span class="code-block-extension-codeLine" data-line-num="4">export function useMDXComponents(components) {</span>
<span class="code-block-extension-codeLine" data-line-num="5">  return {</span>
<span class="code-block-extension-codeLine" data-line-num="6">    h1: ({ children }) =&gt; <span class="xml">&lt;h1 style={{ fontSize: &#39;30px&#39; }}&gt;{children}&lt;/h1&gt;</span>,</span>
<span class="code-block-extension-codeLine" data-line-num="7">    img: (props) =&gt; (</span>
<span class="code-block-extension-codeLine" data-line-num="8">      <span class="xml">&lt;Image</span></span>
<span class="code-block-extension-codeLine" data-line-num="9">        sizes=&#34;100vw&#34;</span>
<span class="code-block-extension-codeLine" data-line-num="10">        style={{ width: &#39;100%&#39;, height: &#39;auto&#39; }}</span>
<span class="code-block-extension-codeLine" data-line-num="11">        {...props}</span>
<span class="code-block-extension-codeLine" data-line-num="12">      /&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="13">    ),</span>
<span class="code-block-extension-codeLine" data-line-num="14">    ...components,</span>
<span class="code-block-extension-codeLine" data-line-num="15">  }</span>
<span class="code-block-extension-codeLine" data-line-num="16">}</span>
</code></pre>

At this point the image can be loaded normally:

![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/08e534297a3045fc8991463e6e302add~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=2132&h=912&s=1167143&e=png&b=2c2c2c)

## 6. Frontmatter

Frontmatter is a YAML-like key-value structure used to store page-related data.

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div><span class="code-block-extension-lang">markdown</span></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-markdown code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">---</span>
<span class="code-block-extension-codeLine" data-line-num="2">title: 你好世界</span>
<span class="code-block-extension-codeLine" data-line-num="3">created: 2023-11-18</span>
<span class="code-block-extension-codeLine" data-line-num="4">---</span>
<span class="code-block-extension-codeLine" data-line-num="5">Hello World!</span>
</code></pre>

By default, `@next/mdx` does not support frontmatter, but the community has many solutions, such as:

- [remark-frontmatter](https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fremarkjs%2Fremark-frontmatter "https://github.com/remarkjs/remark-frontmatter")
- [gray-matter](https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fjonschlinkert%2Fgray-matter "https://github.com/jonschlinkert/gray-matter")

Let's take [remark-frontmatter](https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fremarkjs%2Fremark-frontmatter "https://github.com/remarkjs/remark-frontmatter") as an example. When paired with MDX, you also need to use [remark-mdx-frontmatter](https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fremcohaszing%2Fremark-mdx-frontmatter "https://github.com/remcohaszing/remark-mdx-frontmatter").

First install the dependencies:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div><span class="code-block-extension-lang">bash</span></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-bash code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">npm install remark-frontmatter remark-mdx-frontmatter</span>
</code></pre>

Then modify `next.config.mjs`:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div><span class="code-block-extension-lang">javascript</span></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">import remarkGfm from &#39;remark-gfm&#39;</span>
<span class="code-block-extension-codeLine" data-line-num="2">import createMDX from &#39;@next/mdx&#39;</span>
<span class="code-block-extension-codeLine" data-line-num="3">import remarkMdxImages from &#34;remark-mdx-images&#34;;</span>
<span class="code-block-extension-codeLine" data-line-num="4">import remarkFrontmatter from &#39;remark-frontmatter&#39;</span>
<span class="code-block-extension-codeLine" data-line-num="5">import remarkMdxFrontmatter from &#39;remark-mdx-frontmatter&#39;</span>
<span class="code-block-extension-codeLine" data-line-num="6"></span>
<span class="code-block-extension-codeLine" data-line-num="7">/** @type {import(&#39;next&#39;).NextConfig} */</span>
<span class="code-block-extension-codeLine" data-line-num="8">const nextConfig = {</span>
<span class="code-block-extension-codeLine" data-line-num="9">  pageExtensions: [&#39;js&#39;, &#39;jsx&#39;, &#39;mdx&#39;, &#39;ts&#39;, &#39;tsx&#39;],</span>
<span class="code-block-extension-codeLine" data-line-num="10">}</span>
<span class="code-block-extension-codeLine" data-line-num="11"></span>
<span class="code-block-extension-codeLine" data-line-num="12">const withMDX = createMDX({</span>
<span class="code-block-extension-codeLine" data-line-num="13">  // Add markdown plugin</span>
<span class="code-block-extension-codeLine" data-line-num="14">  options: {</span>
<span class="code-block-extension-codeLine" data-line-num="15">    remarkPlugins: [</span>
<span class="code-block-extension-codeLine" data-line-num="16">      remarkGfm, </span>
<span class="code-block-extension-codeLine" data-line-num="17">      remarkMdxImages,</span>
<span class="code-block-extension-codeLine" data-line-num="18">      [remarkFrontmatter],</span>
<span class="code-block-extension-codeLine" data-line-num="19">      [remarkMdxFrontmatter]</span>
<span class="code-block-extension-codeLine" data-line-num="20">    ],</span>
<span class="code-block-extension-codeLine" data-line-num="21">    rehypePlugins: [],</span>
<span class="code-block-extension-codeLine" data-line-num="22">  },</span>
<span class="code-block-extension-codeLine" data-line-num="23">})</span>
<span class="code-block-extension-codeLine" data-line-num="24"></span>
<span class="code-block-extension-codeLine" data-line-num="25">export default withMDX(nextConfig)</span>
</code></pre>

The basic configuration is complete, but please note that the effects of these two plug-ins are not like the md document we wrote in VuePress. The data in frontmatter can be used to define the page title and other data. Now we create an mdx document:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div><span class="code-block-extension-lang">markdown</span></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-markdown code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">---</span>
<span class="code-block-extension-codeLine" data-line-num="2">title: </span>
<span class="code-block-extension-codeLine" data-line-num="3">author:</span>
<span class="code-block-extension-codeLine" data-line-num="4">---</span>
<span class="code-block-extension-codeLine" data-line-num="5"></span>
<span class="code-block-extension-codeLine" data-line-num="6"># header1</span>
</code></pre>

The page will not change. The page title will not be changed to the title set in frontmatter, and the HTML tag `<meta name="author" content="冴羽">` will not be output. The purpose of these two plugins is to store metadata. The converted JS description is:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div><span class="code-block-extension-lang">javascript</span></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">export const frontmatter = {</span>
<span class="code-block-extension-codeLine" data-line-num="2">  title: &#39;&#39;，</span>
<span class="code-block-extension-codeLine" data-line-num="3">  author: &#39;&#39;</span>
<span class="code-block-extension-codeLine" data-line-num="4">}</span>
<span class="code-block-extension-codeLine" data-line-num="5"></span>
<span class="code-block-extension-codeLine" data-line-num="6">export default function MDXContent() {</span>
<span class="code-block-extension-codeLine" data-line-num="7">  return <span class="xml">&lt;h1&gt;header1&lt;/h1&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="8">}</span>
</code></pre>

That is to say, after using these two plugins, if you import this MDX document, there will be a frontmatter export object, which allows you to get the value set by the frontmatter format in the MDX document, that's all. Let's create a new `page.js` to verify it:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div><span class="code-block-extension-lang">javascript</span></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">import {frontmatter} from &#39;../my-mdx-page/page.mdx&#39;</span>
<span class="code-block-extension-codeLine" data-line-num="2"></span>
<span class="code-block-extension-codeLine" data-line-num="3">export default function Page() {</span>
<span class="code-block-extension-codeLine" data-line-num="4">  console.log(frontmatter)</span>
<span class="code-block-extension-codeLine" data-line-num="5">  return  <span class="xml">&lt;h1&gt;Hello World!&lt;/h1&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="6">}</span>
</code></pre>

You can see the output in the command line:

![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/da51d562f2404aeeba1a7dc571c10298~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=620&h=56&s=53556&e=png&b=020509)

Then you may wonder, what is the use of this?

This can provide a lot of convenience for our development. Imagine that we develop a blog function and create multiple MDX documents in the `contents` folder as our blog content. When we visit, for example, `article/1`, we import the MDX document of the corresponding id, obtain the metadata, and render some common display content, such as title, author, update time, tags, etc. Isn't this a very practical function~

Of course, this is a bit abstract. Let's write a simple demo. The file directory structure is as follows:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div><span class="code-block-extension-lang">javascript</span></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">  your-project</span>
<span class="code-block-extension-codeLine" data-line-num="2">  ├── app</span>
<span class="code-block-extension-codeLine" data-line-num="3">  │   └── content</span>
<span class="code-block-extension-codeLine" data-line-num="4">  │       └── 1.mdx</span>
<span class="code-block-extension-codeLine" data-line-num="5">  │   └── article</span>
<span class="code-block-extension-codeLine" data-line-num="6">  │       └── [id]</span>
<span class="code-block-extension-codeLine" data-line-num="7">	│       		└── page.js</span>
<span class="code-block-extension-codeLine" data-line-num="8">  └── package.json</span>
</code></pre>

The content of `app/content/1.mdx` is as follows:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div><span class="code-block-extension-lang">markdown</span></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-markdown code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">---</span>
<span class="code-block-extension-codeLine" data-line-num="2">title: Next.js </span>
<span class="code-block-extension-codeLine" data-line-num="3">author: </span>
<span class="code-block-extension-codeLine" data-line-num="4">---</span>
<span class="code-block-extension-codeLine" data-line-num="5"></span>
<span class="code-block-extension-codeLine" data-line-num="6"># First level heading</span>
<span class="code-block-extension-codeLine" data-line-num="7"></span>
<span class="code-block-extension-codeLine" data-line-num="8">This is the main content</span>
</code></pre>

This is the specific content of the article we want to obtain. The code of `article/[id]/page.js` is as follows:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div><span class="code-block-extension-lang">javascript</span></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">// article/[id]/page.js</span>
<span class="code-block-extension-codeLine" data-line-num="2">export default async function Page({ params: {id} }) {</span>
<span class="code-block-extension-codeLine" data-line-num="3">  const articleModule = await import(`../../content/${id}.mdx`);</span>
<span class="code-block-extension-codeLine" data-line-num="4">  const { default: Component, frontmatter: {title, author} } = articleModule;</span>
<span class="code-block-extension-codeLine" data-line-num="5"></span>
<span class="code-block-extension-codeLine" data-line-num="6">  return (</span>
<span class="code-block-extension-codeLine" data-line-num="7">    <span class="xml">&lt;main&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="8">       &lt;div&gt;：{title}&lt;/div&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="9">       &lt;div&gt;：{author}&lt;/div&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="10">       &lt;Component /&gt; </span>
<span class="code-block-extension-codeLine" data-line-num="11">    &lt;/main&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="12">  )</span>
<span class="code-block-extension-codeLine" data-line-num="13">}</span>
</code></pre>

In this example, we get the module content through import(), and then deconstruct the frontmatter object and page content components. Open `http://localhost:3000/article/1`, and the rendering result is:

![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b091f71112014377ae32069c175069c8~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1076&h=480&s=53560&e=png&b=fefefe)

Of course, if you are not so passionate about frontmatter, you can actually export a meta object directly in the `.mdx` file. The sample code is as follows:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div><span class="code-block-extension-lang">javascript</span></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">export const meta = {</span>
<span class="code-block-extension-codeLine" data-line-num="2">  title: &#39;Next.js 小册&#39;,</span>
<span class="code-block-extension-codeLine" data-line-num="3">  author: &#39;冴羽&#39;</span>
<span class="code-block-extension-codeLine" data-line-num="4">}</span>
<span class="code-block-extension-codeLine" data-line-num="5"></span>
<span class="code-block-extension-codeLine" data-line-num="6"># 一级标题</span>
<span class="code-block-extension-codeLine" data-line-num="7"></span>
<span class="code-block-extension-codeLine" data-line-num="8">这是正文内容</span>
</code></pre>

Modify the code of `article/[id]/page.js` (replace frontmatter with meta):

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div><span class="code-block-extension-lang">javascript</span></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">export default async function Page({ params: {id} }) {</span>
<span class="code-block-extension-codeLine" data-line-num="2">  const articleModule = await import(`../../content/${id}.mdx`);</span>
<span class="code-block-extension-codeLine" data-line-num="3">  const { default: Component, meta: {title, author} } = articleModule;</span>
<span class="code-block-extension-codeLine" data-line-num="4"></span>
<span class="code-block-extension-codeLine" data-line-num="5">  return (</span>
<span class="code-block-extension-codeLine" data-line-num="6">    <span class="xml">&lt;main&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="7">       &lt;div&gt;：{title}&lt;/div&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="8">       &lt;div&gt;：{author}&lt;/div&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="9">       &lt;Component /&gt; </span>
<span class="code-block-extension-codeLine" data-line-num="10">    &lt;/main&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="11">  )</span>
<span class="code-block-extension-codeLine" data-line-num="12">}</span>
</code></pre>

It can also render normally:

![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/14cf9aeadd14487f9153eb50bfd804d9~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=906&h=460&s=50538&e=png&b=fefefe)

So it depends on whether you want to use the Frontmatter format.

## 7. Use the Rust-based MDX compiler

Next.js supports an MDX compiler written in Rust. This compiler is still experimental and is not recommended for production environments. But if you want to try this new compiler, enable the configuration in `next.config.js`:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div><span class="code-block-extension-lang">javascript</span></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">// next.config.js</span>
<span class="code-block-extension-codeLine" data-line-num="2">module.exports = withMDX({</span>
<span class="code-block-extension-codeLine" data-line-num="3">  experimental: {</span>
<span class="code-block-extension-codeLine" data-line-num="4">    mdxRs: true,</span>
<span class="code-block-extension-codeLine" data-line-num="5">  },</span>
<span class="code-block-extension-codeLine" data-line-num="6">})</span></code></pre>
