##Preface

This article introduces three main contents: \* _ environment variables _ _, _ _ path aliases _ _, and _ _ src directory _ \*, mainly focusing on the use of environment variables. Next.js provides a more powerful and convenient way to use environment variables, let's take a look.

## 1. environment variable

###1.1 Concept Introduction

The so-called environment variables refer to [ Baike's explanation](https://link.juejin.cn/?target=https%3A%2F%2Fbaike.baidu.com%2Fitem%2F%25E7%258E%25AF%25E5%25A2%2583%25E5%258F%2598%25E9%2587%258F%2F1730949 "https://baike.baidu.com/item/%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F/1730949")：

> Environment variables generally refer to some parameters used in the operating system to specify the operating environment, such as temporary folder location and system folder location.
>
> An environment variable is an object with a specific name in an operating system that contains information that one or more applications will use. For example, in the path environment variable of Windows and DOS operating systems, when the system is required to run a program without telling it the complete path where the program is located, in addition to searching for the program in the current directory, the system should also search for the path specified in the path. Users can better run processes by setting environment variables.

Simply put, if we imagine an operating system as a language, such as JavaScript, where various programs correspond to declared functions, and environment variables correspond to global variables in JavaScript. These variables can be used by various functions (programs).

####Related commands

Our common 'PATH' is just one of the environment variables. Taking the MacOS system as an example (the following commands are all in MacOS and may differ in Windows), we can enter 'printenv' on the command line to view all environment variables:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-bash code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">printenv</span>
</code></pre>

The output result is as follows:

![There are still many, so I won't describe them one by one](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bc1710b7fbfd4cfe89e208529c99d649~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=782&h=250&s=43040&e=png&b=0a0a0a)

It can be seen that the naming of environment variables is generally all capitalized.

If you want to view a specific environment variable, you can use 'printenv' or 'echo':

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-bash code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">// way 1</span>
<span class="code-block-extension-codeLine" data-line-num="2">printenv PATH</span>
<span class="code-block-extension-codeLine" data-line-num="3"></span>
<span class="code-block-extension-codeLine" data-line-num="4">// way 2</span>
<span class="code-block-extension-codeLine" data-line-num="5">echo $PATH</span>
</code></pre>

If you want to add or modify an environment variable, you can use the 'export' command:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-bash code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">// 1. config</span>
<span class="code-block-extension-codeLine" data-line-num="2">export YAYUCUSTOM=yayu</span>
<span class="code-block-extension-codeLine" data-line-num="3">// 2. prite</span>
<span class="code-block-extension-codeLine" data-line-num="4">echo $YAYUCUSTOM</span>
</code></pre>

However, using this method has a temporary effect and will only take effect during the current login. Closing the command line and restarting it will be ineffective, but sometimes this is enough. For example, we see this configuration in 'package. json':

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">&#34;scripts&#34;: {</span>
<span class="code-block-extension-codeLine" data-line-num="2">    &#34;dev&#34;: &#34;export NODE_ENV=development &amp;&amp; node index.js&#34;,</span>
<span class="code-block-extension-codeLine" data-line-num="3">    &#34;prod&#34;: &#34;export NODE_ENV=production &amp;&amp; node index.js&#34;</span>
<span class="code-block-extension-codeLine" data-line-num="4">}</span>
</code></pre>

`You can use 'process. env' in index. js NODE-ENV ` Get the value of the set 'NODE-ENV':

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">// The printed results vary depending on the set values</span>
<span class="code-block-extension-codeLine" data-line-num="2">console.log(process.env.NODE_ENV)</span>
</code></pre>

How to modify a certain environment variable for a long time? This is a bit complicated, as there are many files that can modify environment variables, which may vary depending on the system and its version. Taking Mac's bash as an example, the order of files is:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">/etc/profile</span>
<span class="code-block-extension-codeLine" data-line-num="2">/etc/paths </span>
<span class="code-block-extension-codeLine" data-line-num="3">/etc/paths.d/</span>
<span class="code-block-extension-codeLine" data-line-num="4">~/.bash_profile </span>
<span class="code-block-extension-codeLine" data-line-num="5">~/.bash_login</span>
<span class="code-block-extension-codeLine" data-line-num="6">~/.profile</span>
<span class="code-block-extension-codeLine" data-line-num="7">~/.bashrc</span>
</code></pre>

Among them, directories starting with '/etc' are system level environment variable definitions, while others are user level environment variable definitions. Generally speaking, using 'bash' suggests modifying '~/. bash_profile' and using 'zsh' suggests modifying '~/. zshrc'.

Mac uses' zsh 'or' bash 'as the command-line interpreter for logging in to Shell and interactive Shell. Starting from macOS Catalina, Mac uses' zsh 'as the default login shell and interactive shell` Bash is the default shell in macOS Mojave and earlier versions.

Using 'bash':

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-bash code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">// 1. edit file</span>
<span class="code-block-extension-codeLine" data-line-num="2">vim ~/.bash_profile</span>
<span class="code-block-extension-codeLine" data-line-num="3">// 2. add file</span>
<span class="code-block-extension-codeLine" data-line-num="4">export YAYU_CUSOTM=yayu</span>
<span class="code-block-extension-codeLine" data-line-num="5">// 3. Use the wq command to exit the save and execute to make it effective</span>
<span class="code-block-extension-codeLine" data-line-num="6">source  ~/.bash_profile</span>
<span class="code-block-extension-codeLine" data-line-num="7">// 4. View effective</span>
<span class="code-block-extension-codeLine" data-line-num="8">echo $YAYU_CUSOTM</span>
</code></pre>

use `zsh`：

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-bash code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">// 1. edit file</span>
<span class="code-block-extension-codeLine" data-line-num="2">vim  ~/.zshrc</span>
<span class="code-block-extension-codeLine" data-line-num="3">// 2. add content </span>
<span class="code-block-extension-codeLine" data-line-num="4">export YAYU_CUSOTM=yayu</span>
<span class="code-block-extension-codeLine" data-line-num="5">// 3. Use the wq command to exit the save and execute it to take effect</span>
<span class="code-block-extension-codeLine" data-line-num="6">source  ~/.zshrc</span>
<span class="code-block-extension-codeLine" data-line-num="7">// 4. look action</span>
<span class="code-block-extension-codeLine" data-line-num="8">echo $YAYU_CUSOTM</span>
</code></pre>

If you encounter a problem with the shell you are using, which is valid at that time and will fail after restarting the terminal, it may be due to an issue with the shell you are using. Check the current shell you are using:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-bash code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">echo $SHELL</span>
</code></pre>

Switch to 'zsh' or 'bash' (restart the terminal after executing the command):

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-bash code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">// switch zsh</span>
<span class="code-block-extension-codeLine" data-line-num="2">chsh -s /bin/zsh</span>
<span class="code-block-extension-codeLine" data-line-num="3">// switch bash</span>
<span class="code-block-extension-codeLine" data-line-num="4">chsh -s /bin/bash</span>
</code></pre>

#### process.env

Nodejs provides the 'process. env' API to return objects containing the user environment. Simply put, this is a method provided by Nodejs to retrieve environment variables from a node. An example of this object is as follows:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">{</span>
<span class="code-block-extension-codeLine" data-line-num="2">  TERM: &#39;xterm-256color&#39;,</span>
<span class="code-block-extension-codeLine" data-line-num="3">  SHELL: &#39;/usr/local/bin/bash&#39;,</span>
<span class="code-block-extension-codeLine" data-line-num="4">  USER: &#39;maciej&#39;,</span>
<span class="code-block-extension-codeLine" data-line-num="5">  PATH: &#39;~/.bin/:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin&#39;,</span>
<span class="code-block-extension-codeLine" data-line-num="6">  PWD: &#39;/Users/maciej&#39;,</span>
<span class="code-block-extension-codeLine" data-line-num="7">  EDITOR: &#39;vim&#39;,</span>
<span class="code-block-extension-codeLine" data-line-num="8">  SHLVL: &#39;1&#39;,</span>
<span class="code-block-extension-codeLine" data-line-num="9">  HOME: &#39;/Users/maciej&#39;,</span>
<span class="code-block-extension-codeLine" data-line-num="10">  LOGNAME: &#39;maciej&#39;,</span>
<span class="code-block-extension-codeLine" data-line-num="11">  _: &#39;/usr/local/bin/node&#39;</span>
<span class="code-block-extension-codeLine" data-line-num="12">}</span></code></pre>

### 1.2 Next.js Implementation

It is more convenient to add environment variables in Next.js because Next.js has built-in support for environment variables. There are two ways to use environment variables:

1. Load environment variables through `.env.local`
2. Get environment variables in the browser through the `NEXT_PUBLIC_` prefix

#### .env.local Load environment variables

Next.js supports loading environment variables from `.env.local` to `process.env`. Now we create a `.env.local` file in the project root directory (note that it is the root directory, not the `/src` directory)

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">DB_HOST=localhost</span>
<span class="code-block-extension-codeLine" data-line-num="2">DB_USER=myuser</span>
<span class="code-block-extension-codeLine" data-line-num="3">DB_PASS=mypassword</span>
</code></pre>

Now we can get this value through `process.env` in the server component or route handler:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">// app/page.js</span>
<span class="code-block-extension-codeLine" data-line-num="2">export default function Page() {</span>
<span class="code-block-extension-codeLine" data-line-num="3">  console.log(process.env.DB_HOST)</span>
<span class="code-block-extension-codeLine" data-line-num="4">  return <span class="xml">&lt;h1&gt;Hello World!&lt;/h1&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="5">}</span>
</code></pre>

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">// app/api/route.js</span>
<span class="code-block-extension-codeLine" data-line-num="2">export async function GET() {</span>
<span class="code-block-extension-codeLine" data-line-num="3">  const db = await myDB.connect({</span>
<span class="code-block-extension-codeLine" data-line-num="4">    host: process.env.DB_HOST,</span>
<span class="code-block-extension-codeLine" data-line-num="5">    username: process.env.DB_USER,</span>
<span class="code-block-extension-codeLine" data-line-num="6">    password: process.env.DB_PASS,</span>
<span class="code-block-extension-codeLine" data-line-num="7">  })</span>
<span class="code-block-extension-codeLine" data-line-num="8">  // ...</span>
<span class="code-block-extension-codeLine" data-line-num="9">}</span>
</code></pre>

It is so convenient to use. Next.js also supports multi-line variables, the sample code is as follows:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1"># .env.local</span>
<span class="code-block-extension-codeLine" data-line-num="2"></span>
<span class="code-block-extension-codeLine" data-line-num="3"># Direct line break</span>
<span class="code-block-extension-codeLine" data-line-num="4">PRIVATE_KEY=&#34;-----BEGIN RSA PRIVATE KEY-----</span>
<span class="code-block-extension-codeLine" data-line-num="5">...</span>
<span class="code-block-extension-codeLine" data-line-num="6">Kh9NV...</span>
<span class="code-block-extension-codeLine" data-line-num="7">...</span>
<span class="code-block-extension-codeLine" data-line-num="8">-----END DSA PRIVATE KEY-----&#34;</span>
<span class="code-block-extension-codeLine" data-line-num="9"></span>
<span class="code-block-extension-codeLine" data-line-num="10"># also can use `\n`</span>
<span class="code-block-extension-codeLine" data-line-num="11">PRIVATE_KEY=&#34;-----BEGIN RSA PRIVATE KEY-----\nKh9NV...\n-----END DSA PRIVATE KEY-----\n&#34;</span>
</code></pre>

Nxt.js also supports using `$` to refer to other variables. For example:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">TWITTER_USER=nextjs</span>
<span class="code-block-extension-codeLine" data-line-num="2">TWITTER_URL=https://twitter.com/$TWITTER_USER</span>
</code></pre>

In this example, the value of `process.env.TWITTER_URL` is `https://twitter.com/nextjs`.

If you want to use a value with `$`, just escape it with `\$`.

#### Get environment variables in the browser

As mentioned earlier, `process.env` is an API provided by Nodejs to get user environment variable objects. In other words, variables normally set in `.env.local` cannot be obtained on the browser side.

In order to allow the browser to also obtain the values ​​in the environment variables, Next.js can inline the values ​​into the client's js bundle during the build, replacing all hard-coded uses of `process.env.[variable]`. However, in order to tell Next.js which values ​​are accessible to the browser, you need to add the `NEXT_PUBLIC_` prefix to the variable, for example:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-bash code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">NEXT_PUBLIC_ANALYTICS_ID=abcdefghijk</span>
</code></pre>

Now we can get it through `process.env.NEXT_PUBLIC_ANALYTICS_ID`:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">&#39;use client&#39;;</span>
<span class="code-block-extension-codeLine" data-line-num="2">// app/page.js</span>
<span class="code-block-extension-codeLine" data-line-num="3">export default function Page() {</span>
<span class="code-block-extension-codeLine" data-line-num="4">  return <span class="xml">&lt;h1 onClick={() =&gt; {</span></span>
<span class="code-block-extension-codeLine" data-line-num="5">    console.log(process.env.NEXT_PUBLIC_ANALYTICS_ID)</span>
<span class="code-block-extension-codeLine" data-line-num="6">  }}&gt;Hello World!&lt;/h1&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="7">}</span>
</code></pre>

If there is no `NEXT_PUBLIC_` prefix, the value obtained when clicking normally will be `undefined`. After adding the `NEXT_PUBLIC_` prefix, you can get the correct value. However, you must remember the principle here. In fact, when building, all the values ​​with the `NEXT_PUBLIC_` prefix are replaced. That is, in the code, the code for the click event has become:

![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3754960b8c1b4627b52b863003af5d47~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=640&h=252&s=38114&e=png&b=282828)

Also note that dynamically looked-up values ​​will not be inlined, for example:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">// Variables are used, will not be inlined, and will not take effect</span>
<span class="code-block-extension-codeLine" data-line-num="2">const varName = &#39;NEXT_PUBLIC_ANALYTICS_ID&#39;</span>
<span class="code-block-extension-codeLine" data-line-num="3">setupAnalyticsService(process.env[varName])</span>
<span class="code-block-extension-codeLine" data-line-num="4"></span>
<span class="code-block-extension-codeLine" data-line-num="5">// Variables are used, will not be inlined, and will not take effect</span>
<span class="code-block-extension-codeLine" data-line-num="6">const env = process.env</span>
<span class="code-block-extension-codeLine" data-line-num="7">setupAnalyticsService(env.NEXT_PUBLIC_ANALYTICS_ID)</span>
</code></pre>

#### Default environment variables

Usually a `.env.local` file is enough, but sometimes you may want to add some default values ​​in `development` (`next dev`) or `production` (`next start`) environments.

Next.js supports setting default values ​​in `.env` (all environments), `.env.development` (development environment), and `.env.production` (production environment).

`.env.local` will override these default values.

Note: `.env`, `.env.development`, `.env.production` are used to set default values. All these files can be put in the repository, but `.env*.local` should be added to `.gitignore` because they may involve some confidential information.

In addition, if the environment variable NODE_ENV is not set, when executing `next dev`, Next.js will automatically assign `NODE_DEV` to `development`, and to `production` for other commands. That is, when executing `next dev` or other commands, get `process.env.NODE_ENV` has a value, which is automatically assigned by Next.js to help developers distinguish between development environments.

#### Test environment variables

In addition to the `development` environment and the `production` environment, there is a third option, the `test` environment. This is when using testing tools such as `jest` or `cypress`, to set specific environment variables for testing purposes.

Usage is similar to the development environment and production environment. Create a `.env.test` file for the test environment, but unlike the development environment and production environment, the test environment will not load the values ​​in `.env.local`, so that everyone can produce the same test results. These default values ​​will be used when `NODE_DEV` is set to `test`.

#### Environment variable loading order

Environment variables are searched in order. Once found, the search will be terminated and no further search will be performed. The order is:

1. `process.env`
2. `.env.$(NODE_ENV).local`
3. `.env.local` (will not be searched when `NODE_ENV` is `test`)
4. `.env.$(NODE_ENV)`
5. `.env`

For example, if you set `NODE_ENV` to `development` in `.env.development.local` and `.env`, the value in `.env.development.local` will be used in this order.

## 2. Absolute address import and module path alias

The 'tsconfig. json' and 'jsconfig. json' files in NextJS support setting options for 'paths' and' baseURL '.

These configurations will help you import modules more conveniently, for example:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">// before</span>
<span class="code-block-extension-codeLine" data-line-num="2">import { Button } from &#39;../../../components/button&#39;</span>
<span class="code-block-extension-codeLine" data-line-num="3"></span>
<span class="code-block-extension-codeLine" data-line-num="4">// after</span>
<span class="code-block-extension-codeLine" data-line-num="5">import { Button } from &#39;@/components/button&#39;</span>
</code></pre>

### 2.1. Absolute address import

`The baseURL configuration option allows you to import directly from the project root directory. The usage example is as follows:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">// tsconfig.json or jsconfig.json</span>
<span class="code-block-extension-codeLine" data-line-num="2">{</span>
<span class="code-block-extension-codeLine" data-line-num="3">  &#34;compilerOptions&#34;: {</span>
<span class="code-block-extension-codeLine" data-line-num="4">    &#34;baseUrl&#34;: &#34;.&#34;</span>
<span class="code-block-extension-codeLine" data-line-num="5">  }</span>
<span class="code-block-extension-codeLine" data-line-num="6">}</span>
</code></pre>

We declare 'baseURL' as'. ', which is the root directory of the project. Now we will create a new component in the 'components' folder under the root directory:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">// components/button.js</span>
<span class="code-block-extension-codeLine" data-line-num="2">export default function Button() {</span>
<span class="code-block-extension-codeLine" data-line-num="3">  return <span class="xml">&lt;button&gt;Click me&lt;/button&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="4">}</span>
</code></pre>

Now we import the component without using relative addresses. It will be very convenient when nested with multiple layers to introduce the component:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">// app/page.js</span>
<span class="code-block-extension-codeLine" data-line-num="2">import Button from &#39;/components/button&#39;</span>
<span class="code-block-extension-codeLine" data-line-num="3"></span>
<span class="code-block-extension-codeLine" data-line-num="4">export default function HomePage() {</span>
<span class="code-block-extension-codeLine" data-line-num="5">  return (</span>
<span class="code-block-extension-codeLine" data-line-num="6">    <span class="xml">&lt;&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="7">      &lt;h1&gt;Hello World&lt;/h1&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="8">      &lt;Button /&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="9">    &lt;/&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="10">  )</span>
<span class="code-block-extension-codeLine" data-line-num="11">}</span></code></pre>
