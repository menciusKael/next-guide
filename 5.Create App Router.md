## Preface

During actual project development, some routing scenarios will be more complex. For example, there are many articles in the database, and it is impossible for us to define routes one by one. What should we do at this time? When organizing code, some routes are used for mobile terminals and some routes are used for PC terminals. How should I organize the code? How to render the page conditionally, such as displaying the login page when unauthorized? How to make the same route display different content according to different scenarios?

In this article, we will solve these problems one by one. In this article, you will feel the powerful routing function of App Router.

## 1. Dynamic Routes

Sometimes, you cannot know the routing address in advance, such as displaying the article content corresponding to the id based on the id parameter in the URL. There are so many articles that it is impossible for us to define routes one by one. In this case, dynamic routing is needed.

### 1.1. [folderName]

To use dynamic routing, you need to enclose the folder name in square brackets, such as `[id]`, `[slug]`. The name of this route will be passed as the `params` prop **layout** 、 **page** 、 **[route handler](https://juejin.cn/book/7307859898316881957/section/7308914343129645065#heading-4 "https://juejin.cn/book/7307859898316881957/section/7308914343129645065#heading-4")** and **[generateMetadata](https://juejin.cn/book/7307859898316881957/section/7309079119902277669#heading-3 "https://juejin.cn/book/7307859898316881957/section/7309079119902277669#heading-3")** function。

For example, we create a new folder named `[slug]` in the `app/blog` directory, and create a new `page.js` file in the folder. The code is as follows:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">// app/blog/[slug]/page.js</span>
<span class="code-block-extension-codeLine" data-line-num="2">export default function Page({ params }) {</span>
<span class="code-block-extension-codeLine" data-line-num="3">  return <span class="xml">&lt;div&gt;My Post: {params.slug}&lt;/div&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="4">}</span>
</code></pre>

The effect is as follows:

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/88ee11229ac6473682f4f4344a34a285~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=690&h=208&s=24236&e=png&b=000000)

When you visit `/blog/a`, the value of `params` is `{ slug: 'a' }`.

When you visit `/blog/yayu`, the value of `params` is `{ slug: 'yayu' }`.

And so on.

### 1.2. [...folderName]

When naming a folder, if you add an ellipse inside the square brackets, such as `[...folderName]`, this means that all following routing fragments are captured.

In other words, `app/shop/[...slug]/page.js` will match `/shop/clothes`, as well as `/shop/clothes/tops`, `/shop/clothes/tops/t -shirts` and so on.

For example, the code of `app/shop/[...slug]/page.js` is as follows:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">// app/shop/[...slug]/page.js</span>
<span class="code-block-extension-codeLine" data-line-num="2">export default function Page({ params }) {</span>
<span class="code-block-extension-codeLine" data-line-num="3">  return <span class="xml">&lt;div&gt;My Shop: {JSON.stringify(params)}&lt;/div&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="4">}</span>
</code></pre>

The effect is as follows:

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/90e8b8aa9599485b99832890b9895ac4~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=726&h=206&s=28238&e=png&b=000000)

When you access `/shop/a`, the value of `params` is `{ slug: ['a'] }`.

When you access `/shop/a/b`, the value of `params` is `{ slug: ['a', 'b'] }`.

When you access `/shop/a/b/c`, the value of `params` is `{ slug: ['a', 'b', 'c'] }`.

And so on.

### 1.3. [[...folderName]]

**When naming a folder, if you add an ellipsis within the square brackets, such as `[[...folderName]]`, this means that all following routing fragments are optionally captured.**

In other words, `app/shop/[[...slug]]/page.js` will match `/shop`, as well as `/shop/clothes`, `/shop/clothes/tops`, `/ shop/clothes/tops/t-shirts` etc.

The difference between it and the previous one is that routes without parameters will also be matched (such as `/shop`)

For example, the code of `app/shop/[[...slug]]/page.js` is as follows:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">// app/shop/[[...slug]]/page.js</span>
<span class="code-block-extension-codeLine" data-line-num="2">export default function Page({ params }) {</span>
<span class="code-block-extension-codeLine" data-line-num="3">  return <span class="xml">&lt;div&gt;My Shop: {JSON.stringify(params)}&lt;/div&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="4">}</span>
</code></pre>

The effect is as follows:

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/788b14ff953e4ecaac29c87301406ec9~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=702&h=210&s=22349&e=png&b=000000)

When you visit `/shop`, the value of params is `{}`.

When you access `/shop/a`, the value of params is `{ slug: ['a'] }`.

When you access `/shop/a/b`, the value of params is `{ slug: ['a', 'b'] }`.

When you access `/shop/a/b/c`, the value of params is `{ slug: ['a', 'b', 'c'] }`.

And so on.

## 2. Route groups

In the `app` directory, folder names are usually mapped to URLs, but you can mark folders as routing groups to prevent folder names from being mapped to URLs.

Using route groups, you can logically group routes and project files without affecting the URL path structure. Routing groups can be used for example:

1. Group routes by site, intent, team, etc.
2. Create multiple layouts in the same level, even create multiple root layouts

So how to mark it? Just enclose the folder in parentheses, like `(dashboard)`.

Some examples:

### 2.1. Group logically

**Group routes logically without affecting URL paths:**

![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/01f171f5820742ba9a017c99b15a3fd7~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1600&h=930&s=471042&e=png&b=171717)

You'll notice that the parenthesized folders (`(marketing)` and `(shop)` in the image above) are omitted from the final URL.

### 2.2. Create different layouts

**With routing groups, you can create different layouts even at the same level:**

![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4039b04e7b244f13aeaa4eca7482fd48~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1600&h=930&s=466548&e=png&b=171717)

In this example, `/account`, `/cart`, and `/checkout` are all at the same level. But `/account` and `/cart` use the `/app/(shop)/layout.js` layout and `app/layout.js` layout, and `/checkout` uses `app/layout.js`

### 2.3. Create multiple root layouts

**Create multiple root layouts:**

![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ab457a10df414024bfcc33dad6d7641d~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1600&h=687&s=335556&e=png&b=151515)

To create multiple root layouts, you need to delete the `app/layout.js` file and create a `layout.js` file for each group. When creating, please note that because it is the root layout, there must be `<html>` and `<body>` tags.

This function is very practical. For example, if you put the front-end purchase page and the back-end management page in one project, one on the C side and one on the B side, the layout of the two projects will definitely be different. With the help of routing groups, you can easily distinguish them.

A few more points:

1. The naming of routing groups has no special meaning other than for organization. They do not affect URL paths.
2. Be careful not to resolve to the same URL path. For example, because routing groups do not affect URL paths, both `(marketing)/about/page.js` and `(shop)/about/page.js` will be resolved to `/about`, which will cause an error.
3. When creating multiple root layouts, because the top-level `app/layout.js` file is deleted, an error will be reported when accessing `/`, so `app/page.js` needs to be defined in one of the routing groups.
4. Cross-root layout navigation will cause the page to be completely reloaded, such as `/cart` using the `app/(shop)/layout.js` root layout and jumping to the `app/(marketing)/layout.js` root Layout `/blog` will cause the page to reload (full page load).

Note: Problems may arise when using `app/not-found.js` when defining multiple root layouts.

## 3. Parallel Routes

Parallel routes allow you to render one or more pages (similar to the Vue slot function) in the same layout at the same layout.

### 3.1. Uses 1: Condition rendering

For example, in the background management page, you need to display the team (Team) and data analysis pages at the same time::

![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/23506139d1874086bc21c20fcd1cd644~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1600&h=952&s=465044&e=png&b=1a1a1a)

The way to use parallel routing is to name the folder starting with `@`. For example, in the picture above, two slots `@team` and `@analytics` are defined.

Slots are passed as props to the shared parent layout. In the picture above, `app/layout.js` gets the contents of the `@team` and `@analytics` slots from props and renders them in parallel with children:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-js code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">// app/layout.js</span>
<span class="code-block-extension-codeLine" data-line-num="2"></span>
<span class="code-block-extension-codeLine" data-line-num="3">export default function Layout({ children, team, analytics }) {</span>
<span class="code-block-extension-codeLine" data-line-num="4">  return (</span>
<span class="code-block-extension-codeLine" data-line-num="5">    <span class="xml">&lt;&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="6">      {children}</span>
<span class="code-block-extension-codeLine" data-line-num="7">      {team}</span>
<span class="code-block-extension-codeLine" data-line-num="8">      {analytics}</span>
<span class="code-block-extension-codeLine" data-line-num="9">    &lt;/&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="10">  )</span>
<span class="code-block-extension-codeLine" data-line-num="11">}</span>
</code></pre>

Note: It can also be seen from this picture that the `children` prop is actually an implicit slot, and `/app/page.js` is equivalent to `app/@children/page.js`.

In addition to having them displayed at the same time, you can also determine the display based on conditions:

![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/660a626f4ce242c7bcedfdff35f1e97b~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1600&h=898&s=459919&e=png&b=1b1b1b)

In this example, the user's login status is first obtained in the layout. If logged in, the dashboard page is displayed. If not logged in, the login page is displayed. One of the great benefits of doing this is that the code is completely separated.

### 3.2. Purpose 2: Independent routing processing

**Parallel routing allows you to define independent error handling and loading interfaces for each route:**

![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/822568ec41e9487d9eb1cd2606eb7fce~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1600&h=1218&s=559780&e=png&b=1d1d1d)

### 3.3. Purpose 3: Sub-navigation

Note that we still use the term "page" when describing team and analytics, because they use page.js just like normal pages. In addition, they can also add subpages like normal pages. For example, we add two subpages under `@analytics`: `/page-views` and `/visitors`:

![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/807415e0a664410d889e6b89eb71f3bb~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1600&h=768&s=380486&e=png&b=161616)

Parallel routing, like routing groups, does not affect the URL, so the corresponding address of `/@analytics/page-views/page.js` is `/page-views`, and the corresponding address of `/@analytics/visitors/page.js` The address is `/visitors` and you can navigate to these routes:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-js code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">// app/layout.js</span>
<span class="code-block-extension-codeLine" data-line-num="2">import Link from &#34;next/link&#34;;</span>
<span class="code-block-extension-codeLine" data-line-num="3"></span>
<span class="code-block-extension-codeLine" data-line-num="4">export default function RootLayout({ children, analytics }) {</span>
<span class="code-block-extension-codeLine" data-line-num="5">  return (</span>
<span class="code-block-extension-codeLine" data-line-num="6">    <span class="xml">&lt;html&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="7">      &lt;body&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="8">        &lt;nav&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="9">          &lt;Link href=&#34;/&#34;&gt;Home&lt;/Link&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="10">          &lt;br /&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="11">          &lt;Link href=&#34;/page-views&#34;&gt;Page Views&lt;/Link&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="12">          &lt;br /&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="13">          &lt;Link href=&#34;/visitors&#34;&gt;Visitors&lt;/Link&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="14">        &lt;/nav&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="15">        &lt;h1&gt;root layout&lt;/h1&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="16">        {analytics}</span>
<span class="code-block-extension-codeLine" data-line-num="17">        {children}</span>
<span class="code-block-extension-codeLine" data-line-num="18">      &lt;/body&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="19">    &lt;/html&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="20">  );</span>
<span class="code-block-extension-codeLine" data-line-num="21">}</span>
<span class="code-block-extension-codeLine" data-line-num="22"></span>
</code></pre>

When navigating to these subpages, the content of the subpage will be injected into the layout in the form of props instead of `/@analytics/page.js`, with the following effect:

![parallel-routers.gif](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/934de8f668044072ae2436527ce3aeee~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1104&h=517&s=75895&e=gif&f=28&b=191919)

View code and effects online：[CodeSandbox Parallel Routes](https://link.juejin.cn/?target=https%3A%2F%2Fcodesandbox.io%2Fp%2Fdevbox%2Fparallel-routes-vg2lw3%3Flayout%3D%25257B%252522sidebarPanel%252522%25253A%252522EXPLORER%252522%25252C%252522rootPanelGroup%252522%25253A%25257B%252522direction%252522%25253A%252522horizontal%252522%25252C%252522contentType%252522%25253A%252522UNKNOWN%252522%25252C%252522type%252522%25253A%252522PANEL_GROUP%252522%25252C%252522id%252522%25253A%252522ROOT_LAYOUT%252522%25252C%252522panels%252522%25253A%25255B%25257B%252522type%252522%25253A%252522PANEL_GROUP%252522%25252C%252522contentType%252522%25253A%252522UNKNOWN%252522%25252C%252522direction%252522%25253A%252522vertical%252522%25252C%252522id%252522%25253A%252522clt4etrxk00073b6hve8nzgfn%252522%25252C%252522sizes%252522%25253A%25255B70%25252C30%25255D%25252C%252522panels%252522%25253A%25255B%25257B%252522type%252522%25253A%252522PANEL_GROUP%252522%25252C%252522contentType%252522%25253A%252522EDITOR%252522%25252C%252522direction%252522%25253A%252522horizontal%252522%25252C%252522id%252522%25253A%252522EDITOR%252522%25252C%252522panels%252522%25253A%25255B%25257B%252522type%252522%25253A%252522PANEL%252522%25252C%252522contentType%252522%25253A%252522EDITOR%252522%25252C%252522id%252522%25253A%252522clt4etrxj00023b6hbh7tjkti%252522%25257D%25255D%25257D%25252C%25257B%252522type%252522%25253A%252522PANEL_GROUP%252522%25252C%252522contentType%252522%25253A%252522SHELLS%252522%25252C%252522direction%252522%25253A%252522horizontal%252522%25252C%252522id%252522%25253A%252522SHELLS%252522%25252C%252522panels%252522%25253A%25255B%25257B%252522type%252522%25253A%252522PANEL%252522%25252C%252522contentType%252522%25253A%252522SHELLS%252522%25252C%252522id%252522%25253A%252522clt4etrxj00043b6h3xt2fybf%252522%25257D%25255D%25252C%252522sizes%252522%25253A%25255B100%25255D%25257D%25255D%25257D%25252C%25257B%252522type%252522%25253A%252522PANEL_GROUP%252522%25252C%252522contentType%252522%25253A%252522DEVTOOLS%252522%25252C%252522direction%252522%25253A%252522vertical%252522%25252C%252522id%252522%25253A%252522DEVTOOLS%252522%25252C%252522panels%252522%25253A%25255B%25257B%252522type%252522%25253A%252522PANEL%252522%25252C%252522contentType%252522%25253A%252522DEVTOOLS%252522%25252C%252522id%252522%25253A%252522clt4etrxj00063b6hk3nfgk8s%252522%25257D%25255D%25252C%252522sizes%252522%25253A%25255B100%25255D%25257D%25255D%25252C%252522sizes%252522%25253A%25255B50%25252C50%25255D%25257D%25252C%252522tabbedPanels%252522%25253A%25257B%252522clt4etrxj00023b6hbh7tjkti%252522%25253A%25257B%252522id%252522%25253A%252522clt4etrxj00023b6hbh7tjkti%252522%25252C%252522tabs%252522%25253A%25255B%25255D%25257D%25252C%252522clt4etrxj00063b6hk3nfgk8s%252522%25253A%25257B%252522tabs%252522%25253A%25255B%25257B%252522id%252522%25253A%252522clt4etrxj00053b6hvo4o5bbu%252522%25252C%252522mode%252522%25253A%252522permanent%252522%25252C%252522type%252522%25253A%252522TASK_PORT%252522%25252C%252522taskId%252522%25253A%252522dev%252522%25252C%252522port%252522%25253A3000%25252C%252522path%252522%25253A%252522%25252F%252522%25257D%25255D%25252C%252522id%252522%25253A%252522clt4etrxj00063b6hk3nfgk8s%252522%25252C%252522activeTabId%252522%25253A%252522clt4etrxj00053b6hvo4o5bbu%252522%25257D%25252C%252522clt4etrxj00043b6h3xt2fybf%252522%25253A%25257B%252522tabs%252522%25253A%25255B%25257B%252522id%252522%25253A%252522clt4etrxj00033b6hkff9eafm%252522%25252C%252522mode%252522%25253A%252522permanent%252522%25252C%252522type%252522%25253A%252522TASK_LOG%252522%25252C%252522taskId%252522%25253A%252522dev%252522%25257D%25255D%25252C%252522id%252522%25253A%252522clt4etrxj00043b6h3xt2fybf%252522%25252C%252522activeTabId%252522%25253A%252522clt4etrxj00033b6hkff9eafm%252522%25257D%25257D%25252C%252522showDevtools%252522%25253Atrue%25252C%252522showShells%252522%25253Atrue%25252C%252522showSidebar%252522%25253Atrue%25252C%252522sidebarPanelSize%252522%25253A15%25257D "https://codesandbox.io/p/devbox/parallel-routes-vg2lw3?layout=%257B%2522sidebarPanel%2522%253A%2522EXPLORER%2522%252C%2522rootPanelGroup%2522%253A%257B%2522direction%2522%253A%2522horizontal%2522%252C%2522contentType%2522%253A%2522UNKNOWN%2522%252C%2522type%2522%253A%2522PANEL_GROUP%2522%252C%2522id%2522%253A%2522ROOT_LAYOUT%2522%252C%2522panels%2522%253A%255B%257B%2522type%2522%253A%2522PANEL_GROUP%2522%252C%2522contentType%2522%253A%2522UNKNOWN%2522%252C%2522direction%2522%253A%2522vertical%2522%252C%2522id%2522%253A%2522clt4etrxk00073b6hve8nzgfn%2522%252C%2522sizes%2522%253A%255B70%252C30%255D%252C%2522panels%2522%253A%255B%257B%2522type%2522%253A%2522PANEL_GROUP%2522%252C%2522contentType%2522%253A%2522EDITOR%2522%252C%2522direction%2522%253A%2522horizontal%2522%252C%2522id%2522%253A%2522EDITOR%2522%252C%2522panels%2522%253A%255B%257B%2522type%2522%253A%2522PANEL%2522%252C%2522contentType%2522%253A%2522EDITOR%2522%252C%2522id%2522%253A%2522clt4etrxj00023b6hbh7tjkti%2522%257D%255D%257D%252C%257B%2522type%2522%253A%2522PANEL_GROUP%2522%252C%2522contentType%2522%253A%2522SHELLS%2522%252C%2522direction%2522%253A%2522horizontal%2522%252C%2522id%2522%253A%2522SHELLS%2522%252C%2522panels%2522%253A%255B%257B%2522type%2522%253A%2522PANEL%2522%252C%2522contentType%2522%253A%2522SHELLS%2522%252C%2522id%2522%253A%2522clt4etrxj00043b6h3xt2fybf%2522%257D%255D%252C%2522sizes%2522%253A%255B100%255D%257D%255D%257D%252C%257B%2522type%2522%253A%2522PANEL_GROUP%2522%252C%2522contentType%2522%253A%2522DEVTOOLS%2522%252C%2522direction%2522%253A%2522vertical%2522%252C%2522id%2522%253A%2522DEVTOOLS%2522%252C%2522panels%2522%253A%255B%257B%2522type%2522%253A%2522PANEL%2522%252C%2522contentType%2522%253A%2522DEVTOOLS%2522%252C%2522id%2522%253A%2522clt4etrxj00063b6hk3nfgk8s%2522%257D%255D%252C%2522sizes%2522%253A%255B100%255D%257D%255D%252C%2522sizes%2522%253A%255B50%252C50%255D%257D%252C%2522tabbedPanels%2522%253A%257B%2522clt4etrxj00023b6hbh7tjkti%2522%253A%257B%2522id%2522%253A%2522clt4etrxj00023b6hbh7tjkti%2522%252C%2522tabs%2522%253A%255B%255D%257D%252C%2522clt4etrxj00063b6hk3nfgk8s%2522%253A%257B%2522tabs%2522%253A%255B%257B%2522id%2522%253A%2522clt4etrxj00053b6hvo4o5bbu%2522%252C%2522mode%2522%253A%2522permanent%2522%252C%2522type%2522%253A%2522TASK_PORT%2522%252C%2522taskId%2522%253A%2522dev%2522%252C%2522port%2522%253A3000%252C%2522path%2522%253A%2522%252F%2522%257D%255D%252C%2522id%2522%253A%2522clt4etrxj00063b6hk3nfgk8s%2522%252C%2522activeTabId%2522%253A%2522clt4etrxj00053b6hvo4o5bbu%2522%257D%252C%2522clt4etrxj00043b6h3xt2fybf%2522%253A%257B%2522tabs%2522%253A%255B%257B%2522id%2522%253A%2522clt4etrxj00033b6hkff9eafm%2522%252C%2522mode%2522%253A%2522permanent%2522%252C%2522type%2522%253A%2522TASK_LOG%2522%252C%2522taskId%2522%253A%2522dev%2522%257D%255D%252C%2522id%2522%253A%2522clt4etrxj00043b6h3xt2fybf%2522%252C%2522activeTabId%2522%253A%2522clt4etrxj00033b6hkff9eafm%2522%257D%257D%252C%2522showDevtools%2522%253Atrue%252C%2522showShells%2522%253Atrue%252C%2522showSidebar%2522%253Atrue%252C%2522sidebarPanelSize%2522%253A15%257D")
This means that each slot can have its own independent navigation and state management, just like a small application. This feature is suitable for building complex applications such as dashboards.

Finally, let's summarize the advantages of using parallel routing:

1. Use parallel routing to split a single layout into multiple slots, making the code easier to manage, especially suitable for team collaboration.
2. Each slot can define its own loading interface and error status. For example, if a slot loads slowly, you can add a loading effect. During loading, it will not affect the rendering and interaction of other slots. When an error occurs, the error message will only appear on the specific slot without affecting other parts of the page, effectively improving the user experience.
3. Each slot can have its own independent navigation and status management, which makes the slot more versatile. For example, in the above example, we built a view page PV under the `@analytics` slot. /page-views`, view the visitor's `/visitors`, so that the same slot area can display different content based on routing

Then you may want to ask, I will not use parallel routing, I will completely use the form of split components. The loading status and error status will be handled by myself, and the sub-routes will also be handled by myself, is that okay?

Of course it's possible, as long as it's not too much trouble...

**Note: When using parallel routing, hot reloading may cause errors. If something surprising happens to you, re-run npm run dev or build the production version to see the effect.**

### 3.4. default.js

In order to let everyone better understand parallel routing, we write a sample code. The project structure is as follows:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">app</span>
<span class="code-block-extension-codeLine" data-line-num="2">├─ @analytics</span>
<span class="code-block-extension-codeLine" data-line-num="3">│   └─ page-view</span>
<span class="code-block-extension-codeLine" data-line-num="4">│   │    └─ page.js</span>
<span class="code-block-extension-codeLine" data-line-num="5">│   └─ visitors</span>
<span class="code-block-extension-codeLine" data-line-num="6">│        └─ page.js</span>
<span class="code-block-extension-codeLine" data-line-num="7">├─ @team</span>
<span class="code-block-extension-codeLine" data-line-num="8">│  └─ page.js</span>
<span class="code-block-extension-codeLine" data-line-num="9">├─ layout.js</span>
<span class="code-block-extension-codeLine" data-line-num="10">└─ page.js</span>
</code></pre>

The `app/layout.js` code is as follows:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-jsx code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">import Link from &#34;next/link&#34;;</span>
<span class="code-block-extension-codeLine" data-line-num="2">import &#34;./globals.css&#34;;</span>
<span class="code-block-extension-codeLine" data-line-num="3"></span>
<span class="code-block-extension-codeLine" data-line-num="4">export default function RootLayout({ children, team, analytics }) {</span>
<span class="code-block-extension-codeLine" data-line-num="5">  return (</span>
<span class="code-block-extension-codeLine" data-line-num="6">    <span class="xml">&lt;html&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="7">      &lt;body className=&#34;p-6&#34;&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="8">        &lt;div className=&#34;p-10 mb-6 bg-sky-600 text-white rounded-xl&#34;&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="9">          Parallel Routes Examples</span>
<span class="code-block-extension-codeLine" data-line-num="10">        &lt;/div&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="11">        &lt;nav className=&#34;flex items-center justify-center gap-10 text-blue-600 mb-6&#34;&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="12">          &lt;Link href=&#34;/&#34;&gt;Home&lt;/Link&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="13">          &lt;Link href=&#34;/page-views&#34;&gt;Page Views&lt;/Link&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="14">          &lt;Link href=&#34;/visitors&#34;&gt;Visitors&lt;/Link&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="15">        &lt;/nav&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="16">        &lt;div className=&#34;flex gap-6&#34;&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="17">          {team}</span>
<span class="code-block-extension-codeLine" data-line-num="18">          {analytics}</span>
<span class="code-block-extension-codeLine" data-line-num="19">        &lt;/div&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="20">        {children}</span>
<span class="code-block-extension-codeLine" data-line-num="21">      &lt;/body&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="22">    &lt;/html&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="23">  );</span>
<span class="code-block-extension-codeLine" data-line-num="24">}</span>
</code></pre>

Note: Here we use Tailwind CSS to make the style look better.

`app/page.js`code show as below：

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-jsx code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">export default function Page() {</span>
<span class="code-block-extension-codeLine" data-line-num="2">  return (</span>
<span class="code-block-extension-codeLine" data-line-num="3">    <span class="xml">&lt;div className=&#34;p-10 mt-6 bg-sky-600 text-white rounded-xl&#34;&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="4">      Hello, App!</span>
<span class="code-block-extension-codeLine" data-line-num="5">    &lt;/div&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="6">  );</span>
<span class="code-block-extension-codeLine" data-line-num="7">}</span>
</code></pre>

`app/@analytics/page.js`code show as below：

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">export default function Page() {</span>
<span class="code-block-extension-codeLine" data-line-num="2">    return <span class="xml">&lt;div className=&#34;h-60 flex-1 rounded-xl bg-indigo-500 text-white flex items-center justify-center&#34;&gt;Hello, Analytics!&lt;/div&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="3">}</span>
</code></pre>

`app/@analytics/page-views/page.js`code show as below：

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">export default function Page() {</span>
<span class="code-block-extension-codeLine" data-line-num="2">    return <span class="xml">&lt;div className=&#34;h-60 flex-1 rounded-xl bg-indigo-600 text-white flex items-center justify-center&#34;&gt;Hello, Analytics Page Views!&lt;/div&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="3">}</span>
</code></pre>

`app/@analytics/visitors/page.js`code show as below：

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">export default function Page() {</span>
<span class="code-block-extension-codeLine" data-line-num="2">    return <span class="xml">&lt;div className=&#34;h-60 flex-1 rounded-xl bg-indigo-700 text-white flex items-center justify-center&#34;&gt;Hello, Analytics Visitors!&lt;/div&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="3">}</span>
</code></pre>

`app/@team/page.js`code show as below：

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-jsx code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">export default function Page() {</span>
<span class="code-block-extension-codeLine" data-line-num="2">    return <span class="xml">&lt;div className=&#34;h-60 flex-1 rounded-xl bg-sky-500 text-white flex items-center justify-center&#34;&gt;Hello, Team!&lt;/div&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="3">}</span>
</code></pre>

In fact, there is not much difference between each `page.js` code, mainly a little difference in style and text.

When accessing `/` at this time, the effect is as follows:

![parallel-routers-1.gif](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/03bf7c7e81bc444283375b880e052a39~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1518&h=932&s=81994&e=gif&f=21&b=191919)

This point is actually just a beautified version of the example in the previous section. Now, click the `Visitors` link to navigate to the `/visitors` route, and then refresh the page. At this time, you will find that a 404 error appears on the page:

![parallel-routers-2.gif](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/73952768f78c47eea8a04ead5db4d09d~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1518&h=932&s=127439&e=gif&f=67&b=191919)

Why is this? Why can it be displayed normally when we navigate to `/visitors` from the homepage? And if you directly enter `/visitors`, a 404 error will appear?

Let’s first talk about why it can be displayed normally when navigating from the homepage to `/visitors`? This is because Next.js will track the status of each slot by default. The content displayed in the specific slot is actually related to the type of navigation:

- In the case of Soft Navigation (such as through the `<Link />` tag), Next.js will perform partial rendering during navigation, changing the contents of the slots and maintaining the previous state if they do not match the current URL.
- If it is Hard Navigation (such as the browser refreshing the page), because Next.js cannot determine the status of the slot that does not match the current URL, a 404 error will be rendered.

To put it simply, accessing `/visitors` itself will cause the slot content to not match the current URL. It is reasonable to render a 404 error. However, during soft navigation, for a better user experience, if the URL does not match, Next .js will continue to maintain the previous state of the slot without rendering a 404 error.

So the problem comes again? Didn’t you write `app/@analytics/visitors/page.js`? How could it not match? For `@analytics`, it does match, but for `@team` and `children`, it does not match!

In other words, when you access `/visitors`, not only `app/@analytics/visitors/page.js` is read, but also `app/@team/visitors/page.js` and `app /visitors/page.js`. If you don’t believe me, let’s create these two files and test them.

Create a new `app/@team/visitors/page.js` with the following code:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-js code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">export default function Page() {</span>
<span class="code-block-extension-codeLine" data-line-num="2">    return <span class="xml">&lt;div className=&#34;h-60 flex-1 rounded-xl bg-indigo-700 text-white flex items-center justify-center&#34;&gt;Hello, Team Visitors!&lt;/div&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="3">}</span>
</code></pre>

Create a new `app/visitors/page.js` with the following code:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">export default function Page() {</span>
<span class="code-block-extension-codeLine" data-line-num="2">  return (</span>
<span class="code-block-extension-codeLine" data-line-num="3">    <span class="xml">&lt;div className=&#34;p-10 mt-6 bg-sky-600 text-white rounded-xl&#34;&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="4">      Hello, App Visitors!</span>
<span class="code-block-extension-codeLine" data-line-num="5">    &lt;/div&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="6">  );</span>
<span class="code-block-extension-codeLine" data-line-num="7">}</span>
</code></pre>

At this time, visit `/visitors` again and try refreshing the page. The effect is as follows:

![parallel-routers-3.gif](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b50998f8e8d64f6c8d1ca6ca106c5f64~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1518&h=932&s=134590&e=gif&f=62&b=191919)

View code and effects online：[CodeSandbox Parallel Routes Slot](https://link.juejin.cn/?target=https%3A%2F%2Fcodesandbox.io%2Fp%2Fdevbox%2Fparallel-routes-slot-gjyc7y%3Flayout%3D%25257B%252522sidebarPanel%252522%25253A%252522EXPLORER%252522%25252C%252522rootPanelGroup%252522%25253A%25257B%252522direction%252522%25253A%252522horizontal%252522%25252C%252522contentType%252522%25253A%252522UNKNOWN%252522%25252C%252522type%252522%25253A%252522PANEL_GROUP%252522%25252C%252522id%252522%25253A%252522ROOT_LAYOUT%252522%25252C%252522panels%252522%25253A%25255B%25257B%252522type%252522%25253A%252522PANEL_GROUP%252522%25252C%252522contentType%252522%25253A%252522UNKNOWN%252522%25252C%252522direction%252522%25253A%252522vertical%252522%25252C%252522id%252522%25253A%252522clt5a2jx700073b6h8sdhy13i%252522%25252C%252522sizes%252522%25253A%25255B70%25252C30%25255D%25252C%252522panels%252522%25253A%25255B%25257B%252522type%252522%25253A%252522PANEL_GROUP%252522%25252C%252522contentType%252522%25253A%252522EDITOR%252522%25252C%252522direction%252522%25253A%252522horizontal%252522%25252C%252522id%252522%25253A%252522EDITOR%252522%25252C%252522panels%252522%25253A%25255B%25257B%252522type%252522%25253A%252522PANEL%252522%25252C%252522contentType%252522%25253A%252522EDITOR%252522%25252C%252522id%252522%25253A%252522clt5a2jx600023b6h0guni4v9%252522%25257D%25255D%25257D%25252C%25257B%252522type%252522%25253A%252522PANEL_GROUP%252522%25252C%252522contentType%252522%25253A%252522SHELLS%252522%25252C%252522direction%252522%25253A%252522horizontal%252522%25252C%252522id%252522%25253A%252522SHELLS%252522%25252C%252522panels%252522%25253A%25255B%25257B%252522type%252522%25253A%252522PANEL%252522%25252C%252522contentType%252522%25253A%252522SHELLS%252522%25252C%252522id%252522%25253A%252522clt5a2jx700043b6h261hqftc%252522%25257D%25255D%25252C%252522sizes%252522%25253A%25255B100%25255D%25257D%25255D%25257D%25252C%25257B%252522type%252522%25253A%252522PANEL_GROUP%252522%25252C%252522contentType%252522%25253A%252522DEVTOOLS%252522%25252C%252522direction%252522%25253A%252522vertical%252522%25252C%252522id%252522%25253A%252522DEVTOOLS%252522%25252C%252522panels%252522%25253A%25255B%25257B%252522type%252522%25253A%252522PANEL%252522%25252C%252522contentType%252522%25253A%252522DEVTOOLS%252522%25252C%252522id%252522%25253A%252522clt5a2jx700063b6hujk33tpm%252522%25257D%25255D%25252C%252522sizes%252522%25253A%25255B100%25255D%25257D%25255D%25252C%252522sizes%252522%25253A%25255B40%25252C60%25255D%25257D%25252C%252522tabbedPanels%252522%25253A%25257B%252522clt5a2jx600023b6h0guni4v9%252522%25253A%25257B%252522id%252522%25253A%252522clt5a2jx600023b6h0guni4v9%252522%25252C%252522tabs%252522%25253A%25255B%25255D%25257D%25252C%252522clt5a2jx700063b6hujk33tpm%252522%25253A%25257B%252522tabs%252522%25253A%25255B%25257B%252522id%252522%25253A%252522clt5a2jx700053b6h614uvyna%252522%25252C%252522mode%252522%25253A%252522permanent%252522%25252C%252522type%252522%25253A%252522TASK_PORT%252522%25252C%252522taskId%252522%25253A%252522dev%252522%25252C%252522port%252522%25253A3000%25252C%252522path%252522%25253A%252522%25252Fvisitors%252522%25257D%25255D%25252C%252522id%252522%25253A%252522clt5a2jx700063b6hujk33tpm%252522%25252C%252522activeTabId%252522%25253A%252522clt5a2jx700053b6h614uvyna%252522%25257D%25252C%252522clt5a2jx700043b6h261hqftc%252522%25253A%25257B%252522tabs%252522%25253A%25255B%25257B%252522id%252522%25253A%252522clt5a2jx700033b6hk6jghx9f%252522%25252C%252522mode%252522%25253A%252522permanent%252522%25252C%252522type%252522%25253A%252522TASK_LOG%252522%25252C%252522taskId%252522%25253A%252522dev%252522%25257D%25255D%25252C%252522id%252522%25253A%252522clt5a2jx700043b6h261hqftc%252522%25252C%252522activeTabId%252522%25253A%252522clt5a2jx700033b6hk6jghx9f%252522%25257D%25257D%25252C%252522showDevtools%252522%25253Atrue%25252C%252522showShells%252522%25253Atrue%25252C%252522showSidebar%252522%25253Atrue%25252C%252522sidebarPanelSize%252522%25253A15%25257D "https://codesandbox.io/p/devbox/parallel-routes-slot-gjyc7y?layout=%257B%2522sidebarPanel%2522%253A%2522EXPLORER%2522%252C%2522rootPanelGroup%2522%253A%257B%2522direction%2522%253A%2522horizontal%2522%252C%2522contentType%2522%253A%2522UNKNOWN%2522%252C%2522type%2522%253A%2522PANEL_GROUP%2522%252C%2522id%2522%253A%2522ROOT_LAYOUT%2522%252C%2522panels%2522%253A%255B%257B%2522type%2522%253A%2522PANEL_GROUP%2522%252C%2522contentType%2522%253A%2522UNKNOWN%2522%252C%2522direction%2522%253A%2522vertical%2522%252C%2522id%2522%253A%2522clt5a2jx700073b6h8sdhy13i%2522%252C%2522sizes%2522%253A%255B70%252C30%255D%252C%2522panels%2522%253A%255B%257B%2522type%2522%253A%2522PANEL_GROUP%2522%252C%2522contentType%2522%253A%2522EDITOR%2522%252C%2522direction%2522%253A%2522horizontal%2522%252C%2522id%2522%253A%2522EDITOR%2522%252C%2522panels%2522%253A%255B%257B%2522type%2522%253A%2522PANEL%2522%252C%2522contentType%2522%253A%2522EDITOR%2522%252C%2522id%2522%253A%2522clt5a2jx600023b6h0guni4v9%2522%257D%255D%257D%252C%257B%2522type%2522%253A%2522PANEL_GROUP%2522%252C%2522contentType%2522%253A%2522SHELLS%2522%252C%2522direction%2522%253A%2522horizontal%2522%252C%2522id%2522%253A%2522SHELLS%2522%252C%2522panels%2522%253A%255B%257B%2522type%2522%253A%2522PANEL%2522%252C%2522contentType%2522%253A%2522SHELLS%2522%252C%2522id%2522%253A%2522clt5a2jx700043b6h261hqftc%2522%257D%255D%252C%2522sizes%2522%253A%255B100%255D%257D%255D%257D%252C%257B%2522type%2522%253A%2522PANEL_GROUP%2522%252C%2522contentType%2522%253A%2522DEVTOOLS%2522%252C%2522direction%2522%253A%2522vertical%2522%252C%2522id%2522%253A%2522DEVTOOLS%2522%252C%2522panels%2522%253A%255B%257B%2522type%2522%253A%2522PANEL%2522%252C%2522contentType%2522%253A%2522DEVTOOLS%2522%252C%2522id%2522%253A%2522clt5a2jx700063b6hujk33tpm%2522%257D%255D%252C%2522sizes%2522%253A%255B100%255D%257D%255D%252C%2522sizes%2522%253A%255B40%252C60%255D%257D%252C%2522tabbedPanels%2522%253A%257B%2522clt5a2jx600023b6h0guni4v9%2522%253A%257B%2522id%2522%253A%2522clt5a2jx600023b6h0guni4v9%2522%252C%2522tabs%2522%253A%255B%255D%257D%252C%2522clt5a2jx700063b6hujk33tpm%2522%253A%257B%2522tabs%2522%253A%255B%257B%2522id%2522%253A%2522clt5a2jx700053b6h614uvyna%2522%252C%2522mode%2522%253A%2522permanent%2522%252C%2522type%2522%253A%2522TASK_PORT%2522%252C%2522taskId%2522%253A%2522dev%2522%252C%2522port%2522%253A3000%252C%2522path%2522%253A%2522%252Fvisitors%2522%257D%255D%252C%2522id%2522%253A%2522clt5a2jx700063b6hujk33tpm%2522%252C%2522activeTabId%2522%253A%2522clt5a2jx700053b6h614uvyna%2522%257D%252C%2522clt5a2jx700043b6h261hqftc%2522%253A%257B%2522tabs%2522%253A%255B%257B%2522id%2522%253A%2522clt5a2jx700033b6hk6jghx9f%2522%252C%2522mode%2522%253A%2522permanent%2522%252C%2522type%2522%253A%2522TASK_LOG%2522%252C%2522taskId%2522%253A%2522dev%2522%257D%255D%252C%2522id%2522%253A%2522clt5a2jx700043b6h261hqftc%2522%252C%2522activeTabId%2522%253A%2522clt5a2jx700033b6hk6jghx9f%2522%257D%257D%252C%2522showDevtools%2522%253Atrue%252C%2522showShells%2522%253Atrue%252C%2522showSidebar%2522%253Atrue%252C%2522sidebarPanelSize%2522%253A15%257D")

Then the question comes again. If I create a new route in a certain slot, do I also need to create this route in other slots? Isn't this troublesome?

To solve this problem, Next.js provides default.js. When hard navigation occurs, Next.js will render the content defined in default.js for the unmatched slot, and then render a 404 error if default.js is not defined.

Now delete `app/@team/visitors/page.js` and `app/visitors/page.js` and use default.js instead:

Create a new `app/@team/default.js` with the following code:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-js code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">export default function Page() {</span>
<span class="code-block-extension-codeLine" data-line-num="2">    return <span class="xml">&lt;div className=&#34;h-60 flex-1 rounded-xl bg-indigo-700 text-white flex items-center justify-center&#34;&gt;Hello, Team Default!&lt;/div&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="3">}</span>
</code></pre>

Create a new `app/default.js` with the following code:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-js code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">export default function Page() {</span>
<span class="code-block-extension-codeLine" data-line-num="2">  return (</span>
<span class="code-block-extension-codeLine" data-line-num="3">    <span class="xml">&lt;div className=&#34;p-10 mt-6 bg-sky-600 text-white rounded-xl&#34;&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="4">      Hello, App Default!</span>
<span class="code-block-extension-codeLine" data-line-num="5">    &lt;/div&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="6">  );</span>
<span class="code-block-extension-codeLine" data-line-num="7">}</span>
</code></pre>

The effect at this time is as follows:

![parallel-routers-4.gif](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/04a4460dc66b4ecabbd5117198fe5039~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1786&h=861&s=242849&e=gif&f=48&b=101010)

View code and effects online：[CodeSandbox Parallel Routes default.js](https://link.juejin.cn/?target=https%3A%2F%2Fcodesandbox.io%2Fp%2Fdevbox%2Fparallel-routes-slot-default-6xf2fl%3Flayout%3D%25257B%252522sidebarPanel%252522%25253A%252522EXPLORER%252522%25252C%252522rootPanelGroup%252522%25253A%25257B%252522direction%252522%25253A%252522horizontal%252522%25252C%252522contentType%252522%25253A%252522UNKNOWN%252522%25252C%252522type%252522%25253A%252522PANEL_GROUP%252522%25252C%252522id%252522%25253A%252522ROOT_LAYOUT%252522%25252C%252522panels%252522%25253A%25255B%25257B%252522type%252522%25253A%252522PANEL_GROUP%252522%25252C%252522contentType%252522%25253A%252522UNKNOWN%252522%25252C%252522direction%252522%25253A%252522vertical%252522%25252C%252522id%252522%25253A%252522clt5ik79y00073b6hf3l3fzbg%252522%25252C%252522sizes%252522%25253A%25255B70%25252C30%25255D%25252C%252522panels%252522%25253A%25255B%25257B%252522type%252522%25253A%252522PANEL_GROUP%252522%25252C%252522contentType%252522%25253A%252522EDITOR%252522%25252C%252522direction%252522%25253A%252522horizontal%252522%25252C%252522id%252522%25253A%252522EDITOR%252522%25252C%252522panels%252522%25253A%25255B%25257B%252522type%252522%25253A%252522PANEL%252522%25252C%252522contentType%252522%25253A%252522EDITOR%252522%25252C%252522id%252522%25253A%252522clt5ik79y00023b6hn97lfg2a%252522%25257D%25255D%25257D%25252C%25257B%252522type%252522%25253A%252522PANEL_GROUP%252522%25252C%252522contentType%252522%25253A%252522SHELLS%252522%25252C%252522direction%252522%25253A%252522horizontal%252522%25252C%252522id%252522%25253A%252522SHELLS%252522%25252C%252522panels%252522%25253A%25255B%25257B%252522type%252522%25253A%252522PANEL%252522%25252C%252522contentType%252522%25253A%252522SHELLS%252522%25252C%252522id%252522%25253A%252522clt5ik79y00043b6h22zpnrac%252522%25257D%25255D%25252C%252522sizes%252522%25253A%25255B100%25255D%25257D%25255D%25257D%25252C%25257B%252522type%252522%25253A%252522PANEL_GROUP%252522%25252C%252522contentType%252522%25253A%252522DEVTOOLS%252522%25252C%252522direction%252522%25253A%252522vertical%252522%25252C%252522id%252522%25253A%252522DEVTOOLS%252522%25252C%252522panels%252522%25253A%25255B%25257B%252522type%252522%25253A%252522PANEL%252522%25252C%252522contentType%252522%25253A%252522DEVTOOLS%252522%25252C%252522id%252522%25253A%252522clt5ik79y00063b6h4xgmbxtp%252522%25257D%25255D%25252C%252522sizes%252522%25253A%25255B100%25255D%25257D%25255D%25252C%252522sizes%252522%25253A%25255B50%25252C50%25255D%25257D%25252C%252522tabbedPanels%252522%25253A%25257B%252522clt5ik79y00023b6hn97lfg2a%252522%25253A%25257B%252522id%252522%25253A%252522clt5ik79y00023b6hn97lfg2a%252522%25252C%252522tabs%252522%25253A%25255B%25255D%25257D%25252C%252522clt5ik79y00063b6h4xgmbxtp%252522%25253A%25257B%252522tabs%252522%25253A%25255B%25257B%252522id%252522%25253A%252522clt5ik79y00053b6hh4drcmyn%252522%25252C%252522mode%252522%25253A%252522permanent%252522%25252C%252522type%252522%25253A%252522TASK_PORT%252522%25252C%252522taskId%252522%25253A%252522dev%252522%25252C%252522port%252522%25253A3000%25252C%252522path%252522%25253A%252522%25252Fvisitors%252522%25257D%25255D%25252C%252522id%252522%25253A%252522clt5ik79y00063b6h4xgmbxtp%252522%25252C%252522activeTabId%252522%25253A%252522clt5ik79y00053b6hh4drcmyn%252522%25257D%25252C%252522clt5ik79y00043b6h22zpnrac%252522%25253A%25257B%252522tabs%252522%25253A%25255B%25257B%252522id%252522%25253A%252522clt5ik79y00033b6h3hj0kx19%252522%25252C%252522mode%252522%25253A%252522permanent%252522%25252C%252522type%252522%25253A%252522TASK_LOG%252522%25252C%252522taskId%252522%25253A%252522dev%252522%25257D%25255D%25252C%252522id%252522%25253A%252522clt5ik79y00043b6h22zpnrac%252522%25252C%252522activeTabId%252522%25253A%252522clt5ik79y00033b6h3hj0kx19%252522%25257D%25257D%25252C%252522showDevtools%252522%25253Atrue%25252C%252522showShells%252522%25253Atrue%25252C%252522showSidebar%252522%25253Atrue%25252C%252522sidebarPanelSize%252522%25253A15%25257D "https://codesandbox.io/p/devbox/parallel-routes-slot-default-6xf2fl?layout=%257B%2522sidebarPanel%2522%253A%2522EXPLORER%2522%252C%2522rootPanelGroup%2522%253A%257B%2522direction%2522%253A%2522horizontal%2522%252C%2522contentType%2522%253A%2522UNKNOWN%2522%252C%2522type%2522%253A%2522PANEL_GROUP%2522%252C%2522id%2522%253A%2522ROOT_LAYOUT%2522%252C%2522panels%2522%253A%255B%257B%2522type%2522%253A%2522PANEL_GROUP%2522%252C%2522contentType%2522%253A%2522UNKNOWN%2522%252C%2522direction%2522%253A%2522vertical%2522%252C%2522id%2522%253A%2522clt5ik79y00073b6hf3l3fzbg%2522%252C%2522sizes%2522%253A%255B70%252C30%255D%252C%2522panels%2522%253A%255B%257B%2522type%2522%253A%2522PANEL_GROUP%2522%252C%2522contentType%2522%253A%2522EDITOR%2522%252C%2522direction%2522%253A%2522horizontal%2522%252C%2522id%2522%253A%2522EDITOR%2522%252C%2522panels%2522%253A%255B%257B%2522type%2522%253A%2522PANEL%2522%252C%2522contentType%2522%253A%2522EDITOR%2522%252C%2522id%2522%253A%2522clt5ik79y00023b6hn97lfg2a%2522%257D%255D%257D%252C%257B%2522type%2522%253A%2522PANEL_GROUP%2522%252C%2522contentType%2522%253A%2522SHELLS%2522%252C%2522direction%2522%253A%2522horizontal%2522%252C%2522id%2522%253A%2522SHELLS%2522%252C%2522panels%2522%253A%255B%257B%2522type%2522%253A%2522PANEL%2522%252C%2522contentType%2522%253A%2522SHELLS%2522%252C%2522id%2522%253A%2522clt5ik79y00043b6h22zpnrac%2522%257D%255D%252C%2522sizes%2522%253A%255B100%255D%257D%255D%257D%252C%257B%2522type%2522%253A%2522PANEL_GROUP%2522%252C%2522contentType%2522%253A%2522DEVTOOLS%2522%252C%2522direction%2522%253A%2522vertical%2522%252C%2522id%2522%253A%2522DEVTOOLS%2522%252C%2522panels%2522%253A%255B%257B%2522type%2522%253A%2522PANEL%2522%252C%2522contentType%2522%253A%2522DEVTOOLS%2522%252C%2522id%2522%253A%2522clt5ik79y00063b6h4xgmbxtp%2522%257D%255D%252C%2522sizes%2522%253A%255B100%255D%257D%255D%252C%2522sizes%2522%253A%255B50%252C50%255D%257D%252C%2522tabbedPanels%2522%253A%257B%2522clt5ik79y00023b6hn97lfg2a%2522%253A%257B%2522id%2522%253A%2522clt5ik79y00023b6hn97lfg2a%2522%252C%2522tabs%2522%253A%255B%255D%257D%252C%2522clt5ik79y00063b6h4xgmbxtp%2522%253A%257B%2522tabs%2522%253A%255B%257B%2522id%2522%253A%2522clt5ik79y00053b6hh4drcmyn%2522%252C%2522mode%2522%253A%2522permanent%2522%252C%2522type%2522%253A%2522TASK_PORT%2522%252C%2522taskId%2522%253A%2522dev%2522%252C%2522port%2522%253A3000%252C%2522path%2522%253A%2522%252Fvisitors%2522%257D%255D%252C%2522id%2522%253A%2522clt5ik79y00063b6h4xgmbxtp%2522%252C%2522activeTabId%2522%253A%2522clt5ik79y00053b6hh4drcmyn%2522%257D%252C%2522clt5ik79y00043b6h22zpnrac%2522%253A%257B%2522tabs%2522%253A%255B%257B%2522id%2522%253A%2522clt5ik79y00033b6h3hj0kx19%2522%252C%2522mode%2522%253A%2522permanent%2522%252C%2522type%2522%253A%2522TASK_LOG%2522%252C%2522taskId%2522%253A%2522dev%2522%257D%255D%252C%2522id%2522%253A%2522clt5ik79y00043b6h22zpnrac%2522%252C%2522activeTabId%2522%253A%2522clt5ik79y00033b6h3hj0kx19%2522%257D%257D%252C%2522showDevtools%2522%253Atrue%252C%2522showShells%2522%253Atrue%252C%2522showSidebar%2522%253Atrue%252C%2522sidebarPanelSize%2522%253A15%257D")

## 4. Intercepting Routes

Intercept routing allows you to intercept other routing addresses in the current route and display content in the current route.

### 4.1 Effect display

Let's take a look at a case directly and open it up [dribbble.com](https://link.juejin.cn/?target=https%3A%2F%2Fdribbble.com%2F "https://dribbble.com/") On this website, you can see many beautiful pictures:

![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/dec9df9082c74c2eb82df134572f764f~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=2738&h=1504&s=3417194&e=png&b=fcfafa)

Now click on any image:

![image.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8991033e34074f4d83c9e48403193d6f~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=2746&h=2126&s=3229103&e=png&b=f9f0ee)

At this point, a layer of Modal pops up on the page, displaying the specific content of the image. If you want to view other images, click the close button in the upper right corner and turn off Modal to continue browsing. It is worth noting that at this point, the routing address has also changed, becoming the specific address of this image. If you like this picture, simply copy the current address and share it with a friend.

And when your friend opens it, there is actually no need to display it in Modal format, just show the specific content of this image directly. Now refresh the page and you will find that the style of the page is different:

![image.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3cc41d1bffa44ea59fb4372729d376ff~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=2774&h=2256&s=3254329&e=png&b=f9f1f0)

There is no Modal in this style, just to display the content of this image.

The same routing address displays different content. This is the effect of intercepting routes. If you want to access' dribbble. com 'and want to access' dribbble. com/shots/xxxxx', the routing address' dribbble. com/shots/xxxxx 'will be intercepted and displayed in Modal format. When directly accessing 'dribbble. com/shots/xxxxx', it is the original style.

The schematic diagram is as follows:

![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/dc1bf827eb0549eebc4e9232e9f5b40f~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1600&h=617&s=243096&e=png&b=1e1e1e)

![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f5a196f02498491aa4eb342238e77955~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1600&h=604&s=280419&e=png&b=191919)

This is another demo demonstration of intercepting routes: [nextjs-app-route-interception.vercel.app/](https://link.juejin.cn/?target=https%3A%2F%2Fnextjs-app-route-interception.vercel.app%2F "https://nextjs-app-route-interception.vercel.app/")

Having understood the effectiveness of intercepting routes, let's reconsider the significance of using intercepting routes.

Simply put, it means hoping that users will continue to stay on important pages. For example, in the image flow page shown in the above example, developers definitely hope that users can continue to browse on the image flow page. If they click on an image and it jumps out, it will interrupt the user's browsing experience. If they click on only one Modal, the sharing operation will become a bit cumbersome. Intercepting routes can achieve such a balance. For example, on the task list page, clicking on one of the tasks will bring up Modal, allowing you to edit the task while also conveniently sharing the task content.

### 4.2 Implementation method

So how can this effect be achieved? In Next.js, implementing interception routing requires you to start with '(..)' when naming a folder, where:

_'(.)' indicates matching at the same level
_'(..)' indicates matching with the previous level
_`(..) (..)` indicates matching the upper level.
_'(...)' indicates matching the root directory

However, it should be noted that this matches the routing hierarchy rather than the folder path hierarchy. For example, folders such as routing groups and parallel routes that do not affect URLs will not be evaluated for hierarchy.

Take an example:

![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/731ab39e379e40ffadd2119cdc843e1d~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1600&h=930&s=465834&e=png&b=161616)

`/The corresponding route for feed/(..) photo is'/feed/photo ', and the route to be intercepted is'/photo'. There is only one level difference between the two, so '(..)' is used.

### 4.3 Example code

We will write a demo to achieve this effect, and the directory structure is as follows:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">app</span>
<span class="code-block-extension-codeLine" data-line-num="2">├─ layout.js</span>
<span class="code-block-extension-codeLine" data-line-num="3">├─ page.js</span>
<span class="code-block-extension-codeLine" data-line-num="4">├─ data.js</span>
<span class="code-block-extension-codeLine" data-line-num="5">├─ default.js</span>
<span class="code-block-extension-codeLine" data-line-num="6">├─ @modal</span>
<span class="code-block-extension-codeLine" data-line-num="7">│  ├─ default.js</span>
<span class="code-block-extension-codeLine" data-line-num="8">│  └─ (.)photo</span>
<span class="code-block-extension-codeLine" data-line-num="9">│     └─ [id]</span>
<span class="code-block-extension-codeLine" data-line-num="10">│        └─ page.js</span>
<span class="code-block-extension-codeLine" data-line-num="11">└─ photo</span>
<span class="code-block-extension-codeLine" data-line-num="12">   └─ [id]</span>
<span class="code-block-extension-codeLine" data-line-num="13">      └─ page.js</span>
</code></pre>

Although there are many files involved, the code for each file is very simple.

First, mock the data of the image. The code for 'app/data. js' is as follows:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">export const photos = [</span>
<span class="code-block-extension-codeLine" data-line-num="2">  { id: &#34;1&#34;, src: &#34;http://placekitten.com/210/210&#34; },</span>
<span class="code-block-extension-codeLine" data-line-num="3">  { id: &#34;2&#34;, src: &#34;http://placekitten.com/330/330&#34; },</span>
<span class="code-block-extension-codeLine" data-line-num="4">  { id: &#34;3&#34;, src: &#34;http://placekitten.com/220/220&#34; },</span>
<span class="code-block-extension-codeLine" data-line-num="5">  { id: &#34;4&#34;, src: &#34;http://placekitten.com/240/240&#34; },</span>
<span class="code-block-extension-codeLine" data-line-num="6">  { id: &#34;5&#34;, src: &#34;http://placekitten.com/250/250&#34; },</span>
<span class="code-block-extension-codeLine" data-line-num="7">  { id: &#34;6&#34;, src: &#34;http://placekitten.com/300/300&#34; },</span>
<span class="code-block-extension-codeLine" data-line-num="8">  { id: &#34;7&#34;, src: &#34;http://placekitten.com/500/500&#34; },</span>
<span class="code-block-extension-codeLine" data-line-num="9">];</span>
</code></pre>

`The code for app/page. js is as follows:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">import Link from &#34;next/link&#34;;</span>
<span class="code-block-extension-codeLine" data-line-num="2">import { photos } from &#34;./data&#34;;</span>
<span class="code-block-extension-codeLine" data-line-num="3"></span>
<span class="code-block-extension-codeLine" data-line-num="4">export default function Home() {</span>
<span class="code-block-extension-codeLine" data-line-num="5">  return (</span>
<span class="code-block-extension-codeLine" data-line-num="6">    <span class="xml">&lt;main className=&#34;flex flex-row flex-wrap&#34;&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="7">      {photos.map(({ id, src }) =&gt; (</span>
<span class="code-block-extension-codeLine" data-line-num="8">        &lt;Link key={id} href={`/photo/${id}`}&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="9">          &lt;img width=&#34;200&#34; src={src} className=&#34;m-1&#34; /&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="10">        &lt;/Link&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="11">      ))}</span>
<span class="code-block-extension-codeLine" data-line-num="12">    &lt;/main&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="13">  );</span>
<span class="code-block-extension-codeLine" data-line-num="14">}</span>
</code></pre>

`The code for app/layout. js is as follows:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">import &#34;./globals.css&#34;;</span>
<span class="code-block-extension-codeLine" data-line-num="2"></span>
<span class="code-block-extension-codeLine" data-line-num="3">export default function Layout({ children, modal }) {</span>
<span class="code-block-extension-codeLine" data-line-num="4">  return (</span>
<span class="code-block-extension-codeLine" data-line-num="5">    <span class="xml">&lt;html&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="6">      &lt;body&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="7">        {children}</span>
<span class="code-block-extension-codeLine" data-line-num="8">        {modal}</span>
<span class="code-block-extension-codeLine" data-line-num="9">      &lt;/body&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="10">    &lt;/html&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="11">  );</span>
<span class="code-block-extension-codeLine" data-line-num="12">}</span>
</code></pre>

At this point, accessing '/' has the following effect:

![image.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7656b3c2eef549f5b5ac13e15649edfc~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=2174&h=1020&s=1634063&e=png&b=f9f6f6)

Now let's implement the effect of accessing image addresses separately, creating a new 'app/photo/[id]/page. js' with the following code:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">import { photos } from &#34;../../data&#34;;</span>
<span class="code-block-extension-codeLine" data-line-num="2"></span>
<span class="code-block-extension-codeLine" data-line-num="3">export default function PhotoPage({ params: { id } }) {</span>
<span class="code-block-extension-codeLine" data-line-num="4">  const photo = photos.find((p) =&gt; p.id === id);</span>
<span class="code-block-extension-codeLine" data-line-num="5">  return <span class="xml">&lt;img className=&#34;block w-1/4 mx-auto mt-10&#34; src={photo.src} /&gt;</span>;</span>
<span class="code-block-extension-codeLine" data-line-num="6">}</span>
</code></pre>

Visit '/photo/6' and the effect is as follows:

![image.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d75c00958d4b4fc989a5c3c669dfbcac~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1890&h=810&s=392046&e=png&b=fdfdfd)

Now we are starting to implement interception routing, and in order to distinguish it from the style when accessing image addresses separately, we declare another style effect`The code for app/@ modal/(.) photo/[id]/page. js` is as follows:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">import { photos } from &#34;../../../data&#34;;</span>
<span class="code-block-extension-codeLine" data-line-num="2"></span>
<span class="code-block-extension-codeLine" data-line-num="3">export default function PhotoModal({ params: { id } }) {</span>
<span class="code-block-extension-codeLine" data-line-num="4">  const photo = photos.find((p) =&gt; p.id === id)</span>
<span class="code-block-extension-codeLine" data-line-num="5">  return (</span>
<span class="code-block-extension-codeLine" data-line-num="6">    <span class="xml">&lt;div className=&#34;flex h-60 justify-center items-center fixed bottom-0 bg-slate-300 w-full&#34;&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="7">      &lt;img className=&#34;w-52&#34; src={photo.src} /&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="8">    &lt;/div&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="9">  )</span>
<span class="code-block-extension-codeLine" data-line-num="10">}</span>
</code></pre>

Because parallel routing is used, we need to set default.js` The code for app/default. js and app/@ modal/default. js are both:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">export default function Default() {</span>
<span class="code-block-extension-codeLine" data-line-num="2">  return null</span>
<span class="code-block-extension-codeLine" data-line-num="3">}</span>
</code></pre>

The final effect is as follows:

![intercepting-routers-5.gif](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a60151ea58a24313aca456e9aa90814a~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1787&h=951&s=1190960&e=gif&f=80&b=171717)

You can see that under the '/' route, accessing '/photo/5' will intercept the route and use the style of '@ modal/(.) photo/[id]/page. js'.

View code and effects online ：[CodeSandbox Intercepting Routes](https://link.juejin.cn/?target=https%3A%2F%2Fcodesandbox.io%2Fp%2Fdevbox%2Fintercepting-routes-6ngfhx "https://codesandbox.io/p/devbox/intercepting-routes-6ngfhx")
