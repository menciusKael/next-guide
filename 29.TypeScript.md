## Preface

When you use `create-next-app` to create a project, Next.js will prompt whether to use TypeScript and ESLint. This article will introduce the configuration of TypeScript and ESLint in detail to help you understand the functions and logic supported in the default settings.

## TypeScript

Next.js has built-in support for TypeScript, which will automatically install the required dependencies and perform appropriate configuration.

### 1. New project

When you run `create-next-app` to create a project, you will be asked to choose whether to use TypeScript. The default is `Yes`:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-bash code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">npx create-next-app@latest</span>
</code></pre>

![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/338e1a0cbeae4e6dbed45b8aabcab1db~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=2048&h=400&s=1160077&e=png&b=090f16)

### 2. Existing Projects

Rename the file to `.ts` or `.tsx`, then run `next dev` and `next build`, Next.js will automatically install the required dependencies and add a `tsconfig.json` file with recommended configuration items.

If you already have a `jsconfig.json` file, you need to manually copy the contents of `jsconfig.json` (such as `paths`) to `tsconfig.json`, and then delete the previous `jsconfig.json` file.

### 3. TypeScript plugin

Next.js includes a custom TypeScript plugin and type checker. VScode and other code editors can use it to achieve advanced type checking and auto-completion features.

Open in VSCode:

1. Open the command palette (`Ctrl/⌘` + `Shift` + `P`)
2. Search for `TypeScript: Select TypeScript Version`
3. Select "`Use Workspace Versiion`"

![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f51c0de853c0406c888bbe530ab425c1~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1600&h=637&s=265220&e=png&b=212329)

Now, when you edit a file, the custom TypeScript plugin will be enabled. When you run `next build`, the custom type checker will be executed.

Plugin features:

1. Warnings will appear when invalid route segment configuration is used:

![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/92a7d286aa984ea48754705c1772f15f~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=2204&h=426&s=137977&e=png&b=1f1f1f)

2. Display the context document:

![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/23bbc37a4282495b9ca8ea4802de1632~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=2192&h=592&s=197306&e=png&b=252526)

3. Display the available options:

![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/778168b2f93e4ce99b86d1dae56f389c~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1826&h=394&s=99703&e=png&b=202020)

4. Make sure `use client` is used correctly:

![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6ac2531413a04757bf683c1655adc604~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1534&h=554&s=107023&e=png&b=1f1f1f)

5. Make sure client-side hooks (such as useState) are only used in client-side components:

![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/45148815980341b38c6b766c60388871~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1256&h=410&s=88021&e=png&b=202020)

### 4. Minimum TypeScript Version Required

Next.js recommends at least v4.5.2 to get features like type modifiers on import names:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-typescript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">// You can import types directly</span>
<span class="code-block-extension-codeLine" data-line-num="2">import { someFunc, type BaseType } from &#34;./some-module.js&#34;;</span>
<span class="code-block-extension-codeLine" data-line-num="3"></span>
<span class="code-block-extension-codeLine" data-line-num="4">export class Thing implements BaseType {</span>
<span class="code-block-extension-codeLine" data-line-num="5">  someMethod() {</span>
<span class="code-block-extension-codeLine" data-line-num="6">    someFunc();</span>
<span class="code-block-extension-codeLine" data-line-num="7">  }</span>
<span class="code-block-extension-codeLine" data-line-num="8">}</span>
</code></pre>

### 5. Statically write links

Next.js can statically write links to prevent spelling or other errors when using `next/link`, thereby ensuring the correctness of the page navigation address.

To use this feature, you need to use the `experimental.typedRoutes` option in `next.config.js` if the project uses TypeScript:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">// next.config.js</span>
<span class="code-block-extension-codeLine" data-line-num="2">/** @type {import(&#39;next&#39;).NextConfig} */</span>
<span class="code-block-extension-codeLine" data-line-num="3">const nextConfig = {</span>
<span class="code-block-extension-codeLine" data-line-num="4">  experimental: {</span>
<span class="code-block-extension-codeLine" data-line-num="5">    typedRoutes: true,</span>
<span class="code-block-extension-codeLine" data-line-num="6">  },</span>
<span class="code-block-extension-codeLine" data-line-num="7">}</span>
<span class="code-block-extension-codeLine" data-line-num="8"></span>
<span class="code-block-extension-codeLine" data-line-num="9">module.exports = nextConfig</span>
</code></pre>

Next.js will generate a link definition in `.next/types` containing all the route information, so that TypeScript can use it to make link hints.

Currently, any string literal is supported, including dynamic routes. For non-literal characters, you currently need to manually use `as Route` to mark `href`:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">import type { Route } from &#39;next&#39;;</span>
<span class="code-block-extension-codeLine" data-line-num="2">import Link from &#39;next/link&#39;</span>
<span class="code-block-extension-codeLine" data-line-num="3"></span>
<span class="code-block-extension-codeLine" data-line-num="4">// If href is a valid route, there will be no TypeScript error</span>
<span class="code-block-extension-codeLine" data-line-num="5">&lt;Link href=&#34;/about&#34; /&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="6"><span class="xml">&lt;Link href=&#34;/blog/nextjs&#34; /&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="7"><span class="xml">&lt;Link href={`/blog/${slug}`} /&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="8"><span class="xml">&lt;Link href={(&#39;/blog&#39; + slug) as Route} /&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="9"></span>
<span class="code-block-extension-codeLine" data-line-num="10">// If href is not a valid route, you will get a TypeScript error. There is a typo here.</span>
<span class="code-block-extension-codeLine" data-line-num="11"><span class="xml">&lt;Link href=&#34;/aboot&#34; /&gt;</span></span>
</code></pre>

If you want to receive the `href` attribute in a custom component wrapped with `next/link`, use generics:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">import type { Route } from &#39;next&#39;</span>
<span class="code-block-extension-codeLine" data-line-num="2">import Link from &#39;next/link&#39;</span>
<span class="code-block-extension-codeLine" data-line-num="3"></span>
<span class="code-block-extension-codeLine" data-line-num="4">function Card&lt;T extends string&gt;({ href }: { href: Route&lt;T&gt; | URL }) {</span>
<span class="code-block-extension-codeLine" data-line-num="5">  return (</span>
<span class="code-block-extension-codeLine" data-line-num="6">    <span class="xml">&lt;Link href={href}&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="7">      &lt;div&gt;My Card&lt;/div&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="8">    &lt;/Link&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="9">  )</span>
<span class="code-block-extension-codeLine" data-line-num="10">}</span>
</code></pre>

### 6. Type checking in next.config.js

`next.config.js` must be a JavaScript file, it will not be parsed by TypeScript or Babel, but you can use JSDoc to add some type checking, for example:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">// @ts-check</span>
<span class="code-block-extension-codeLine" data-line-num="2"></span>
<span class="code-block-extension-codeLine" data-line-num="3">/**</span>
<span class="code-block-extension-codeLine" data-line-num="4"> * @type {import(&#39;next&#39;).NextConfig}</span>
<span class="code-block-extension-codeLine" data-line-num="5"> **/</span>
<span class="code-block-extension-codeLine" data-line-num="6">const nextConfig = {</span>
<span class="code-block-extension-codeLine" data-line-num="7">  /* config options here */</span>
<span class="code-block-extension-codeLine" data-line-num="8">}</span>
<span class="code-block-extension-codeLine" data-line-num="9"></span>
<span class="code-block-extension-codeLine" data-line-num="10">module.exports = nextConfig</span>
</code></pre>

### 7. Ignore TypeScript errors

Building for production using `next build` will fail when there are TypeScript errors. But if you want to build production code even if there are errors, you can disable the built-in type checking. Open `next.config.js` and enable the `typescript.ignoreBuildErrors` option:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">// next.config.js</span>
<span class="code-block-extension-codeLine" data-line-num="2">module.exports = {</span>
<span class="code-block-extension-codeLine" data-line-num="3">  typescript: {</span>
<span class="code-block-extension-codeLine" data-line-num="4">    // !! WARN !!</span>
<span class="code-block-extension-codeLine" data-line-num="5">    // It's actually very dangerous.作</span>
<span class="code-block-extension-codeLine" data-line-num="6">    // !! WARN !!</span>
<span class="code-block-extension-codeLine" data-line-num="7">    ignoreBuildErrors: true,</span>
<span class="code-block-extension-codeLine" data-line-num="8">  },</span>
<span class="code-block-extension-codeLine" data-line-num="9">}</span>
</code></pre>

## ESLint

### 1. ESLint configuration options

Next.js provides ESLint functionality out of the box (if you selected ESLint when creating a project), check `package.json` and you will see:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div>></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-json code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">// package.json</span>
<span class="code-block-extension-codeLine" data-line-num="2">{</span>
<span class="code-block-extension-codeLine" data-line-num="3">  &#34;scripts&#34;: {</span>
<span class="code-block-extension-codeLine" data-line-num="4">    &#34;lint&#34;: &#34;next lint&#34;</span>
<span class="code-block-extension-codeLine" data-line-num="5">  }</span>
<span class="code-block-extension-codeLine" data-line-num="6">}</span>
</code></pre>

Then run `npm run lint` or `yarn lint`:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-shell code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">yarn lint</span>
</code></pre>

If there is no ESLint-related configuration in your application, you will be guided to install and configure it:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-shell code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">? How would you like to configure ESLint?</span>
<span class="code-block-extension-codeLine" data-line-num="2"></span>
<span class="code-block-extension-codeLine" data-line-num="3">❯ Strict (recommended)</span>
<span class="code-block-extension-codeLine" data-line-num="4">Base</span>
<span class="code-block-extension-codeLine" data-line-num="5">Cancel</span>
</code></pre>

You will see three options at this point:

1. **Strict**

This is the recommended configuration for setting up ESLint for the first time. It includes the Next.js base ESLint configuration as well as the stricter set of core web metrics rules. Check out the `.eslintrc.json` file:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div>></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-json code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">// .eslintrc.json</span>
<span class="code-block-extension-codeLine" data-line-num="2">{</span>
<span class="code-block-extension-codeLine" data-line-num="3">  &#34;extends&#34;: &#34;next/core-web-vitals&#34;</span>
<span class="code-block-extension-codeLine" data-line-num="4">}</span>
</code></pre>

2. **Base**

Just include the basic ESLint configuration for Next.js, see the .eslintrc.json file:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div>></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-json code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">// .eslintrc.json</span>
<span class="code-block-extension-codeLine" data-line-num="2">{</span>
<span class="code-block-extension-codeLine" data-line-num="3">  &#34;extends&#34;: &#34;next&#34;</span>
<span class="code-block-extension-codeLine" data-line-num="4">}</span>
</code></pre>

At this point, you may be confused. Doesn't `Strict` mode include the basic ESLint configuration? Why is there no `"next"` in `extends` under `Strict`? This is because the rule of `"next/core-web-vitals"` extends `"next"`, which means it includes `"next"`, so there is no need to extend again.

3. **Cancel**

Does not include any ESLint configuration. Select this option when you need to customize the ESLint configuration.

If any of the first two configuration items are selected, Next.js will automatically install `eslint` and `eslint-config-next` as application dependencies, and create a `.eslintrc.json` file in the root directory of the project containing the configuration you selected.

Now you can run `next lint` to catch errors. Generally, after ESLint is set up, it will run automatically every time `next build`. If there are errors, the build will fail, but warnings will not.

### 2. ESLint configuration

The default configuration `eslint-config-next` includes the following plugins:

- [eslint-plugin-react](https://link.juejin.cn/?target=https%3A%2F%2Fwww.npmjs.com%2Fpackage%2Feslint-plugin-react "https://www.npmjs.com/package/eslint-plugin-react")
- [eslint-plugin-react-hooks](https://link.juejin.cn/?target=https%3A%2F%2Fwww.npmjs.com%2Fpackage%2Feslint-plugin-react-hooks "https://www.npmjs.com/package/eslint-plugin-react-hooks")
- [eslint-plugin-next](https://link.juejin.cn/?target=https%3A%2F%2Fwww.npmjs.com%2Fpackage%2F%40next%2Feslint-plugin-next "https://www.npmjs.com/package/@next/eslint-plugin-next")

Students who are new to ESLint may be confused about the concepts of ESLint's `config` and `plugin`. Let's briefly explain the difference.

Now suppose you are a Next.js developer. In order to make users use Next.js better, you need to customize some ESLint rules according to the usage of Next.js, just like when we talk about inline scripts in the `<Script>` component:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">&lt;Script id=&#34;show-banner&#34;&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="2">  {`document.getElementById(&#39;banner&#39;).classList.remove(&#39;hidden&#39;)`}</span>
<span class="code-block-extension-codeLine" data-line-num="3">&lt;/Script&gt;</span>
</code></pre>

Next.js requires that an id must be assigned to the inline script to ensure that Next.js tracks and optimizes the script. If the user does not pass in an id, ESLint can prompt an error. In order to implement this custom rule, we need to write a plug-in named `eslint-plugin-next`, where the prefix `eslint-plugin-` is required by ESLint. Its code structure is similar to:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">module.exports = {</span>
<span class="code-block-extension-codeLine" data-line-num="2">  rules: {</span>
<span class="code-block-extension-codeLine" data-line-num="3">    &#39;inline-script-id&#39;: require(&#39;./rules/inline-script-id&#39;),</span>
<span class="code-block-extension-codeLine" data-line-num="4">    // ... 其他规则</span>
<span class="code-block-extension-codeLine" data-line-num="5">  }</span>
<span class="code-block-extension-codeLine" data-line-num="6">}</span>
</code></pre>

It is not enough to develop a bunch of rules. Just like when playing games, the difficulty of the game can be simple, moderate, difficult, and hell. The same is true for the rule set. We can also use these rules to establish multiple categories, such as recommended, strict, loose, etc. This can also be written in the plug-in code. The code structure is similar to:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">module.exports = {</span>
<span class="code-block-extension-codeLine" data-line-num="2">  rules: {</span>
<span class="code-block-extension-codeLine" data-line-num="3">    &#39;inline-script-id&#39;: require(&#39;./rules/inline-script-id&#39;),</span>
<span class="code-block-extension-codeLine" data-line-num="4">    // ... Other Rules</span>
<span class="code-block-extension-codeLine" data-line-num="5">  },</span>
<span class="code-block-extension-codeLine" data-line-num="6">  configs: {</span>
<span class="code-block-extension-codeLine" data-line-num="7">    recommended: {</span>
<span class="code-block-extension-codeLine" data-line-num="8">      plugins: [&#39;next&#39;],</span>
<span class="code-block-extension-codeLine" data-line-num="9">      rules: {</span>
<span class="code-block-extension-codeLine" data-line-num="10">        // warnings</span>
<span class="code-block-extension-codeLine" data-line-num="11">        &#39;next/inline-script-id&#39;: &#39;warn&#39;,</span>
<span class="code-block-extension-codeLine" data-line-num="12">        // errors</span>
<span class="code-block-extension-codeLine" data-line-num="13">        &#39;next/other-rule&#39;: &#39;error&#39;,</span>
<span class="code-block-extension-codeLine" data-line-num="14">      },</span>
<span class="code-block-extension-codeLine" data-line-num="15">    },</span>
<span class="code-block-extension-codeLine" data-line-num="16">    strict: {</span>
<span class="code-block-extension-codeLine" data-line-num="17">      plugins: [&#39;next&#39;],</span>
<span class="code-block-extension-codeLine" data-line-num="18">      rules: {</span>
<span class="code-block-extension-codeLine" data-line-num="19">        &#39;next/inline-script-id&#39;: &#39;error&#39;,</span>
<span class="code-block-extension-codeLine" data-line-num="20">        &#39;next/other-rule&#39;: &#39;error&#39;,</span>
<span class="code-block-extension-codeLine" data-line-num="21">      },</span>
<span class="code-block-extension-codeLine" data-line-num="22">    },</span>
<span class="code-block-extension-codeLine" data-line-num="23">  },</span>
<span class="code-block-extension-codeLine" data-line-num="24">}</span>
</code></pre>

In this example, we define two configurations for our `eslint-plugin-next` plugin, one named `recommended` and one named `strict`. Among them, `plugins: ['next']` means loading the plugin named `eslint-plugin-next` (ESLint will automatically complete the name), which is actually itself, and then `rules` sets which rules to use and the prompts of the rules. For example, for the same rule `inline-script-id`, in `recommended`, we set it to `warn`, but in `strict`, since it is strict, we set it to `error`.

Having this plugin is not enough. Next.js is based on React. There are also some ESLint rules about the use of React. React developers have developed the eslint-plugin-react plugin accordingly. Although this plugin is good, I don’t want to use some rules. What should I do? To help developers provide a more "finished" configuration item, you can define an `eslint-config-next` configuration, where the `eslint-config-` prefix is ​​required by ESLint. Its code structure is similar to:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">module.exports = {</span>
<span class="code-block-extension-codeLine" data-line-num="2">  extends: [</span>
<span class="code-block-extension-codeLine" data-line-num="3">    &#39;plugin:next/recommended&#39;,</span>
<span class="code-block-extension-codeLine" data-line-num="4">  ],</span>
<span class="code-block-extension-codeLine" data-line-num="5">  plugins: [&#39;react&#39;],</span>
<span class="code-block-extension-codeLine" data-line-num="6">  rules: {</span>
<span class="code-block-extension-codeLine" data-line-num="7">    &#39;react/no-unknown-property&#39;: &#39;warn&#39;,</span>
<span class="code-block-extension-codeLine" data-line-num="8">    &#39;react/jsx-no-target-blank&#39;: &#39;off&#39;</span>
<span class="code-block-extension-codeLine" data-line-num="9">  }</span>
<span class="code-block-extension-codeLine" data-line-num="10">}</span>
</code></pre>

In this example, we use extends to indicate the use of existing configurations. `'plugin:next/recommended'` indicates the recommended configuration in the `eslint-plugin-next` plugin. plugins indicates the loaded plugins, but this is just loading. You also need to write rules to customize which rules to use.

For this finished configuration, we can directly inherit it in `.eslintrc.json` using the extends syntax:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">{</span>
<span class="code-block-extension-codeLine" data-line-num="2">  &#34;extends&#34;: &#34;next&#34;</span>
<span class="code-block-extension-codeLine" data-line-num="3">}</span>
</code></pre>

Because all configuration packages start with `eslint-config-`, there is no need to write `"extends": "eslint-config-next"`, ESLint will automatically complete it.

In short, as their names suggest, `plugin` focuses on writing rules, and `config` focuses on configuring rules. `plugin` is loaded in the form of `plugins: [xxx]`, but `rules` need to be written before it can be used. `config` can be directly inherited using the `extends` syntax without additional writing. The `extends` syntax can also inherit the configuration written in `plugin`, and the syntax is in the form of `extends: ['plugin:xxxx/xxx']`.

### 3. ESLint plugin

Next.js provides an ESLint plugin [eslint-plugin-next](https://link.juejin.cn/?target=https%3A%2F%2Fwww.npmjs.com%2Fpackage%2F%40next%2Feslint-plugin-next "https://www.npmjs.com/package/@next/eslint-plugin-next"), which is already bundled in the basic configuration (eslint-config-next). The complete 21 rules can be viewed at [nextjs.org/docs/app/bu…](https://link.juejin.cn/?target=https%3A%2F%2Fnextjs.org%2Fdocs%2Fapp%2Fbuilding-your-application%2Fconfiguring%2Feslint%23eslint-plugin "https://nextjs.org/docs/app/building-your-application/configuring/eslint#eslint-plugin")

### 4. Custom application directory

If you are using `eslint-plugin-next`, but do not have Next.js installed in the root directory (such as a monorepo project), you can use the `settings` property of `.eslintrc` to tell `eslint-plugin-next` where to find your Next.js application:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div>></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-json code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">// .eslintrc.json</span>
<span class="code-block-extension-codeLine" data-line-num="2">{</span>
<span class="code-block-extension-codeLine" data-line-num="3">  &#34;extends&#34;: &#34;next&#34;,</span>
<span class="code-block-extension-codeLine" data-line-num="4">  &#34;settings&#34;: {</span>
<span class="code-block-extension-codeLine" data-line-num="5">    &#34;next&#34;: {</span>
<span class="code-block-extension-codeLine" data-line-num="6">      &#34;rootDir&#34;: &#34;packages/my-app/&#34;</span>
<span class="code-block-extension-codeLine" data-line-num="7">    }</span>
<span class="code-block-extension-codeLine" data-line-num="8">  }</span>
<span class="code-block-extension-codeLine" data-line-num="9">}</span>
</code></pre>

`rootDir` can be a path (relative or absolute), can use wildcards, such as `packages/*/`, or an array containing paths or addresses using wildcards.

### 5. Customize check directories and files

By default, Next.js will run ESLint for all files in the `pages/`, `app/`, `components/`, `lib/`, and `src/` directories. However, you can use the `eslint.dirs` option of `next.config.js` to specify the check directory:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">// next.config.js</span>
<span class="code-block-extension-codeLine" data-line-num="2">module.exports = {</span>
<span class="code-block-extension-codeLine" data-line-num="3">  eslint: {</span>
<span class="code-block-extension-codeLine" data-line-num="4">    dirs: [&#39;pages&#39;, &#39;utils&#39;], </span>
<span class="code-block-extension-codeLine" data-line-num="5">  },</span>
<span class="code-block-extension-codeLine" data-line-num="6">}</span>
</code></pre>

Similarly, you can use `--dir` and `--file` of `next lint` to specify the directory and file to check:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-bash code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">next lint --dir pages --dir utils --file bar.js</span>
</code></pre>

### 6. Cache

To improve performance, Next.js caches ESLint processing information by default, storing it in `.next/cache` or in the build directory. If you need to disable caching, use `--no-cache` of `next lint`:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-bash code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">next lint --no-cache</span>
</code></pre>

### 7. Disabling rules

If you wish to modify or disable rules in plugins (`react`, `react-hooks`, `next`), you can change them directly in `.eslintrc` using the `rules` property:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div>></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-json code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">// .eslintrc.json</span>
<span class="code-block-extension-codeLine" data-line-num="2">{</span>
<span class="code-block-extension-codeLine" data-line-num="3">  &#34;extends&#34;: &#34;next&#34;,</span>
<span class="code-block-extension-codeLine" data-line-num="4">  &#34;rules&#34;: {</span>
<span class="code-block-extension-codeLine" data-line-num="5">    &#34;react/no-unescaped-entities&#34;: &#34;off&#34;,</span>
<span class="code-block-extension-codeLine" data-line-num="6">    &#34;@next/next/no-page-custom-font&#34;: &#34;off&#34;</span>
<span class="code-block-extension-codeLine" data-line-num="7">  }</span>
<span class="code-block-extension-codeLine" data-line-num="8">}</span>
</code></pre>

### 8. core-web-vitals

As mentioned earlier, running `next lint` for the first time and selecting the `Strict` option will enable the use of the `next/core-web-vitals` ruleset:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div>></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-json code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">{</span>
<span class="code-block-extension-codeLine" data-line-num="2">  &#34;extends&#34;: &#34;next/core-web-vitals&#34;</span>
<span class="code-block-extension-codeLine" data-line-num="3">}</span>
</code></pre>

By [viewing the source code](https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fvercel%2Fnext.js%2Fblob%2Fcanary%2Fpackages%2Feslint-plugin-next%2Fsrc%2Findex.ts "https://github.com/vercel/next.js/blob/canary/packages/eslint-plugin-next/src/index.ts"), you can see that the current `core-web-vitals` configuration is stricter than the default configuration:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">module.exports = {</span>
<span class="code-block-extension-codeLine" data-line-num="2">  rules: {</span>
<span class="code-block-extension-codeLine" data-line-num="3">    // ...</span>
<span class="code-block-extension-codeLine" data-line-num="4">  },</span>
<span class="code-block-extension-codeLine" data-line-num="5">  configs: {</span>
<span class="code-block-extension-codeLine" data-line-num="6">    recommended: {</span>
<span class="code-block-extension-codeLine" data-line-num="7">      plugins: [&#39;@next/next&#39;],</span>
<span class="code-block-extension-codeLine" data-line-num="8">      rules: {</span>
<span class="code-block-extension-codeLine" data-line-num="9">        // warnings</span>
<span class="code-block-extension-codeLine" data-line-num="10">        &#39;@next/next/no-html-link-for-pages&#39;: &#39;warn&#39;,</span>
<span class="code-block-extension-codeLine" data-line-num="11">        &#39;@next/next/no-sync-scripts&#39;: &#39;warn&#39;,</span>
<span class="code-block-extension-codeLine" data-line-num="12">         //...</span>
<span class="code-block-extension-codeLine" data-line-num="13">      },</span>
<span class="code-block-extension-codeLine" data-line-num="14">    },</span>
<span class="code-block-extension-codeLine" data-line-num="15">    &#39;core-web-vitals&#39;: {</span>
<span class="code-block-extension-codeLine" data-line-num="16">      plugins: [&#39;@next/next&#39;],</span>
<span class="code-block-extension-codeLine" data-line-num="17">      extends: [&#39;plugin:@next/next/recommended&#39;],</span>
<span class="code-block-extension-codeLine" data-line-num="18">      rules: {</span>
<span class="code-block-extension-codeLine" data-line-num="19">        &#39;@next/next/no-html-link-for-pages&#39;: &#39;error&#39;,</span>
<span class="code-block-extension-codeLine" data-line-num="20">        &#39;@next/next/no-sync-scripts&#39;: &#39;error&#39;,</span>
<span class="code-block-extension-codeLine" data-line-num="21">      },</span>
<span class="code-block-extension-codeLine" data-line-num="22">    },</span>
<span class="code-block-extension-codeLine" data-line-num="23">  },</span>
<span class="code-block-extension-codeLine" data-line-num="24">}</span>
</code></pre>

In fact, at present, two rules are set to be more strict. One is `no-html-link-for-pages`, which means that you should not use the `<a>` tag, but use the Link component instead:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">function Home() {</span>
<span class="code-block-extension-codeLine" data-line-num="2">  return (</span>
<span class="code-block-extension-codeLine" data-line-num="3">    <span class="xml">&lt;div&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="4">      &lt;a href=&#34;/about&#34;&gt;About Us&lt;/a&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="5">    &lt;/div&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="6">  )</span>
<span class="code-block-extension-codeLine" data-line-num="7">}</span>
</code></pre>

You should use instead:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">import Link from &#39;next/link&#39;</span>
<span class="code-block-extension-codeLine" data-line-num="2"></span>
<span class="code-block-extension-codeLine" data-line-num="3">function Home() {</span>
<span class="code-block-extension-codeLine" data-line-num="4">  return (</span>
<span class="code-block-extension-codeLine" data-line-num="5">    <span class="xml">&lt;div&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="6">      &lt;Link href=&#34;/about&#34;&gt;About Us&lt;/Link&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="7">    &lt;/div&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="8">  )</span>
<span class="code-block-extension-codeLine" data-line-num="9">}</span>
<span class="code-block-extension-codeLine" data-line-num="10"></span>
<span class="code-block-extension-codeLine" data-line-num="11">export default Home</span>
</code></pre>

Another one is `no-sync-scripts`, do not use synchronous scripts, it is recommended to use the Script component or add defer or async attributes to the script:

Use the Script component:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">import Script from &#39;next/script&#39;</span>
<span class="code-block-extension-codeLine" data-line-num="2"></span>
<span class="code-block-extension-codeLine" data-line-num="3">function Home() {</span>
<span class="code-block-extension-codeLine" data-line-num="4">  return (</span>
<span class="code-block-extension-codeLine" data-line-num="5">    <span class="xml">&lt;div class=&#34;container&#34;&gt;</span></span>
<span class="code-block-extension-codeLine" data-line-num="6">      &lt;Script src=&#34;https://third-party-script.js&#34;&gt;&lt;/Script&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="7">      &lt;div&gt;Home Page&lt;/div&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="8">    &lt;/div&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="9">  )</span>
<span class="code-block-extension-codeLine" data-line-num="10">}</span>
<span class="code-block-extension-codeLine" data-line-num="11"></span>
<span class="code-block-extension-codeLine" data-line-num="12">export default Home</span>
</code></pre>

Add the async or defer attribute:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">&lt;script src=&#34;https://third-party-script.js&#34; async /&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="2"><span class="xml">&lt;script src=&#34;https://third-party-script.js&#34; defer /&gt;</span></span>
</code></pre>

### 9. With other tools

#### 9.1. prettier

ESLint also contains code formatting rules, which may conflict with existing Prettier configuration. We recommend using `eslint-config-prettier` to make ESLint and Prettier work together.

First install the dependencies:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-bash code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">npm install --save-dev eslint-config-prettier</span>
<span class="code-block-extension-codeLine" data-line-num="2"></span>
<span class="code-block-extension-codeLine" data-line-num="3">yarn add --dev eslint-config-prettier</span>
<span class="code-block-extension-codeLine" data-line-num="4"></span>
<span class="code-block-extension-codeLine" data-line-num="5">pnpm add --save-dev eslint-config-prettier</span>
<span class="code-block-extension-codeLine" data-line-num="6"></span>
<span class="code-block-extension-codeLine" data-line-num="7">bun add --dev eslint-config-prettier</span>
</code></pre>

Then add `prettier` to `.eslintrc.json`:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div>></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-json code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">// .eslintrc.json</span>
<span class="code-block-extension-codeLine" data-line-num="2">{</span>
<span class="code-block-extension-codeLine" data-line-num="3">  &#34;extends&#34;: [&#34;next&#34;, &#34;prettier&#34;]</span>
<span class="code-block-extension-codeLine" data-line-num="4">}</span>
</code></pre>

#### 9.2. lint-staged

When developing, you definitely don't want to perform an ESLint check on all files after modifying a file. Then you can use lint-staged, which will perform ESLint checks on temporary git files (those files added by git).

To use lint-staged, you need to add the following content to the `.lintstagedrc.js` file in the root directory:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">// .lintstagedrc.js</span>
<span class="code-block-extension-codeLine" data-line-num="2">const path = require(&#39;path&#39;)</span>
<span class="code-block-extension-codeLine" data-line-num="3"></span>
<span class="code-block-extension-codeLine" data-line-num="4">const buildEslintCommand = (filenames) =&gt;</span>
<span class="code-block-extension-codeLine" data-line-num="5">  `next lint --fix --file ${filenames</span>
<span class="code-block-extension-codeLine" data-line-num="6">    .map((f) =&gt; path.relative(process.cwd(), f))</span>
<span class="code-block-extension-codeLine" data-line-num="7">    .join(&#39; --file &#39;)}`</span>
<span class="code-block-extension-codeLine" data-line-num="8"></span>
<span class="code-block-extension-codeLine" data-line-num="9">module.exports = {</span>
<span class="code-block-extension-codeLine" data-line-num="10">  &#39;*.{js,jsx,ts,tsx}&#39;: [buildEslintCommand],</span>
<span class="code-block-extension-codeLine" data-line-num="11">}</span>
</code></pre>

### 10. Migrating an existing configuration

If you already have a separate ESLint configuration and want to keep it as is, you can extend the rules directly from the Next.js ESLint plugin (eslint-plugin-next) based on your current configuration:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-javascript code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">module.exports = {</span>
<span class="code-block-extension-codeLine" data-line-num="2">  extends: [</span>
<span class="code-block-extension-codeLine" data-line-num="3">    //...</span>
<span class="code-block-extension-codeLine" data-line-num="4">    &#39;plugin:@next/next/recommended&#39;,</span>
<span class="code-block-extension-codeLine" data-line-num="5">  ],</span>
<span class="code-block-extension-codeLine" data-line-num="6">}</span>
</code></pre>

Or you can import `eslint-config-next`, but make sure it is after other configuration items, for example:

<pre><div class="code-block-extension-header"><div class="code-block-extension-headerLeft"><div class="code-block-extension-foldBtn"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.924 9.617A1 1 0 0 0 16 9H8a1 1 0 0 0-.707 1.707l4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0 .217-1.09z" data-name="Down"></path></svg></div>></div><div class="code-block-extension-headerRight"></div></div><code class="hljs language-json code-block-extension-codeShowNum"><span class="code-block-extension-codeLine" data-line-num="1">// .eslintrc.json</span>
<span class="code-block-extension-codeLine" data-line-num="2">{</span>
<span class="code-block-extension-codeLine" data-line-num="3">  &#34;extends&#34;: [&#34;eslint:recommended&#34;, &#34;next&#34;]</span>
<span class="code-block-extension-codeLine" data-line-num="4">}</span></code></pre>
